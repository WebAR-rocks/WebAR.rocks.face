/**
 * WebAR.rocks.face
 *
 * Copyright (c) 2020 WebAR.rocks ( https://webar.rocks )
 * This code is released under dual licensing:
 *   - GPLv3 
 *   - Nominative commercial license
 * Please read https://github.com/WebAR-rocks/WebAR.rocks.face/blob/master/LICENSE
 * 
*/

// BEGIN EMULATE DOM
// useful for WeChat miniprograms

// import some usefull stuffs
try {
  var Buffer = require('buffer').Buffer;
} catch(err) {
  console.log('Cannot import Buffer package');
}

// emulate global variables:
const navigator = {  
  platform: "Linux x86_64",
  userAgent: "forceWebGL1_noAntialiasing_noDOM"
};

const window = {
  canvas: null,
  innerWidth: -1,
  innerHeight: -1,
  navigator: navigator,
  URL: {
    createObjectURL: function() {
      return null
    }
  },
  addEventListener: function() {},
  removeEventListener: function() {},
  requestAnimationFrame: function(step) {
    if (window.canvas === null){
      setTimeout(step, 1);
      return;
    }
    window.canvas.requestAnimationFrame(step)
  },
  cancelAnimationFrame: function(step) {
    if (window.canvas === null){
      return;
    }
    window.canvas.cancelAnimationFrame(step)
  },
  setCanvas: function(c) {
    window.canvas = c;
  }
};

const document = {
  createElement: function(elementType){
    switch(elementType){
      case 'canvas':
        return null; // return a real canvas
    }
  },
  getElementById: function(elementId){
    return null;
  },
  body: { appendChild: function(element){ return null; }}
};

if(typeof(wx) !== 'undefined'){ //WECHAT
  const systemInfo = wx.getSystemInfoSync()
  window.innnerWidth = systemInfo.windowWidth;
  window.innnerHeight = systemInfo.windowHeight;
}

const FAKEDOM = {
  window: window,
  document: document,
  navigator: navigator
};
// END EMULATE DOM


window.WEBARROCKSFACE=function(){function Rb(a){var b=null,d=null,e=null,l=0,p=this;this.v=function(x){this.Wf(x.vb);e.Oe({Kc:x.Kc,Hc:x.Hc})};this.kf=function(x){return b[x]};this.Wf=function(x){var t=null;l=x.length;b=x.map(function(n,r){n=Object.assign({},n,{index:r,parent:p,Cb:t,zf:r===l-1});return t=r=0===r?Sb.instance(n):Tb.instance(n)});d=b[0];e=b[l-1];b.forEach(function(n,r){0!==r&&n.Nf()})};this.U=function(x){x.h(0);var t=x;b.forEach(function(n){t=n.U(t,!1)});return t};this.jf=function(){return d.F()};
this.pf=function(){return e.F()};this.hc=function(){return e.mf()};this.Ad=function(){return e.Ad()};this.m=function(){b&&(b.forEach(function(x){x.m()}),e=d=b=null,l=0)};"undefined"!==typeof a&&this.v(a)}function kb(a,b){var d=b%8;return a[(b-d)/8]>>7-d&1}function zb(a,b,d){var e=1,l=0;for(d=b+d-1;d>=b;--d)l+=e*kb(a,d),e*=2;return l}function Ab(a){a=a.data;a="undefined"===typeof btoa?Buffer.from(a,"base64").toString("latin1"):atob(a);for(var b=a.length,d=new Uint8Array(b),e=0;e<b;++e)d[e]=a.charCodeAt(e);
return d}function lb(a){return"string"===typeof a?JSON.parse(a):a}function Ub(a){if("undefined"===typeof lb(a).nb){var b=lb(a);a=b.ne;var d=b.nf,e=b.n;b=Ab(b);for(var l=new Float32Array(e),p=new Float32Array(d),x=a+d+1,t=0;t<e;++t){var n=x*t,r=0===kb(b,n)?1:-1,q=zb(b,n+1,a);n=n+1+a;for(var y=p.length,v=0,m=n;m<n+y;++m)p[v]=kb(b,m,!0),++v;for(y=n=0;y<d;++y)n+=p[y]*Math.pow(2,-y-1);l[t]=0===n&&0===q?0:r*(1+n)*Math.pow(2,1+q-Math.pow(2,a-1))}a=l}else if(e=lb(a),a=e.nb,0===a)a=new Uint8Array(e.nb);else{d=
e.n;e=Ab(e);b=new Uint32Array(d);for(l=0;l<d;++l)b[l]=zb(e,l*a,a);a=b}return a}function Va(){if(fa===ea.play)return!1;if(null===A.element)return fa=ea.oe,!1;fa=ea.play;na.Kb();Na.stop();cb();Bb(0);return!0}function mb(){if(fa!==ea.play)return!1;na.stop();Na.stop();fa=ea.pause;return!0}function sa(a,b,d,e,l){a=4*(b*za+a)+d;return e+(P.buffer[a]/255+P.buffer[a+4*za]/65025)*(l-e)}function cb(){Ka.tf()}function Cb(){var a=ca.ua();Aa.P();c.viewport(0,0,za,2*a);C.set("s54");P.ca.h(0);P.Xa.h(1);U.l(!1,!1);
return da.enableAsyncReadPixels?aa.Eb(0,0,za,2*a,P.buffer,db,da.readPixelsAsyncDelay):aa.ce(0,0,za,2*a,P.buffer)}function Vb(a){var b=Ra[a],d=nb[a],e=ua[a];a*=2;b.Qa=sa(1,a,3,0,1);e.detectedRaw=b.Qa;e.detected=Da.la(e.detected,b.Qa,qa.ye);var l=e.isDetected;e.isDetected=e.detected>da.threshold;b.x=sa(0,a,1,-1,1);b.y=sa(0,a,2,-1,1);b.T=sa(0,a,3,0,1);if(e.isDetected){b.rx=sa(1,a,0,-P.ma[0],P.ma[0]);b.ry=sa(1,a,1,-P.ma[1],P.ma[1]);b.Va=sa(1,a,2,-P.ma[2],P.ma[2]);P.rb&&(b.rc=sa(2,a,0,0,1),b.sc=sa(2,a,
1,0,2),b.uc=sa(2,a,2,-Math.PI,Math.PI),b.tc=sa(2,a,3,0,Math.PI),l?(l=ta.lightingRelaxationTime,e.lAmb=na.Ib(b.rc,e.lAmb,l),e.lDir=na.Ib(b.sc,e.lDir,l),e.lTheta=na.Ib(b.uc,e.lTheta,l),e.lPhi=na.Ib(b.tc,e.lPhi,l)):(e.lAmb=b.rc,e.lDir=b.sc,e.lTheta=b.uc,e.lPhi=b.tc));for(l=0;l<ka.zb;++l){var p=3+Math.floor(l/2);b.vc[l][0]=sa(p,a,l%2*2,-1.2,1.2);b.vc[l][1]=sa(p,a,l%2*2+1,-1.2,1.2)}d.dx=b.x-e.x;d.dy=b.y-e.y;d.Zb=b.T-e.s;d.Wb=b.rx-e.rx;d.Xb=b.ry-e.ry;d.Yb=V.ta?b.Va:b.Va-e.rz;a=na.df();d=Da.la(ta.alphaRange[1],
ta.alphaRange[0],Math.pow((1-ob.yc(ta.translationFactorRange[0],ta.translationFactorRange[1],Math.sqrt(d.dx*d.dx+d.dy*d.dy+d.Zb*d.Zb)/a))*(1-ob.yc(ta.rotationFactorRange[0],ta.rotationFactorRange[1],Math.sqrt(d.Wb*d.Wb+d.Xb*d.Xb+d.Yb*d.Yb)/a))*ob.yc(ta.qualityFactorRange[0],ta.qualityFactorRange[1],b.Qa),qa.ze));la.mode===la.wb.Hb&&(la.sa.fb=Math.cos(Math.sqrt(Math.abs(e.ry))),la.sa.cc=la.nd*Math.sin(e.ry));e.x=Da.la(e.x,b.x,d);e.y=Da.la(e.y,b.y,d);e.s=Da.la(e.s,b.T,d);e.rx=Da.la(e.rx,b.rx,d);e.ry=
Da.la(e.ry,b.ry,d);var x=1,t=0;V.ta?(x=Math.cos(e.rz),t=Math.sin(e.rz),e.rz+=ta.followZRotAlphaFactor*d*b.Va):e.rz=Da.la(e.rz,b.Va,d);e.landmarks.forEach(function(n,r){var q=ka.gd[r],y=b.vc[r];r=b.Ff[r];var v=q[0]+y[0]/ka.ac;q=q[1]+y[1]/ka.ac;la.mode===la.wb.Hb&&(v=v*la.sa.fb+la.sa.cc*b.T);V.ta&&(y=q*x+v*t,v=v*x-q*t,q=y);r[0]=b.x+v*b.T;r[1]=b.y+q*b.T*R.Qb;n[0]=r[0];n[1]=r[1]});++b.ya}else V.ta&&(e.rz=0),la.mode===la.wb.Hb&&(la.sa.fb=1,la.sa.cc=0),b.ya=Math.floor(b.ya/2)}function Bb(){fa===ea.play&&
(da.isCleanGLStateAtEachIteration&&(C.qd(),U.reset(),U.Aa(),c.disable(c.DEPTH_TEST),C.Fa()),V.oc?na.Lc(Db,Cb,Eb,db,Fb,da.animateProcessOrder):(Gb(),db(),Fb()))}function Db(){Aa.fa();A.Ta||Gb();var a=na.lf();ca.update(a,ua);for(var b=0;b<a;++b){ca.Kb(b);C.set("s56");la.mode===la.wb.Hb&&C.H("u49",la.sa.fb);var d=ca.ua(),e=ca.Bd();V.ta&&C.H("u48",ua[e].rz);ca.re("u47");R.wa.aa();A.D.h(1);P.ca.h(0);U.l(!1,!1);P.Xa.o();C.set("s3");c.viewport(0,e,za,1);C.ba("u4",1,1/d);C.ba("u5",0,e/d);U.l(!1,!1);Ea.U(R.wa)}}
function db(){Aa.mg();Y.reset();da.isCleanGLStateAtEachIteration&&(Aa.reset(),c.enable(c.DEPTH_TEST));V.Rb&&V.Rb(ca.Sd()?ua:ua[0]);da.isCleanGLStateAtEachIteration&&(U.reset(),U.Aa(),c.disable(c.BLEND))}function Eb(){for(var a=0;a<ca.ua();++a)ca.Df(a)&&Vb(a)}function Fb(){fa===ea.play&&Na.Lc(Bb)}function Gb(){if(A.qb)A.element.needsUpdate&&(A.D.je(A.element.videoWidth,A.element.videoHeight),A.D.Ha(A.element.arrayBuffer),A.element.needsUpdate=!1);else{var a=A.element.currentTime,b=a-A.Db;0>b&&(A.Db=
a);1E3*b<qa.pg||(A.Db+=b,A.D.refresh())}}function Wb(){function a(l,p){C.J(l,[{name:"u38",type:"1f",value:p/za}])}function b(){return ka.labels.map(function(){return[0,0]})}var d=ca.ua();za=3+ka.Fc;var e=new Float32Array(4*za);e={width:za,height:d,isFloat:!0,isPot:!1,array:ca.Ue(e)};P.ca&&P.ca.remove();P.ca=Xb.instance(e);P.Xa=Y.instance(e);P.buffer=new Uint8Array(8*za*d);P.Pc=e.array;a("s55",.5);a("s54",1);a("s56",.5);Ra=ca.$b({Qa:0,x:0,y:0,T:1,rx:0,ry:0,Va:0,vc:b(),Ff:b(),ya:0,rc:0,sc:0,uc:0,tc:0});
ua=ca.$b({detected:0,detectedRaw:0,isDetected:!1,x:0,y:0,s:1,rx:0,ry:0,rz:0,landmarks:b(),lAmb:0,lDir:0,lTheta:0,lPhi:0});nb=ca.$b({dx:0,dy:0,Zb:0,Wb:0,Xb:0,Yb:0})}function Yb(){var a=["u39","u40","u41","u42","u43"].map(function(b,d){var e=d+2*ka.zb+8;d=Math.floor(e/P.size);e-=d*P.size;d=P.size-1-d;return{name:b,type:"2f",value:[(e+.5)/P.size,(d+.5)/P.size]}});C.J("s57",a)}function pb(){C.J("s56",[{type:"1i",name:"u1",value:1},{type:"1i",name:"u45",value:0},{type:"2f",name:"u46",value:R.I},{type:"1f",
name:"u47",value:.5},{type:"1f",name:"u48",value:0},{type:"1f",name:"u49",value:1}]);var a=[{type:"1i",name:"u50",value:0},{type:"1f",name:"u56",value:P.size}];C.J("s55",[{type:"1i",name:"u45",value:1},{type:"1f",name:"u53",value:qa.kg},{type:"1f",name:"u54",value:da.threshold},{type:"3f",name:"u52",value:[P.V[0]*R.I[0],P.V[1]*R.I[1],P.V[2]]},{type:"1f",name:"u47",value:.5},{type:"1f",name:"u55",value:1},{type:"1f",name:"u48",value:0}].concat(a));C.J("s59",[{type:"1f",name:"u55",value:1}].concat(a));
C.J("s60",a);C.J("s57",[{type:"1i",name:"u50",value:0}]);C.J("s54",[{type:"1i",name:"u45",value:0},{type:"1i",name:"u58",value:1},{type:"1f",name:"u60",value:R.I[0]},{type:"2f",name:"u59",value:[0,.5/ca.ua()]}])}function qb(){P.size=Ea.pf();R.I[0]=1;R.I[1]=R.B/R.G;rb.v({Bb:da.overlapFactors,Xd:da.nScaleLevels,B:R.B,G:R.G,ee:da.scale0Factor,V:P.V,fe:da.scanCenterFirst})}function Hb(a){if(null!==V.Ya)Ib(V.Ya,a);else{var b=V.Ob;"JSON"!==b.toUpperCase().split(".").pop()&&(b+=qa.neuralNetworkPath);eb.get(b,
function(d){d=JSON.parse(d);Ib(d,a)})}}function Ib(a,b){if(a.exportData){var d=a.exportData;d.rotationEulerAnglesFactors&&(P.ma=d.rotationEulerAnglesFactors);d.translationScalingFactors&&(P.V=d.translationScalingFactors);P.rb=d.isOutputLighting?!0:!1;d.landmarksLabels&&(ka.labels=d.landmarksLabels,ka.zb=ka.labels.length,ka.Fc=Math.ceil(ka.zb/2));ka.gd=d.landmarksCenters?d.landmarksCenters:ka.labels.map(function(){return[0,0]});d.landmarksFactor&&(ka.ac=d.landmarksFactor);d.facegenMode&&(la.mode=d.facegenMode,
d.facegenDisplaceXFactor&&(la.nd=d.facegenDisplaceXFactor))}b(a)}function Jb(a){Ea=new Rb({vb:a.layers,Kc:"gpuRawAvg",Hc:Zb});R.wa&&R.wa.remove();R.wa=Y.instance({isPot:!0,isFloat:!1,width:Ea.jf()});Wb();qb();P.rb&&Yb();pb()}function $b(){if(Ka.v({bb:V.W,width:R.B,height:R.G,Kd:!1,debug:!1,Gc:function(){Oa("GLCONTEXT_LOST")},antialias:da.antialias,premultipliedAlpha:!0}))return!0;Oa("GL_INCOMPATIBLE");return!1}function Zb(){var a=ca.Bd(),b=ua[a];P.ca.Uf(1);c.viewport(0,a,1,1);C.set("s55");V.ta&&C.H("u48",
b.rz);ca.re("u47");var d=1,e=ca.eg(Ra,R.B/R.G);ca.Sd()&&(e&&(d=0,Ra[a].ya=0,b.isDetected=!1,b.detected=0),C.H("u55",d));C.ag("u51",rb.get(a));U.l(!1,!1);if(ca.qc()||e)c.viewport(1,a,1,1),C.set("s59"),C.H("u55",d),U.l(!1,!1);ca.qc()&&P.rb&&(c.viewport(2,a,1,1),C.set("s57"),U.l(!1,!1));ca.qc()&&(c.viewport(3,a,ka.Fc,1),C.set("s60"),U.l(!1,!1));P.ca.sync()}function Kb(){A.D&&A.D.remove();A.qb=A.element&&A.element.isFakeVideo?!0:!1;var a=null;A.qb?a={isFlipY:!1,array:A.element.arrayBuffer,width:A.element.videoWidth,
height:A.element.videoHeight,isKeepArray:!0}:A.element&&(a={K:A.element});A.Qc=Y.instance(Object.assign({isPot:!1,isLinear:!0,isFloat:!1},a));A.D=A.Qc}function Sa(){var a=[{type:"mat2",name:"u44",value:A.u}];C.J("s58",[{type:"1i",name:"u1",value:0}].concat(a));C.J("s56",a)}function Ta(){var a=[.5,.5],b=A.I[1]/A.I[0],d=Ka.X()/Ka.F();90===Math.abs(va.rotate)&&(b=1/b);b>d?a[1]*=d/b:a[0]*=b/d;C.J("s55",[{name:"u57",type:"1f",value:d}]);A.u[0]=0;A.u[1]=0;A.u[2]=0;A.u[3]=0;switch(va.rotate){case 0:A.u[0]=
a[0];A.u[3]=a[1];break;case 180:A.u[0]=-a[0];A.u[3]=-a[1];break;case 90:A.u[1]=a[0];A.u[2]=-a[1];break;case -90:A.u[1]=-a[0],A.u[2]=a[1]}A.da[0]=A.u[0];A.da[1]=A.u[1];A.da[2]=A.u[2];A.da[3]=A.u[3];A.Ta||(A.u[1]*=-1,A.u[3]*=-1);A.Ta&&A.Md&&(A.da[1]*=-1,A.da[3]*=-1)}function sb(){var a=A.element.videoWidth,b=A.element.videoHeight,d=A.I[0]!==a||A.I[1]!==b;d&&(A.I[0]=a,A.I[1]=b);return d}function fb(a,b){if(fa===ea.error)return!1;A.element=a;sb();b&&b();return!0}function Lb(a,b,d){a&&a();A.Oa={video:{facingMode:{ideal:va.facingMode},
width:{min:va.minWidth,max:va.maxWidth,ideal:va.idealWidth},height:{min:va.minHeight,max:va.maxHeight,ideal:va.idealHeight}},audio:!1};W.ad(A.Oa,va.deviceId);W.get(A.element?A.element:W.Ed(),function(e){b&&b(e);d(e)},function(){Oa("WEBCAM_UNAVAILABLE")},A.Oa)}function Oa(a){fa!==ea.error&&(fa=ea.error,V.Na&&V.Na(a))}var tb=null,Da={nh:function(a){return Math.ceil(Math.log2(a))},Ih:function(a){return Math.log2(a)},Fh:function(a){return 0===Math.log2(a)%1},zg:function(a){var b=[0,0,0,0];a.forEach(function(d){b[0]+=
d[0];b[1]+=d[1];b[2]+=d[2];b[3]+=d[3]});return b},Ag:function(a,b,d){return Math.min(Math.max(a,b),d)},Dg:function(a){return a*Math.PI/180},Qh:function(a,b){b=Math.pow(10,b);return Math.round(a*b)/b},Rh:function(a){return Math.round(1E6*a)/1E6},oh:function(a,b){return(100*a/b).toFixed(3)},la:function(a,b,d){return a*(1-d)+b*d},Jh:function(a,b){return a[0]*(1-b)+a[1]*b},Se:function(a,b){return Da.Ke(a-b)},Ke:function(a){for(;a>Math.PI;)a-=2*Math.PI;for(;a<=-Math.PI;)a+=2*Math.PI;return a},Ig:function(a,
b){return Math.abs(Da.Se(a,b))},qg:function(a,b){return Math.atan2(Math.sin(a)+Math.sin(b),Math.cos(a)+Math.cos(b))}},eb={get:function(a,b,d){var e=new XMLHttpRequest;e.open("GET",a,!0);e.withCredentials=!1;e.onreadystatechange=function(){4===e.readyState&&(200===e.status||0===e.status?b(e.responseText):"undefined"!==typeof d&&d(e.status))};e.send()},qf:function(a){return new Promise(function(b,d){eb.get(a,b,d)})},kh:function(a,b,d){a+=d?"?"+eb.We(d):"";eb.get(a,function(e){b(JSON.parse(e))})},Mh:function(a,
b,d){var e=new XMLHttpRequest;e.open("POST",a,!0);e.setRequestHeader("Content-type","application/x-www-form-urlencoded");e.onreadystatechange=function(){4!==e.readyState||200!==e.status&&0!==e.status||d(e.responseText)};e.send(b)},We:function(a){return"string"===typeof a?a:Object.keys(a).map(function(b){return encodeURIComponent(b)+"="+encodeURIComponent(a[b])}).join("&")},Zg:function(a,b){var d=new XMLHttpRequest;d.open("POST",a,!0);d.responseType="arraybuffer";d.onload=function(){b(d.response)};
d.send()}},ac={create:function(a,b){for(var d=Array(b),e=0;e<b;++e)d[e]=a;return d},Eg:function(a,b){for(var d=0;d<a.length;++d)b[d]=a[d]},clone:function(a){for(var b=Array(a.length),d=0;d<a.length;++d)b[d]=a[d];return b},Uh:function(a,b,d){a.forEach(function(e,l){b[l]=e*d})},ai:function(a){for(var b=a.length-1;0<b;--b){var d=Math.floor(Math.random()*(b+1)),e=a[b];a[b]=a[d];a[d]=e}},ci:function(a){return a.sort(function(b,d){return b-d})},jg:function(a){return Array.isArray(a)||a.constructor===Float32Array||
a.constructor===Uint8Array}},ub={Ub:function(a,b){if(0===b||"object"!==typeof a)return a;a=Object.assign({},a);b=void 0===b||-1===b?-1:b-1;for(var d in a)a[d]=ub.Ub(a[d],b);return a},Hg:function(a){return JSON.parse(JSON.stringify(a))}},ob={bi:function(a,b,d){a=Math.min(Math.max((d-a)/(b-a),0),1);return a*a*(3-2*a)},yc:function(a,b,d){return Math.min(Math.max((d-a)/(b-a),0),1)},Tg:function(a,b,d,e){return Math.pow(Math.min(Math.max((e-a)/(b-a),0),1),d)},gi:function(){return 0},Lh:function(){return 1},
Hh:function(a){return a},Qg:function(a){return a*a},Vg:function(a){return a*(2-a)},Ng:function(a){return.5>a?2*a*a:-1+(4-2*a)*a},Lg:function(a){return a*a*a},Ug:function(a){return--a*a*a+1},Mg:function(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},Rg:function(a){return a*a*a*a},Wg:function(a){return 1- --a*a*a*a},Og:function(a){return.5>a?8*a*a*a*a:1-8*--a*a*a*a},Sg:function(a){return a*a*a*a*a},Xg:function(a){return 1+--a*a*a*a*a},Pg:function(a){return.5>a?16*a*a*a*a*a:1+16*--a*a*a*a*a}},bc={Ze:function(a,
b,d){switch(a){case "relu":return d+"=max(vec4(0.,0.,0.,0.),"+b+");";case "elu":return d+"=mix(exp(-abs("+b+"))-vec4(1.,1.,1.,1.),"+b+",step(0.,"+b+"));";case "elu01":return d+"=mix(0.1*exp(-abs("+b+"))-vec4(0.1,0.1,0.1,0.1),"+b+",step(0.,"+b+"));";case "arctan":return d+"=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}},C=function(){function a(w,f,z){f=w.createShader(f);w.shaderSource(f,z);w.compileShader(f);return w.getShaderParameter(f,w.COMPILE_STATUS)?
f:!1}function b(w,f,z){f=a(w,w.VERTEX_SHADER,f);z=a(w,w.FRAGMENT_SHADER,z);w===c&&t.push(f,z);var I=w.createProgram();w.attachShader(I,f);w.attachShader(I,z);w.linkProgram(I);return I}function d(w){return["float","sampler2D","int"].map(function(f){return"precision "+w+" "+f+";\n"}).join("")}function e(w,f){f.C=f.C?!0:!1;if(!f.C){f.na=f.na||"precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}";f.ab=f.ab||["a0"];f.Ka=f.Ka||[2];f.precision=
f.precision||v;f.id=q++;void 0!==f.he&&(f.he.forEach(function(h,F){f.g=f.g.replace(h,f.Fb[F])}),f.he.splice(0));f.Xc=0;f.Ka.forEach(function(h){f.Xc+=4*h});var z=d(f.precision);f.za=b(w,z+f.na,z+f.g);f.A={};f.i.forEach(function(h){f.A[h]=w.getUniformLocation(f.za,h)});f.attributes={};f.La=[];f.ab.forEach(function(h){var F=w.getAttribLocation(f.za,h);f.attributes[h]=F;f.La.push(F)});if(f.j){w.useProgram(f.za);r=f;n=f.id;for(var I in f.j)w.uniform1i(f.A[I],f.j[I])}f.xa=!0}}function l(w){Ba.Zf(N);n!==
w.id&&(N.N(),n=w.id,r=w,c.useProgram(w.za),w.La.forEach(function(f){0!==f&&c.enableVertexAttribArray(f)}))}function p(w,f,z){e(w,f,z);w.useProgram(f.za);w.enableVertexAttribArray(f.attributes.a0);n=-1;return r=f}function x(){return{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],j:{u1:0}}}var t=[],n=-1,r=null,q=0,y=!1,v="highp",m=["u1"],D=["u0"],E={u1:0},g={u0:0},K={u1:0,u2:1},H={u3:0},k={s0:x(),s1:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
i:m,j:E,precision:"lowp"},s2:{g:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],j:K},s3:{g:"uniform sampler2D u1;uniform vec2 u4,u5;varying vec2 vv0;void main(){vec2 a=vv0*u4+u5;gl_FragColor=texture2D(u1,a);}",i:["u1","u4","u5"],j:E,C:!0},s4:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",i:m,j:E},s5:{g:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",
i:["u1","u2"],j:K},s6:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:m,j:E},s7:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:m,j:E},s8:{g:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",i:["u0","u4"],j:g},s9:{g:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 f=vec4(.25,.25,.25,.25),g=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,f);gl_FragColor=b*g;}",
i:["u0","u4"],j:g},s10:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:m,j:E},s11:{g:"uniform sampler2D u1,u6;uniform float u7;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u6,vv0);gl_FragColor=mix(b,a,u7*f);}",i:["u1","u6","u7"],j:{u1:0,u6:1}},s12:{g:"uniform sampler2D u1;uniform vec2 u8;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u8)+texture2D(u1,vv0+u8*vec2(1.,-1.))+texture2D(u1,vv0+u8*vec2(-1.,-1.))+texture2D(u1,vv0+u8*vec2(-1.,1.)));}",
i:["u1","u8"],j:E},s13:{g:"uniform sampler2D u1;uniform vec4 u9;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u9);gl_FragColor=j(a);}",
i:["u1","u9"],j:E},s14:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:D,j:g,C:!0},s15:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:D,j:g},s16:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:D,j:g},
s17:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:D,j:g},s18:{g:"uniform sampler2D u0,u7,u10;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u7,vv0),d=texture2D(u10,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",i:["u0","u7","u10"],j:{u0:0,u7:1,u10:2},C:!0},s19:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",
i:D,j:g},s20:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=2.*atan(e*texture2D(u0,vv0))/e;}",i:D,j:g,C:!0},s21:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=log(f+a);gl_FragColor=b;}",i:D,j:g,C:!0},s22:{g:"uniform sampler2D u0,u11;uniform float u12;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u11,e);float b=u12*u12;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",
i:["u0","u11","u12"],j:{u0:0,u11:1},C:!0},s23:{g:"uniform sampler2D u1;uniform vec2 u13;varying vec2 vv0;void main(){float a=u13.x*u13.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u13.y),f=floor(u13.x*fract(b*u13.y)),g=(f*u13.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",i:["u1","u13"],j:E},s24:{g:"uniform sampler2D u14,u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u16,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u14,b),f=texture2D(u15,c);gl_FragColor=d*f;}",i:["u14","u15","u16"],j:{u15:0,u14:1,
u16:2},C:!0},s25:{g:"uniform float u17,u18;uniform sampler2D u14,u15;varying vec2 vv0;void main(){vec2 c=fract(vv0*u17),a=vv0;float b=u17*u18;a=(.5+floor(b*vv0))/b;vec4 d=texture2D(u14,a),f=texture2D(u15,c);gl_FragColor=d*f;}",i:["u15","u14","u17","u18"],j:{u15:0,u14:1}},s26:{g:"uniform float u17,u18;uniform sampler2D u14,u15,u19,u20,u21,u22;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 c=fract(vv0*u17),d=vv0;float h=u17*u18;d=(.5+floor(h*vv0))/h;vec4 l=texture2D(u14,d),m=texture2D(u15,c),a=texture2D(u22,d);a=floor(.5+a*255.);vec4 n=texture2D(u19,c),o=texture2D(u20,c),p=texture2D(u21,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b,r=i*m+j*n+k*o+q*p;gl_FragColor=l*r;}",
i:"u14 u15 u17 u18 u22 u19 u20 u21".split(" "),j:{u15:0,u14:1,u22:3,u19:4,u20:5,u21:6},C:!0},s27:{g:"uniform sampler2D u14,u15,u23;uniform float u17,u24,u25,u18;varying vec2 vv0;const vec2 j=vec2(1.,1.),k=vec2(0.,0.);void main(){vec2 b=floor(u24*vv0),c=u24*vv0-b;float d=u17/u24;vec2 f=floor(c*d),g=c*d-f,h=(b+g)/u24;float l=u24*u18/u17;vec2 m=l*f,a=(m+g*u25)/u18;a+=.25/u18;vec2 i=step(a,j)*step(k,a);vec4 n=texture2D(u14,h),o=texture2D(u15,a),p=n*o,q=texture2D(u23,h);gl_FragColor=(p*u25*u25+q)*i.x*i.y;}",
i:"u14 u15 u17 u24 u25 u18 u23".split(" "),j:{u15:0,u14:1,u23:2}},s28:{g:"uniform sampler2D u14,u15;varying vec2 vv0;void main(){vec4 a=texture2D(u14,vv0),b=texture2D(u15,vv0);gl_FragColor=a*b;}",i:["u14","u15"],j:{u15:0,u14:1},C:!0},s29:{g:"uniform sampler2D u1,u23;uniform float u26;varying vec2 vv0;void main(){gl_FragColor=texture2D(u23,vv0)+u26*texture2D(u1,vv0);}",i:["u1","u23","u26"],j:{u1:0,u23:1}},s30:{g:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:m,j:E,precision:"lowp"},s31:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u27"],j:E,precision:"lowp"},s32:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u27"],j:E,precision:"lowp"},s33:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u28))*2.,b-=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,b+=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u28))*2.,b+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u28"],j:K,C:!0},s34:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u28,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u28"],j:K,C:!0},s35:{g:"uniform sampler2D u3;uniform vec2 u8;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u8*g;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u8*h),d=texture2D(u3,a+u8*i),j=texture2D(u3,a+u8),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u3","u8"],j:H},s36:{g:"uniform sampler2D u3;uniform vec2 u8;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u8*k),d=texture2D(u3,a+u8*l),g=texture2D(u3,a+u8),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u8*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u8*m),d=f(a+u8*2.),g=f(a+u8*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u3","u8"],j:H,C:!0},
s37:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],j:E,precision:"lowp",C:!0},s38:{g:"uniform sampler2D u1;uniform vec2 u8;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u8)+2002./e*texture2D(u1,vv0-2.*u8)+3003./e*texture2D(u1,vv0-u8)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u8)+2002./e*texture2D(u1,vv0+2.*u8)+1001./e*texture2D(u1,vv0+3.*u8);gl_FragColor=a;}",i:["u8","u1"],j:E,precision:"lowp",
C:!0},s39:{g:"uniform sampler2D u1,u11,u29;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u11,vv0),b=texture2D(u29,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u11","u29"],j:{u1:0,u11:1,u29:2},C:!0}},J={s40:{g:"uniform float u17,u30;uniform sampler2D u14,u15,u23;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u23,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u17,xyTo=floor(vv0*u17+eps2);float weightSize=toSparsity*u17;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u30*(xyPatch-halfFromSparsity))/u17,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u14,uvWeight)*texture2D(u15,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u17","u14","u15","u23","u30"],Fb:["1.1111","gl_FragColor\\*=2.2222;"]},s41:{g:"uniform float u17,u30,u18;uniform sampler2D u14,u15,u23;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u23,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u18,xyTo=floor(vv0*u17+eps2);float weightSize=fromSparsity*u18;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u17;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u30*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u18,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u14,uvWeight)*texture2D(u15,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u17 u18 u14 u15 u23 u30".split(" "),Fb:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},u=null,L=null,N={tb:function(){return y},v:function(){if(!y){u=ub.Ub(k,2);L=ub.Ub(J,2);v="highp";c.getShaderPrecisionFormat&&(c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.MEDIUM_FLOAT),c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.LOW_FLOAT));for(var w in u)e(c,u[w],w);C.set("s0");c.enableVertexAttribArray(0);y=!0}},cd:function(w){w.forEach(function(f){N.bd(f)})},bd:function(w){u[w.id]=w;e(c,w,w.id)},Gd:function(w,
f,z){f||(f=w);u[f]=Object.create(L[w]);u[f].yf=!0;L[w].Fb&&L[w].Fb.forEach(function(I,h){u[f].g=u[f].g.replace(new RegExp(I,"g"),z[h])});e(c,u[f],f)},set:function(w){var f=u[w];f.C&&(f.C=!1,e(c,f,w));l(f)},Wa:function(w){return p(w,x(),"s42")},Nc:function(w){return p(w,{g:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:v},"s43")},Xe:function(w){return"undefined"===typeof u[w]?!1:u[w].xa},N:function(){-1!==n&&(n=-1,r.La.forEach(function(w){0!==w&&c.disableVertexAttribArray(w)}))},Oc:function(){var w=
0;r.La.forEach(function(f,z){z=r.Ka[z];c.vertexAttribPointer(f,z,c.FLOAT,!1,r.Xc,w);w+=4*z})},qd:function(){c.enableVertexAttribArray(0)},Fa:function(){N.Gb(c)},Gb:function(w){w.vertexAttribPointer(r.La[0],2,w.FLOAT,!1,8,0)},Wh:function(w,f){c.uniform1i(r.A[w],f)},H:function(w,f){c.uniform1f(r.A[w],f)},ba:function(w,f,z){c.uniform2f(r.A[w],f,z)},Xh:function(w,f){c.uniform2fv(r.A[w],f)},ag:function(w,f){c.uniform3fv(r.A[w],f)},Yh:function(w,f,z,I){c.uniform3f(r.A[w],f,z,I)},bg:function(w,f,z,I,h){c.uniform4f(r.A[w],
f,z,I,h)},ke:function(w,f){c.uniform4fv(r.A[w],f)},le:function(w,f){c.uniformMatrix2fv(r.A[w],!1,f)},Zh:function(w,f){c.uniformMatrix3fv(r.A[w],!1,f)},$h:function(w,f){c.uniformMatrix4fv(r.A[w],!1,f)},J:function(w,f){N.set(w);f.forEach(function(z){switch(z.type){case "4f":c.uniform4fv(r.A[z.name],z.value);break;case "3f":c.uniform3fv(r.A[z.name],z.value);break;case "2f":c.uniform2fv(r.A[z.name],z.value);break;case "1f":c.uniform1f(r.A[z.name],z.value);break;case "1i":c.uniform1i(r.A[z.name],z.value);
break;case "mat2":c.uniformMatrix2fv(r.A[z.name],!1,z.value);break;case "mat3":c.uniformMatrix3fv(r.A[z.name],!1,z.value);break;case "mat4":c.uniformMatrix4fv(r.A[z.name],!1,z.value)}})},mh:function(){return"lowp"},m:function(){N.N();c.disableVertexAttribArray(0);for(var w in u){var f=u[w];f.xa&&(f.xa=!1,c.deleteProgram(f.za));f.yf&&delete u[w]}t.forEach(function(z){c.deleteShader(z)});t.splice(0);q=0;y=!1;r=null;n=-1}};return N}(),c=null,Ka=function(){function a(m){console.log("ERROR in ContextFF: ",
m);return!1}function b(){return navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1")}function d(m){function D(){Ha.m();aa.reset();g.getExtension("WEBGL_lose_context").loseContext()}if(b())return!1;var E=document.createElement("canvas");E.setAttribute("width",5);E.setAttribute("height",5);var g=null;try{g=E.getContext("webgl2",m)}catch(K){return!1}if(!g)return!1;e(g);aa.rd(g);m=aa.Vb(g);if(!m.ha&&!m.ja)return D(),!1;m=Ha.ed(g,m);D();return m?!0:!1}function e(m){m.clearColor(0,0,0,0);
m.disable(m.DEPTH_TEST);m.disable(m.BLEND);m.disable(m.DITHER);m.disable(m.STENCIL_TEST);m.disable(m.CULL_FACE);m.GENERATE_MIPMAP_HINT&&m.hint(m.GENERATE_MIPMAP_HINT,m.FASTEST);m.disable(m.SAMPLE_ALPHA_TO_COVERAGE);m.disable(m.SAMPLE_COVERAGE);m.depthFunc(m.LEQUAL);m.clearDepth(1)}var l=null,p=null,x=null,t=null,n=!0,r=null,q=null,y=[],v={F:function(){return l.width},X:function(){return l.height},eh:function(){return l},bh:function(){return c},ka:function(){return n},flush:function(){c.flush()},tf:function(){Aa.fa();
Y.reset();U.reset();C.N();C.qd();c.disable(c.DEPTH_TEST);c.disable(c.BLEND);U.Aa();C.Fa()},cf:function(){r||(r=new Uint8Array(l.width*l.height*4));c.readPixels(0,0,l.width,l.height,c.RGBA,c.UNSIGNED_BYTE,r);return r},fh:function(){return l.toDataURL("image/jpeg")},gh:function(){Aa.P();p||(p=document.createElement("canvas"),x=p.getContext("2d"));p.width=l.width;p.height=l.height;for(var m=v.cf(),D=x.createImageData(p.width,p.height),E=p.width,g=p.height,K=D.data,H=0;H<g;++H)for(var k=g-H-1,J=0;J<E;++J){var u=
4*(H*E+J),L=4*(k*E+J);K[u]=m[L];K[u+1]=m[L+1];K[u+2]=m[L+2];K[u+3]=m[L+3]}x.putImageData(D,0,0);return p.toDataURL("image/png")},bf:function(m){!p&&m&&(p=document.createElement("canvas"),x=p.getContext("2d"));var D=m?p:document.createElement("canvas");D.width=l.width;D.height=l.height;(m?x:D.getContext("2d")).drawImage(l,0,0);return D},v:function(m){m=Object.assign({ia:null,Gc:null,bb:null,md:null,width:512,height:512,premultipliedAlpha:!1,Kd:!0,antialias:!1,debug:!1,Gg:!1},m);m.ia?(c=m.ia,l=m.ia.canvas):
m.md&&!m.bb?l=document.getElementById(m.md):m.bb&&(l=m.bb);l||(l=document.createElement("canvas"));l.width=m.width;l.height=m.height;if(c)n=c instanceof WebGL2RenderingContext;else{n=!0;var D={antialias:m.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:m.premultipliedAlpha,stencil:!1,depth:m.Kd,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance"};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&(D.antialias=!1);var E=d(D);E||!D.antialias||
b()||(D.antialias=!1,E=d(D));E&&(c=l.getContext("webgl2",D));c?n=!0:((c=l.getContext("webgl",D))||(c=l.getContext("experimental-webgl",D)),n=!1)}if(!c)return a("WebGL1 and 2 are not enabled");m.Gc&&l.addEventListener&&(t=c.getExtension("WEBGL_lose_context"))&&(q=m.Gc,l.addEventListener("webglcontextlost",q,!1));if(!aa.v())return a("Not enough GL capabilities");e(c);C.v();U.v();Ha.ed(c,aa.af());y.forEach(function(g){g(c)});y.splice(0);return!0},vg:function(){return new Promise(function(m){c?m(c):y.push(m)})},
m:function(){c&&(aa.m(),C.m(),Ha.m());t&&q&&(l.removeEventListener("webglcontextlost",q,!1),t=q=null);c=r=x=p=l=null;y.splice(0)}};return v}(),Ba=function(){function a(){null===b&&("undefined"!==typeof C?b=C:"undefined"!==typeof JEShaders&&(b=JEShaders))}var b=null;return{reset:function(){b=null},Zf:function(d){b!==d&&(b&&b.N(),b=d)},tb:function(){return b.tb()},Fa:function(){return b.Fa()},Gb:function(d){return b.Gb(d)},Oc:function(){return b.Oc()},N:function(){return b.N()},set:function(d){a();
return b.set(d)},Wa:function(d){a();return b.Wa(d)},Nc:function(d){a();return b.Nc(d)}}}(),Ga=function(){function a(h){c.bindTexture(c.TEXTURE_2D,h)}function b(h){w[0]=h;h=f[0];var F=h>>16&32768,M=h>>12&2047,O=h>>23&255;return 103>O?F:142<O?F|31744|((255==O?0:1)&&h&8388607):113>O?(M|=2048,F|(M>>114-O)+(M>>113-O&1)):F=(F|O-112<<10|M>>1)+(M&1)}function d(h){var F=new Uint16Array(h.length);h.forEach(function(M,O){F[O]=b(M)});return F}function e(){if(null!==z.jc)return z.jc;var h=p(d([.5,.5,.5,.5]),!0);
return null===h?!0:z.jc=h}function l(){if(null!==z.kc)return z.kc;var h=p(new Uint8Array([127,127,127,127]),!1);return null===h?!0:z.kc=h}function p(h,F){if(!Ba.tb()||!E)return null;var M=null,O=Math.sqrt(h.length/4);try{var Z=c.getError();if("FUCKING_BIG_ERROR"===Z)return!1;M=I.instance({isFloat:!1,S:F,array:h,width:O});Z=c.getError();if(Z!==c.NO_ERROR)return!1}catch(ra){return!1}oa.P();c.viewport(0,0,O,O);c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT);Ba.set("s0");M.Ma(0);pa.l(!0,!0);h=4*O*O;
F=new Uint8Array(h);c.readPixels(0,0,O,O,c.RGBA,c.UNSIGNED_BYTE,F);O=!0;for(Z=0;Z<h;++Z)O=O&&3>Math.abs(F[Z]-127);M.remove();oa.fa();return O}var x=0,t=null,n=0,r=null,q=null,y=null,v=null,m=null,D=null,E=!1,g=[],K={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,K:null,ic:null,xf:!1,S:!1,ra:null,yb:4,Ac:0},H=!1,k=null,J=null,u=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,
1]],L=!1,N=!1,w=new Float32Array(1),f=new Int32Array(w.buffer),z={jc:null,kc:null},I={v:function(){E||(m=[c.RGBA,null,c.RGBA,c.RGBA],D=[c.RGBA,null,c.RGBA,c.RGBA],t=[c.TEXTURE0,c.TEXTURE1,c.TEXTURE2,c.TEXTURE3,c.TEXTURE4,c.TEXTURE5,c.TEXTURE6,c.TEXTURE7],L="undefined"!==typeof JEContext,N="undefined"!==typeof aa,L&&JEContext.Gh()&&t.push(c.TEXTURE8,c.TEXTURE9),r=[-1,-1,-1,-1,-1,-1,-1,-1],v=[c.UNSIGNED_BYTE,c.FLOAT,c.FLOAT],E=!0)},uf:function(){if(!q){for(var h=new Float32Array(16384),F=0;16384>F;++F)h[F]=
2*Math.random()-1;q={random:I.instance({isFloat:!0,isPot:!0,array:h,width:64}),ue:I.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}I.og()},vh:function(){return q.ue},og:function(){v[1]=aa.ec(c)},Xf:function(){D=m=[c.RGBA,c.RGBA,c.RGBA,c.RGBA]},de:function(h){C.set("s1");oa.P();var F=h.F(),M=h.X();c.viewport(0,0,F,M);h.h(0);pa.l(!1,!1)},Oh:function(h,F){I.de(h);c.readPixels(0,0,h.F(),h.X(),c.RGBA,c.UNSIGNED_BYTE,F)},Ph:function(h,F){I.de(h);return aa.Eb(0,0,h.F(),h.X(),F)},
yd:function(h,F,M,O,Z,ra,wa){h.activeTexture(h.TEXTURE0);var Ia=h.createTexture();h.bindTexture(h.TEXTURE_2D,Ia);Z=Z instanceof Float32Array?Z:new Float32Array(Z);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST);h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,ra);h.texImage2D(h.TEXTURE_2D,0,h.RGBA,M,O,0,h.RGBA,h.FLOAT,
Z);h.bindTexture(h.TEXTURE_2D,null);h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!1);wa&&(oa.fa(),C.Wa(h));h.viewport(0,0,M,O);h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,F,0);h.bindTexture(h.TEXTURE_2D,Ia);wa?pa.l(!0,!0):U.ib(h);h.deleteTexture(Ia);E&&(r[0]=-1,y=null,x=0)},Pb:function(h){h!==x&&(c.activeTexture(t[h]),x=h)},instance:function(h){var F;function M(){S=void 0!==B.K.videoWidth?B.K.videoWidth:B.K.width;T=void 0!==B.K.videoHeight?B.K.videoHeight:B.K.height}function O(G){var Q=
c.getError();if("FUCKING_BIG_ERROR"===Q)return!1;c.texImage2D(c.TEXTURE_2D,0,ja,ha,ia,G);Q=c.getError();Q!==c.NO_ERROR&&ha!==c.RGBA&&(ha=c.RGBA,c.texImage2D(c.TEXTURE_2D,0,ja,ha,ia,G));return!0}function Z(){if(!Mb){a(xa);Fa&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,Fa);B.isPot?(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,B.isMirrorX?c.MIRRORED_REPEAT:c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,B.isMirrorY?c.MIRRORED_REPEAT:c.REPEAT)):(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),
c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE));B.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&c.texParameterf(c.TEXTURE_2D,JEContext.hh().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.rg);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,B.isLinear?c.LINEAR:c.NEAREST);B.isLinear?c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,B.isMipmap&&!Pa?c.NEAREST_MIPMAP_LINEAR:c.LINEAR):c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,B.isMipmap&&!Pa?c.NEAREST_MIPMAP_NEAREST:c.NEAREST);
ha=m[B.yb-1];ja=D[B.yb-1];ia=v[vb];if(aa.ka()){var G=aa.ef();ha===c.RGBA&&ia===c.FLOAT?B.isMipmap||B.isLinear?ja=Ha.gf(c):aa.fd()?G&&(ja=G):ja=c.RGBA16F||c.RGBA:ha===c.RGB&&ia===c.FLOAT&&G&&(ja=G,ha=c.RGBA)}if(B.S&&!B.isFloat||B.isFloat&&B.isMipmap&&Ha.Cf())ja=aa.ff(),ia=aa.ec(c);B.Ac&&(gb=B.Ac);B.isSrgb&&4===B.yb&&(ha=JEContext.th());if(B.K)O(B.K);else if(B.url)O(La);else if(ya){G=ya;try{"FUCKING_BIG_ERROR"!==c.getError()&&(c.texImage2D(c.TEXTURE_2D,0,ja,S,T,0,ha,ia,G),c.getError()!==c.NO_ERROR&&
(c.texImage2D(c.TEXTURE_2D,0,ja,S,T,0,ha,ia,null),c.getError()!==c.NO_ERROR&&c.texImage2D(c.TEXTURE_2D,0,c.RGBA,S,T,0,c.RGBA,c.UNSIGNED_BYTE,null)))}catch(oc){c.texImage2D(c.TEXTURE_2D,0,ja,S,T,0,ha,ia,null)}B.isKeepArray||(ya=null)}else G=c.getError(),"FUCKING_BIG_ERROR"!==G&&(c.texImage2D(c.TEXTURE_2D,0,ja,S,T,0,ha,ia,null),G=c.getError(),G!==c.NO_ERROR&&(ha=c.RGBA,B.S&&ia!==c.FLOAT&&(ia=c.FLOAT,c.texImage2D(c.TEXTURE_2D,0,ja,S,T,0,ha,ia,null))));if(B.isMipmap)if(!Pa&&ba)ba.dc(),hb=!0;else if(Pa){G=
Math.log2(Math.min(S,T));Ua=Array(1+G);Ua[0]=xa;for(var Q=1;Q<=G;++Q){var ma=Math.pow(2,Q),X=S/ma;ma=T/ma;var Qa=c.createTexture();a(Qa);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texImage2D(c.TEXTURE_2D,0,ja,X,ma,0,ha,ia,null);a(null);Ua[Q]=Qa}hb=!0}a(null);r[x]=-1;Fa&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1);Wa=!0;B.ra&&ba&&(B.ra(ba),B.ra=null)}}function ra(){for(var G=S*T,Q=2*G,ma=3*G,X=0;X<G;++X)Ca[0][X]=Xa[X],Ca[1][X]=
Xa[X+G],Ca[2][X]=Xa[X+Q],Ca[3][X]=Xa[X+ma]}function wa(){var G=S*T*4;Ja=[new Uint8Array(G),new Uint8Array(G),new Uint8Array(G),new Uint8Array(G)];Ca=[new Float32Array(Ja[0].buffer),new Float32Array(Ja[1].buffer),new Float32Array(Ja[2].buffer),new Float32Array(Ja[3].buffer)];ib=new Uint8Array(4*G);Xa=new Float32Array(ib.buffer);Ya=!0}function Ia(){F=new Uint8Array(S*T*4);Nb=new Float32Array(F.buffer);wb=!0}var B=Object.assign({},K,h),Za=n++;null===B.isFlipY&&(B.isFlipY=B.url?!0:!1);B.data&&(B.array=
"string"===typeof B.data?Ub(B.data):B.isFloat?new Float32Array(B.data):new Uint8Array(B.data),B.isFlipY=!1);var vb=0,Ob=B.K?!0:!1,$a=null,xb=null,Pb=!1;B.S=B.S||B.isFloat;B.S&&(vb=1);!B.xf&&B.isFloat&&N&&!aa.fd()&&(B.isFloat=!1);B.isFloat&&(vb=2);B.isAnisotropicFiltering&&L&&!JEContext.zh()&&(B.isAnisotropicFiltering=!1);var xa=B.ic||c.createTexture(),La=null,ya=!1,S=0,T=0,Wa=!1,Mb=!1,Ya=!1,Ca=null,Ja=null,ib=null,Xa=null,ja=null,ha=null,ia=null,Fa=B.isFlipY,cc=(h=B.S&&B.isMipmap)&&Ha.Fe(),Pa=h&&
cc?!0:!1,Ua=null,gb=-1,hb=!1;var wb=!1;var Nb=F=null;B.width&&(S=B.width,T=B.height?B.height:S);var ba={get:function(){return xa},F:function(){return S},X:function(){return T},wh:function(){return B.url},Ah:function(){return B.isFloat},Ch:function(){return B.S},Dh:function(){return B.isLinear},dc:function(){c.generateMipmap(c.TEXTURE_2D)},De:function(G,Q){Pa?(G||(G=ba.Cd()),I.Pb(Q),a(Ua[G]),r[Q]=-1):ba.h(Q)},Cd:function(){-1===gb&&(gb=Math.log(S)/Math.log(2));return gb},Ye:function(G){if(Pa){G||(G=
ba.Cd());C.set("s12");I.Pb(0);for(var Q=S,ma=T,X=1;X<=G;++X)Q/=2,ma/=2,C.ba("u8",.25/Q,.25/ma),c.viewport(0,0,Q,ma),a(Ua[X-1]),c.framebufferTexture2D(oa.lb(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,Ua[X],0),pa.l(!1,1===X);r[0]=-1}else ba.dc()},$f:function(G){(Ob=!ac.jg(G))?(ya=null,B.K=G,M()):ya=G},h:function(G){if(!Wa)return!1;I.Pb(G);if(r[G]===Za)return!1;a(xa);r[G]=Za;return!0},Ma:function(G){c.activeTexture(t[G]);x=G;a(xa);r[G]=Za},o:function(){y=ba;c.framebufferTexture2D(oa.lb(),c.COLOR_ATTACHMENT0,
c.TEXTURE_2D,xa,0)},aa:function(){y=ba;c.viewport(0,0,S,T);c.framebufferTexture2D(oa.lb(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,xa,0)},Vc:I.Vc,je:function(G,Q){S=G;T=Q},resize:function(G,Q){ba.je(G,Q);Z()},clone:function(G){G=I.instance({width:S,height:T,S:B.S,isFloat:B.isFloat,isLinear:B.isLinear,isMirrorY:B.isMirrorY,isFlipY:G?!Fa:Fa,isPot:B.isPot});Ba.set("s0");oa.fa();G.o();c.viewport(0,0,S,T);ba.h(0);pa.l(!0,!0);return G},cg:function(){c.viewport(0,0,S,T)},remove:function(){c.deleteTexture(xa);Mb=
!0;g.splice(g.indexOf(ba),1);ba=null},refresh:function(){ba.Ma(0);Fa&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);Ob?c.texImage2D(c.TEXTURE_2D,0,ja,ha,ia,B.K):c.texImage2D(c.TEXTURE_2D,0,ja,S,T,0,ha,ia,ya);Fa&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},be:function(){Ya||wa();c.readPixels(0,0,S,4*T,c.RGBA,c.UNSIGNED_BYTE,ib);ra();return Ca},Qf:function(){Ya||wa();return aa.Eb(0,0,S,4*T,ib).then(function(){ra();return Ca})},Sf:function(){wb||Ia();c.readPixels(0,0,S,T,c.RGBA,c.UNSIGNED_BYTE,F);return Nb},
Rf:function(){wb||Ia();return aa.Eb(0,0,S,T,F)},od:function(G){oa.P();C.set("s13");ba.h(0);if(G)c.viewport(0,0,S,T),C.bg("u9",.25,.25,.25,.25),pa.l(!1,!0);else for(G=0;4>G;++G)c.viewport(0,T*G,S,T),C.ke("u9",u[G]),pa.l(!1,0===G)},Ha:function(G){var Q=ia===v[0]&&!l();a(xa);Fa&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);Q?(Pb||($a=document.createElement("canvas"),$a.width=S,$a.height=T,xb=$a.getContext("2d"),xb.createImageData(S,T),Pb=!0),null.data.set(G),xb.putImageData(null,0,0),c.texImage2D(c.TEXTURE_2D,
0,ja,ha,ia,$a)):c.texImage2D(c.TEXTURE_2D,0,ja,S,T,0,ha,ia,G);r[x]=Za;Fa&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},fi:function(G,Q){a(xa);Q&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);c.texImage2D(c.TEXTURE_2D,0,ja,ha,ia,G);r[x]=Za;Q&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},Vh:function(G,Q){var ma=S*T,X=4*ma;G=B.S?G?"RGBE":"JSON":"RGBA";Q&&(G=Q);Q=aa.ka()&&!1;var Qa=null;switch(G){case "RGBE":Qa="s44";break;case "JSON":Qa=Q?"s0":"s13";break;case "RGBA":case "RGBAARRAY":Qa="s7"}Ya||("RGBA"===G||"RGBE"===
G||"RGBAARRAY"===G?(Ja=new Uint8Array(X),Ya=!0):"JSON"!==G||Q||wa());oa.P();C.set(Qa);ba.h(0);X=null;if("RGBA"===G||"RGBE"===G||"RGBAARRAY"===G){c.viewport(0,0,S,T);pa.l(!0,!0);c.readPixels(0,0,S,T,c.RGBA,c.UNSIGNED_BYTE,Ja);if("RGBAARRAY"===G)return{data:Ja};H||(k=document.createElement("canvas"),J=k.getContext("2d"),H=!0);k.width=S;k.height=T;ma=J.createImageData(S,T);ma.data.set(Ja);J.putImageData(ma,0,0);X=k.toDataURL("image/png")}else if("JSON"===G)if(Q)X=new Float32Array(ma),c.viewport(0,0,
S,T),pa.l(!0,!0),c.readPixels(0,0,S,T,c.RGBA,c.FLOAT,X);else{for(X=0;4>X;++X)c.viewport(0,T*X,S,T),C.ke("u9",u[X]),pa.l(!X,!X);ba.be();X=Array(ma);for(Q=0;Q<ma;++Q)X[4*Q]=Ca[0][Q],X[4*Q+1]=Ca[1][Q],X[4*Q+2]=Ca[2][Q],X[4*Q+3]=Ca[3][Q]}return{format:G,data:X,width:S,height:T,isMirrorY:B.isMirrorY,isFlipY:"RGBA"===G?B.isFlipY:!B.isFlipY}}};B.isMipmap&&!Pa&&Wa&&!hb&&(ba.dc(),hb=!0);if(B.url)a(xa),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,1,1,0,c.RGBA,c.UNSIGNED_BYTE,null),La=new Image,La.Fg="Anonymous",La.crossOrigin=
"Anonymous",La.src=B.url,La.onload=function(){S=La.width;T=La.height;Z()};else if(B.K){var Qb=function(){M();S?Z():setTimeout(Qb,1)};Qb()}else B.array?(B.S&&!B.isFloat?B.array instanceof Uint16Array?(ya=B.array,Z()):e()?(ya=d(B.array),Z()):(Z(),I.yd(c,xa,ba.F(),ba.X(),B.array,Fa,!0)):(ya=B.isFloat?B.array instanceof Float32Array?B.array:new Float32Array(B.array):B.array instanceof Uint8Array?B.array:new Uint8Array(B.array),Z()),B.isKeepArray||(ya&&ya!==B.array&&(ya=null),delete B.array)):B.ic?Wa=
!0:Z();ba.rh=ba.F;B.ra&&Wa&&(B.ra(ba),B.ra=null);g.push(ba);return ba},P:function(h){h!==x&&(c.activeTexture(t[h]),x=h);r[h]=-1;a(null)},ug:function(h){q.random.h(h)},Vc:function(){y=null;c.framebufferTexture2D(oa.lb(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0)},reset:function(){0!==x&&c.activeTexture(t[0]);for(var h=0;h<t.length;++h)r[h]=-1;x=-1},Sh:function(){x=-1},lg:function(){for(var h=0;h<t.length;++h)I.P(h)},zd:function(){q&&(q.random.remove(),q.ue.remove())},ei:function(h,F){if("RGBA"===h.format||
"RGBE"===h.format){var M=new Image;M.src=h.data;M.onload=function(){I.instance({isMirrorY:h.isMirrorY,isFlipY:h.isFlipY,isFloat:!1,K:M,ra:function(O){if("RGBA"===h.format)F(O);else{var Z=h.width,ra=h.height,wa=I.instance({isMirrorY:h.isMirrorY,isFloat:!0,width:Z,height:ra,isFlipY:h.isFlipY});oa.fa();c.viewport(0,0,Z,ra);C.set("s45");wa.o();O.h(0);pa.l(!0,!0);I.P(0);F(wa);aa.flush();setTimeout(O.remove,50)}}})}}else"JSON"===h.format?F(I.instance({isFloat:!0,isFlipY:h.isFlipY,width:h.width,height:h.height,
array:new Float32Array(h.data)})):F(!1)},Le:d,m:function(){y&&(Aa.fa(),I.Vc(),Aa.P());I.lg();g.slice(0).forEach(function(h){h.remove()});g.splice(0);E=!1;n=0;"undefined"!==typeof Ha&&Ha.m();q=null}};return I}(),Xb=function(){return{instance:function(a){var b=[Ga.instance(a),Ga.instance(a)],d=[b[1],b[0]],e=d,l={Uf:function(p){e[1].o();e[0].h(p);l.pe()},Vf:function(p){e[1].aa();e[0].h(p);l.pe()},pe:function(){e=e===b?d:b},refresh:function(){e[0].refresh();e[1].refresh()},h:function(p){e[0].h(p)},Ma:function(p){e[0].Ma(p)},
tg:function(p){e[1].h(p)},lh:function(){return e[0]},ph:function(){return e[1]},Ha:function(p){e[0].Ha(p);e[1].Ha(p)},remove:function(){e[0].remove();e[1].remove();e=null},sync:function(){l.Vf(0);C.set("s0");U.l(!1,!1)}};return l}}}(),pa=function(){function a(n){var r={ea:null,M:null};r.ea=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,r.ea);n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),n.STATIC_DRAW);r.M=n.createBuffer();n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,r.M);n.bufferData(n.ELEMENT_ARRAY_BUFFER,
new Uint16Array([0,1,2]),n.STATIC_DRAW);return r}var b=null,d=0,e=!1,l=[],p=-2,x=-2,t={reset:function(){x=p=-2},v:function(){e||(b=a(c),t.Aa(),e=!0)},instance:function(n){var r=d++,q=n.M?n.M.length:0,y="undefined"===typeof n.mode?c.STATIC_DRAW:n.mode,v=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,v);c.bufferData(c.ARRAY_BUFFER,n.ea instanceof Float32Array?n.ea:new Float32Array(n.ea),y);p=r;var m=null,D=null,E=null;if(n.M){m=c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,m);var g=null;65536>
n.M.length?(g=Uint16Array,D=c.UNSIGNED_SHORT,E=2):(g=Uint32Array,D=c.UNSIGNED_INT,E=4);g=n.M instanceof g?n.M:new g(n.M);c.bufferData(c.ELEMENT_ARRAY_BUFFER,g,y);x=r}var K={Ee:function(H){p!==r&&(c.bindBuffer(c.ARRAY_BUFFER,v),p=r);H&&Ba.Oc()},Be:function(){x!==r&&(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,m),x=r)},bind:function(H){K.Ee(H);K.Be()},Jg:function(){c.drawElements(c.TRIANGLES,q,D,0)},Kg:function(H,k){c.drawElements(c.TRIANGLES,H,D,k*E)},remove:function(){c.deleteBuffer(v);n.M&&c.deleteBuffer(m);
K=null}};l.push(K);return K},Aa:function(){-1!==p&&(c.bindBuffer(c.ARRAY_BUFFER,b.ea),p=-1);-1!==x&&(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b.M),x=-1)},l:function(n,r){n&&pa.Aa();r&&Ba.Fa();c.drawElements(c.TRIANGLES,3,c.UNSIGNED_SHORT,0)},ib:function(n){n=n||c;var r=a(n);n.bindBuffer(n.ARRAY_BUFFER,r.ea);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,r.M);Ba.Gb(n);n.clear(n.COLOR_BUFFER_BIT);n.drawElements(n.TRIANGLES,3,n.UNSIGNED_SHORT,0);n.flush();n.bindBuffer(n.ARRAY_BUFFER,null);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,
null);n.deleteBuffer(r.ea);n.deleteBuffer(r.M);t.reset();e&&(t.Aa(),Ba.Fa())},zd:function(){var n=c,r=b;n.deleteBuffer(r.ea);n.deleteBuffer(r.M)},m:function(){t.zd();l.forEach(function(n){n.remove()});c.bindBuffer(c.ARRAY_BUFFER,null);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,null);t.reset();e=!1;l.splice(0);d=0}};return t}(),oa=function(){var a=null,b=null,d=null,e=!1,l=[],p={L:-2,xd:1},x={tb:function(){return e},v:function(){if(!e){a=c.createFramebuffer();var t=aa.ka();b=t&&c.DRAW_FRAMEBUFFER?c.DRAW_FRAMEBUFFER:
c.FRAMEBUFFER;d=t&&c.READ_FRAMEBUFFER?c.READ_FRAMEBUFFER:c.FRAMEBUFFER;e=!0}},ih:function(){return b},hf:function(){return d},lb:function(){return c.FRAMEBUFFER},qh:function(){return p},ah:function(){return a},instance:function(t){void 0===t.Jd&&(t.Jd=!1);var n=t.D?t.D:null,r=t.width,q=void 0!==t.height?t.height:t.width,y=a,v=null,m=!1,D=!1,E=0;n&&(r=r?r:n.F(),q=q?q:n.X());var g={ie:function(){m||(y=c.createFramebuffer(),m=!0,E=p.xd++)},xe:function(){g.ie();g.o();v=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,
v);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,r,q);c.framebufferRenderbuffer(b,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,v);c.clearDepth(1)},bind:function(K,H){E!==p.L&&(c.bindFramebuffer(b,y),p.L=E);n&&n.o();H&&c.viewport(0,0,r,q);K&&c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)},sg:function(){E!==p.L&&(c.bindFramebuffer(b,y),p.L=E)},clear:function(){c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)},Bg:function(){c.clear(c.COLOR_BUFFER_BIT)},Cg:function(){c.clear(c.DEPTH_BUFFER_BIT)},cg:function(){c.viewport(0,
0,r,q)},o:function(){E!==p.L&&(c.bindFramebuffer(b,y),p.L=E)},rtt:function(K){n=K;p.L!==E&&(c.bindFramebuffer(c.FRAMEBUFFER,y),p.L=E);K.o()},P:function(){c.bindFramebuffer(b,null);p.L=-1},resize:function(K,H){r=K;q=H;v&&(c.bindRenderbuffer(c.RENDERBUFFER,v),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,r,q))},remove:function(){y===a||D||(c.bindFramebuffer(b,y),c.framebufferTexture2D(b,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0),v&&c.framebufferRenderbuffer(b,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,
null),c.bindFramebuffer(b,null),c.deleteFramebuffer(y),v&&c.deleteRenderbuffer(v));D=!0}};t.Jd&&g.xe();l.push(g);return g},P:function(){c.bindFramebuffer(b,null);p.L=-1},mg:function(){c.bindFramebuffer(b,null);c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);aa.me();p.L=-1},reset:function(){p.L=-2},fa:function(){0!==p.L&&(c.bindFramebuffer(b,a),p.L=0)},clear:function(){aa.me();c.clear(c.COLOR_BUFFER_BIT)},m:function(){x.P();l.forEach(function(t){t.remove()});null!==a&&(c.deleteFramebuffer(a),a=null);
x.reset();e=!1;l.splice(0);p.xd=1}};return x}(),aa=function(){function a(){t="undefined"===typeof Ka?JEContext:Ka;n=!0}function b(k,J){for(var u=0;u<k.length;++u){var L=J.getExtension(k[u]);if(L)return L}return null}function d(){null!==g.Lb&&(clearTimeout(g.Lb),g.Lb=null);g.Ca=!1}function e(k){if(0===g.va.length){g.Y=c.PIXEL_PACK_BUFFER;g.va.splice(0);g.mb.splice(0);for(var J=0;J<g.Pa;++J)g.va.push(c.createBuffer()),g.mb.push(-1);g.ga=0;g.Ec=0}c.bindBuffer(g.Y,g.va[g.ga]);k.byteLength!==g.mb[g.ga]&&
(c.bufferData(g.Y,k.byteLength,c.STREAM_READ),g.mb[g.ga]=k.byteLength);g.xh=!0}function l(){c.bindBuffer(g.Y,null)}function p(){g.Ba.forEach(function(k){c.deleteSync(k)});g.Ba.splice(0)}function x(){g.ga=(g.ga+1)%g.Pa;++g.Ec}var t=null,n=!1,r={Nd:!1,Rc:null,Sc:null,Qd:!1,Bf:!1,Tc:null,Rd:!1,Uc:null,Od:!1,Sb:null,vf:!1,Tb:null,wf:!1},q=null,y={ha:!0,ja:!0,bc:!0,ae:!1},v=null,m=!0,D=null,E=null,g={Me:1,Pa:-1,ga:0,Ec:0,Ca:!1,va:[],Ba:[],mb:[],Y:null,Lb:null},K="undefined"===typeof window?{}:window,H=
{v:function(){if(n)return!0;H.reset();n||a();var k=c;if(!q.Nd){q.Rc=H.ud(k);K.GL_EXT_FLOAT=q.Rc;q.Qd=q.Rc?!0:!1;if(q.Qd||H.ka())q.Sc=H.vd(k),q.Bf=q.Sc?!0:!1,K.GL_EXT_FLOATLINEAR=q.Sc;q.Nd=!0}if(!q.Od){q.Tc=H.gb(k);q.Tc&&(q.Rd=!0,K.GL_EXT_HALFFLOAT=q.Tc);if(q.Rd||H.ka())q.Uc=H.wd(k),K.GL_EXT_HALFFLOATLINEAR=q.Uc;q.yh=q.Uc?!0:!1;q.Od=!0}q.Sb=H.sd(k);q.vf=q.Sb?!0:!1;K.GL_EXT_COLORBUFFERFLOAT=q.Sb;q.Tb=H.td(k);q.wf=q.Tb?!0:!1;K.GL_EXT_COLORBUFFERHALFFLOAT=q.Tb;oa.v();Ga.v();if(!H.Pe())return!1;pa.v();
Ga.uf();return!0},reset:function(){q=Object.assign({},r);v=Object.assign({},y)},F:function(){n||a();return t.F()},X:function(){n||a();return t.X()},ka:function(){n||a();return t.ka()},rd:function(k){H.sd(k);H.td(k);H.ud(k);H.vd(k);H.gb(k);H.wd(k)},sd:b.bind(null,["EXT_color_buffer_float","WEBGL_color_buffer_float","OES_color_buffer_float"]),td:b.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float","OES_color_buffer_half_float"]),ud:b.bind(null,["OES_texture_float","MOZ_OES_texture_float",
"WEBKIT_OES_texture_float"]),vd:b.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),gb:b.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float","WEBKIT_OES_texture_half_float"]),wd:b.bind(null,["OES_texture_half_float_linear","MOZ_OES_texture_half_float_linear","WEBKIT_OES_texture_half_float_linear"]),ec:function(k){var J=H.gb(k);return J&&J.HALF_FLOAT_OES?J.HALF_FLOAT_OES:k.HALF_FLOAT||k.FLOAT},ef:function(){return E||c.RGBA32F||c.RGBA},
ff:function(){return D||c.RGBA16F||c.RGBA},af:function(){return v},fd:function(){return v.ha},xg:function(){return v.ja},wg:function(){return v.bc},Ge:function(){return v.ae&&m},se:function(k){m=k;!k&&g.Ca&&(p(),c.bindBuffer(g.Y,null),g.Ca=!1)},Eh:function(){return g.Ca},Jb:function(k,J,u){function L(){k.bindTexture(k.TEXTURE_2D,null);k.bindFramebuffer(N,null);k.deleteTexture(z);k.deleteFramebuffer(f)}var N=k.FRAMEBUFFER,w=k.NEAREST,f=k.createFramebuffer();k.bindFramebuffer(N,f);var z=k.createTexture();
k.activeTexture(k.TEXTURE0);k.bindTexture(k.TEXTURE_2D,z);k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,!1);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.CLAMP_TO_EDGE);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.CLAMP_TO_EDGE);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,w);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,w);k.texImage2D(k.TEXTURE_2D,0,J,3,3,0,k.RGBA,u,null);k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,z,0);if(k.checkFramebufferStatus(k.READ_FRAMEBUFFER||
k.FRAMEBUFFER)!==k.FRAMEBUFFER_COMPLETE)return L(),!1;Ba.Nc(k);k.clearColor(0,0,0,0);k.viewport(0,0,3,3);k.disable(k.DEPTH_TEST);k.clear(k.COLOR_BUFFER_BIT);pa.ib(k);k.bindFramebuffer(N,null);Ba.Wa(k);k.activeTexture(k.TEXTURE0);k.bindTexture(k.TEXTURE_2D,z);pa.ib(k);J=new Uint8Array(36);k.readPixels(0,0,3,3,k.RGBA,k.UNSIGNED_BYTE,J);L();for(u=0;36>u;++u)if(3!==u%4&&3<Math.abs(J[u]-127))return!1;return!0},Vb:function(k){var J={ha:!1,ja:!1};k.disable(k.BLEND);k.clearColor(0,0,0,0);k.clear(k.COLOR_BUFFER_BIT);
k.RGBA32F&&H.Jb(k,k.RGBA32F,k.FLOAT)&&(J.ha=!0,E=k.RGBA32F);!J.ha&&H.Jb(k,k.RGBA,k.FLOAT)&&(J.ha=!0,E=k.RGBA);var u=H.ec(k);D=null;k.RGBA16F&&H.Jb(k,k.RGBA16F,u)&&(J.ja=!0,D=k.RGBA16F);!J.ja&&H.Jb(k,k.RGBA,u)&&(J.ja=!0,D=k.RGBA);return J},Qe:function(){var k=oa.instance({width:2});k.ie();var J=Ga.instance({width:2,isFloat:!0,yb:3});k.o();J.o();H.flush();c.checkFramebufferStatus(oa.hf())!==c.FRAMEBUFFER_COMPLETE?(Ga.Xf(),v.bc=!1):v.bc=!0;k.remove();J.remove()},Re:function(){var k=!1;H.ka()&&(k="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(J){return"undefined"!==
typeof c[J]}));v.ae=k},Pe:function(){var k=H.Vb(c);Object.assign(v,k);if(!v.ha&&!v.ja)return!1;H.Qe();H.Re();return!0},ce:function(k,J,u,L,N){c.readPixels(k,J,u,L,c.RGBA,c.UNSIGNED_BYTE,N);return Promise.resolve(N,!1)},Eb:function(k,J,u,L,N,w,f){if(!H.Ge())return H.ce(k,J,u,L,N);g.Pa=f||g.Me;e(N);c.readPixels(k,J,u,L,c.RGBA,c.UNSIGNED_BYTE,0);g.Ba[g.ga]=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);H.flush();var z=!1;return new Promise(function(I,h){function F(){if(!g.Ca)return d(),l(),x(),h(),!1;var M=
(g.ga+1)%g.Pa;switch(c.clientWaitSync(g.Ba[M],0,0)){case c.TIMEOUT_EXPIRED:case c.WAIT_FAILED:break;default:return d(),c.deleteSync(g.Ba[M]),g.Ba[M]=null,c.bindBuffer(g.Y,g.va[M]),c.getBufferSubData(g.Y,0,N),l(),x(),I(N,z),!0}g.Lb=setTimeout(F,0);return!1}d();g.Ec+1<g.Pa?(l(),x(),I(N,!1)):(g.Ca=!0,F()||!w||z||(z=!0,w()))})},me:function(){c.viewport(0,0,H.F(),H.X())},flush:function(){c.flush()},m:function(){d();p();Ga.m();oa.m();pa.m();g.va.forEach(function(k){c.deleteBuffer(k)});g.va.splice(0);Ba.reset();
n=!1}};return H}(),U=pa,Aa=oa,Y=Ga,Ha=function(){function a(u,L,N,w){g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,w?g.NEAREST_MIPMAP_NEAREST:g.LINEAR);var f=null;if(null!==N)try{f=g.getError();if("FUCKING_BIG_ERROR"===f)return!1;g.texImage2D(g.TEXTURE_2D,0,u,4,4,0,g.RGBA,L,N);f=g.getError();if(f!==g.NO_ERROR)return!1}catch(z){return!1}w&&g.generateMipmap(g.TEXTURE_2D);g.clear(g.COLOR_BUFFER_BIT);U.ib(g);f=g.getError();if("FUCKING_BIG_ERROR"===f)return!1;g.readPixels(0,0,2,2,g.RGBA,g.UNSIGNED_BYTE,
q);f=g.getError();f===g.INVALID_OPERATION&&"undefined"!==typeof g.PIXEL_PACK_BUFFER&&(g.bindBuffer(g.PIXEL_PACK_BUFFER,null),g.readPixels(0,0,2,2,g.RGBA,g.UNSIGNED_BYTE,q),f=g.getError());if(f!==g.NO_ERROR)return!1;N=!0;for(w=0;16>w;++w)N=N&&4>Math.abs(q[w]-127);N&&(n.Zd=L,n.Id=u);return N}function b(u,L){return K.ha&&a(u,g.FLOAT,new Float32Array(y),L)?(t=x.$c,!0):!1}function d(u,L,N){if(!K.ja)return!1;var w=Ga.Le(y),f=aa.gb(g);if(f&&f.HALF_FLOAT_OES&&a(u,f.HALF_FLOAT_OES,w,L)||g.HALF_FLOAT&&a(u,
g.HALF_FLOAT,w,L))return t=x.Ja,!0;w=new Float32Array(y);if(a(u,g.FLOAT,w,L))return t=x.Ja,!0;g.bindTexture(g.TEXTURE_2D,N);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,2,2,0,g.RGBA,g.UNSIGNED_BYTE,null);g.bindFramebuffer(n.cb,J);Ga.yd(g,N,2,2,w,!1,!1);g.bindFramebuffer(n.cb,null);g.bindTexture(g.TEXTURE_2D,N);return a(u,null,null,L)?(t=x.Ja,!0):!1}function e(u,L,N){r=!0;if(d(u,!0,N)||b(L,!0))return!0;r=!1;return d(u,!1,N)||b(L,!1)?!0:!1}function l(u){if(t===x.N){g=u||c;t=x.RGBA8;r=!0;aa.rd(g);K||(K=aa.Vb(g));
Aa.reset();J=g.createFramebuffer();n.cb=g.DRAW_FRAMEBUFFER||g.FRAMEBUFFER;g.bindFramebuffer(n.cb,null);g.clearColor(0,0,0,0);g.viewport(0,0,2,2);C.N();H=C.Wa(g);u=g.createTexture();g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,u);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.REPEAT);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.REPEAT);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST);k=u;var L=u=g.RGBA,N=g.RGBA16F,w=g.RGBA32F;w&&(u=w);N&&(L=N);if((N||w)&&e(L,u,k))return p(),
!0;u=L=g.RGBA;if(e(L,u,k))return p(),!0;t=x.RGBA8;p();return!1}}function p(){g.deleteProgram(H.za);g.deleteTexture(k);k=H=null}for(var x={N:-1,$c:3,Ja:2,RGBA8:0},t=x.N,n={Zd:null,Id:null,cb:null},r=!0,q=new Uint8Array(16),y=Array(64),v=0;4>v;++v)for(var m=0;4>m;++m){var D=0===(m+v)%2?1:0,E=4*v+m;y[4*E]=D;y[4*E+1]=D;y[4*E+2]=D;y[4*E+3]=D}var g=null,K=null,H=null,k=null,J=null;return{Fe:function(u){l(u);return r},ed:function(u,L){t===x.N&&(typeof("undefined"!==L)&&(K=L),l(u));return t!==x.RGBA8},Bh:function(u){l(u);
return t===x.$c},Cf:function(u){l(u);return t===x.Ja},jh:function(u){l(u);return n.Zd},gf:function(u){l(u);return n.Id},m:function(){g=null;r=!0;t=x.N;K=null}}}(),dc=function(){return{instance:function(a){var b=Y.instance(a.alpha),d=Y.instance(a.beta);return{Te:function(){b.h(1);d.h(2)}}}}}(),Sb=function(){return{instance:function(a){var b=null,d=!1,e=!1,l=null,p=!1,x=!1,t=null,n="undefined"===typeof a.preprocessing?!1:a.preprocessing,r="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;
a.mask&&(d=!0,qa&&void 0!==qa.Ae&&(a.mask=qa.Ae+a.mask),b=Y.instance({isFloat:!1,url:a.mask}));var q=!1;a.customInputShader&&(q="s46",C.bd({name:"_",id:q,g:a.customInputShader,di:["uSource"],precision:"lowp"}),C.J(q,[{type:"1i",name:"_",value:0}]));switch(n){case "sobel":t="s33";p=!0;break;case "meanNormalization":t="s34";p=!0;break;case "grayScale":t="s30";p=!1;break;case "grayScaleTilt":t="s31";x=!0;p=!1;break;case "rgbGrayTilt":t="s32";x=!0;p=!1;break;case "copy":t=q?q:"s0";break;case "inputLightRegulation":t=
q?q:"s30";l=ec.instance({Hd:r,Yd:a.size,Wd:a.nBlurPass,sb:!1});e=!0;break;case "inputMix0":t="none";l=fc.instance({B:r,ve:a.varianceMin,dd:a.blurKernelSizePx,gain:a.gain||1,sb:!1});e=!0;break;case "direct":case "none":t="abort";break;default:t="s4"}x&&C.J(t,[{name:"u27",type:"1f",value:a.tilt}]);d&&(t+="Mask");var y=Y.instance({isFloat:!1,isPot:!1,width:a.size}),v={F:function(){return r},fc:function(){return v.F()},mf:function(){return e?l.hc():y},U:function(m){Aa.fa();"abort"!==t&&("none"!==t&&(C.set(t),
p&&C.H("u28",1/a.size),y.aa(),d&&b.h(1),U.l(!1,!1),y.h(0),m=y),e&&l.process(m))},m:function(){y.remove();d&&b.remove()}};return v}}}(),Tb=function(){return{instance:function(a){function b(h){l.forEach(function(F,M){p[M][0]=h[0][F];p[M][1]=h[1][F];p[M][2]=h[2][F];p[M][3]=h[3][F]});return p}a.normalize=a.normalize||!1;var d={input:null,bias:null,lc:null,$:null,Ab:null,Ic:null,Jc:null},e=null,l=[],p=[],x=!1,t=null,n=!0,r=-1,q=a.isReorganize?a.isReorganize:!1,y=a.kernelsCount?!0:!1,v=a.dynPelu?dc.instance(a.dynPelu):
!1,m=v?!0:!1,D={isEnabled:!1};a.zf?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.Cb.fc(),n=!1):"full"===a.connectivityUp&&(a.sparsity=a.Cb.fc());var E={elu:"s16",elu01:"s17",relu:"s15",arctan:"s19",arctan2:"s20",sigmoid:"s14",copy:"s0",softplus:"s21",dynPelu:"s18"}[a.activation],g=a.sparsity*a.sparsity,K=!1,H=a.size,k="";if(a.maxPooling){switch(a.maxPooling.size){case 2:k="s35";break;case 4:k="s36"}K=!0;H/=a.maxPooling.size;d.Ic=Y.instance({isFloat:!0,isPot:!1,width:H})}var J=a.normalization?
!0:!1,u=null,L=null,N=null;if(J){u="s47"+a.index.toString();C.Gd("s47",u,[((a.normalization.n-1)/2).toFixed(1)]);C.J(u,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u8",value:[1/a.size,1/a.size]},{type:"1f",name:"u7",value:a.normalization.alpha},{type:"1f",name:"u10",value:a.normalization.beta},{type:"1f",name:"u31",value:a.normalization.k}]);var w={isFloat:!0,isPot:!0,width:a.size};L=Y.instance(w);N=Y.instance(w)}var f=-1,z=null;n&&(d.$=Y.instance({isFloat:!0,isPot:!1,width:a.size}));d.bias=Y.instance(a.bias);
var I={F:function(){return a.size},fc:function(){return H},Ad:function(){return a.classesCount},Ce:function(h){e.h(h)},Nf:function(){a.remap&&a.remap.isEnabled&&(D={isEnabled:!0,Gf:Y.instance(a.remap.maskTexture),vb:a.remap.layers.map(function(h){return a.parent.kf(h)}),depth:a.remap.depth})},Yf:function(){switch(a.connectivityUp){case "direct":z=gc.instance(a.connectivity);break;case "square":z=hc.instance(a.connectivity);break;case "squareFast":z=ic.instance(a.connectivity,a.activation);break;case "full":z=
jc.instance(a.connectivity);break;case "conv":r=a.kernelsCount,z=kc.instance(a.connectivity),q&&(d.Ab=Y.instance({width:H,isFloat:!0,isFlipY:!1,isPot:!1}))}if(z.Ga){var h=a.size*a.sparsity;f=Math.log(h/a.size)/Math.log(2);d.input=Y.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:h,Ac:f});d.lc=Y.instance({isFloat:!0,isPot:!0,width:a.size})}},U:function(h,F){e=h;z.Ga?(d.input.aa(),y&&d.bias.h(2),z.U(D),d.input.h(0),d.input.Ye(f),d.lc.aa(),y?C.set("s0"):(C.set("s29"),C.H("u26",g),d.bias.h(1)),d.input.De(f,
0),U.l(!1,!1),C.set(E),J?L.o():d.$.o(),d.lc.h(0),m&&v.Te(),U.l(!1,!1)):(d.$.aa(),d.bias.h(1),z.U());J&&(C.set(u),N.o(),L.h(0),U.l(!1,!1),C.set("s48"),C.H("u7",1),d.$.o(),N.h(1),U.l(!1,!1));if(n)return K?(d.Ic.aa(),d.$.h(0),C.set(k),C.ba("u8",1/a.size,1/a.size),U.l(!1,!1),F=d.Ic):F=d.$,F.h(0),q&&(d.Ab.o(),C.set("s23"),C.ba("u13",r,H/r),U.l(!1,!1),F=d.Ab,d.Ab.h(0)),F;var M=d.$;a.normalize&&(C.set("gpuRawAvg"===x?"s9":"s8"),C.H("u4",1/a.size),d.Jc.aa(),d.$.h(0),U.l(!1,!1),M=d.Jc);h=null;switch(x){case "cpuRGBA2Float":M.od(!1);
F?h=I.Of(M).then(t):(M=I.Pf(M),t(M));break;case "cpuMeanFloat":M.od(!0);if(F)h=M.Rf().then(t);else{M=M.Sf();for(var O=0;O<M.length;++O);t(M)}break;case "gpuRawAvg":case "gpuRaw":M.h(0);case "none":null!==t&&t(M)}F&&null===h&&(h=Promise.resolve());return h},Oe:function(h){h&&(x=h.Kc||"none",t=h.Hc||null);d.$=Y.instance({isFloat:!0,isPot:!0,isMipmap:!1,width:a.size});h="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var F=0,M=0,O=0;F<h;++F)l.push(M+(a.size-1-O)*
a.size),p.push([-1,-1,-1,-1]),++M,M===a.size&&(M=0,++O);a.normalize&&(d.Jc=Y.instance({isFloat:!0,isPot:!0,width:a.size}))},Of:function(h){return h.Qf().then(b)},Pf:function(h){h=h.be();b(h);return p},m:function(){for(var h in d){var F=d[h];F&&F.remove()}z&&(z.m(),z=null)}};a.Cb&&I.Yf(a.Cb);return I}}}(),gc=function(){return{instance:function(a){var b=Y.instance(a.weights);return{Ga:!0,kb:function(){return 1},m:function(){b.remove()},sf:function(){return b},U:function(){C.set("s28");b.h(1);U.l(!1,
!1)}}}}}(),jc=function(){return{instance:function(a){var b=a.fromLayerSize,d=Y.instance(a.weights);return{Ga:!0,kb:function(){return b},m:function(){d.remove()},U:function(e){if(e.isEnabled){C.set("s26");e.Gf.h(3);for(var l=Math.min(e.vb.length,e.depth),p=0;p<l;++p)e.vb[p].Ce(4+p)}else C.set("s25");C.H("u17",a.toLayerSize);C.H("u18",a.fromLayerSize);d.h(1);U.l(!1,!1)}}}}}(),hc=function(){return{instance:function(a){for(var b=a.fromLayerSize,d=a.toLayerSize,e=a.toSparsity,l=e*d,p=l/b,x=b/d,t=0,n=0,
r=0,q=Array(e*d*e*d*4),y=Array(e*d*e*d*4),v=Array(b*b),m=0;m<v.length;++m)v[m]=0;m=Math.floor(e/2);for(var D=.5/d,E=.5/b,g=.5/l,K=0;K<d;++K)for(var H=Math.round(K*x),k=0;k<d;++k){var J=Math.round(k*x),u=K/d,L=k/d;u+=D;L+=D;for(var N=0;N<e;++N){var w=H+N-m;0>w&&(w+=b);w>=b&&(w-=b);for(var f=0;f<e;++f){var z=t/l,I=n/l,h=J+f-m;0>h&&(h+=b);h>=b&&(h-=b);var F=w/b,M=h/b;I=1-I-1/l;F+=E;M+=E;z+=g;I+=g;var O=K*e+N,Z=k*e+f;Z=d*e-Z-1;O=Z*d*e+O;q[4*O]=z;q[4*O+1]=I;q[4*O+2]=F;q[4*O+3]=M;M=v[h*b+w]++;O=M%p;F=w*
p+O;h=h*p+(M-O)/p;h=b*p-1-h;h=h*b*p+F;y[4*h]=z;y[4*h+1]=I;y[4*h+2]=u;y[4*h+3]=L;++t>=l&&(t=0,++n);++r}}}v=null;var ra=Y.instance(a.weights);delete a.weights.data;var wa=Y.instance({width:l,isFloat:!0,array:new Float32Array(y),isPot:!0});y=null;var Ia=Y.instance({width:l,isFloat:!0,array:new Float32Array(q),isPot:!0});q=null;return{Ga:!0,kb:function(){return p},m:function(){wa.remove();Ia.remove();ra.remove()},U:function(){C.set("s24");ra.h(1);Ia.h(2);U.l(!1,!1)}}}}}(),kc=function(){return{instance:function(a){var b=
a.kernelsCount,d=a.toSparsity,e=d*a.toLayerSize/a.fromLayerSize,l=Y.instance(a.weights);return{Ga:!0,kb:function(){return e},uh:function(){return d},sf:function(){return l},m:function(){l.remove()},U:function(){C.set("s27");C.H("u24",b);C.H("u25",d);C.H("u17",a.toLayerSize);C.H("u18",a.fromLayerSize);l.h(1);U.l(!1,!1)}}}}}(),ic=function(){return{instance:function(a,b){var d=a.fromLayerSize,e=a.toLayerSize,l=a.toSparsity,p=a.stride?a.stride:1,x=l*e/d,t=e<d,n=d/e,r=Y.instance(a.weights),q="s49"+[d.toString(),
e.toString(),l.toString(),p.toString(),b].join("_");C.Xe(q)||(a=bc.Ze(b,"gl_FragColor","gl_FragColor"),e=[{type:"1f",name:"u17",value:e},{type:"1f",name:"u30",value:p}],t&&e.push({type:"1f",name:"u18",value:d}),d=[(t?x:l).toFixed(1),a],t&&d.push(n.toFixed(1)),C.Gd(t?"s41":"s40",q,d),C.J(q,e.concat([{type:"1i",name:"u15",value:0},{type:"1i",name:"u23",value:1},{type:"1i",name:"u14",value:3}])));return{Ga:!1,kb:function(){return x},m:function(){r.remove()},U:function(){C.set(q);r.h(3);U.l(!1,!1)}}}}}(),
ec=function(){return{instance:function(a){var b=a.Wd?a.Wd:3,d=a.Hd?a.Hd:64,e=a.Yd?a.Yd:64,l=a.sb?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var p=Y.instance(a),x=Y.instance(a),t=Y.instance(a),n=Y.instance(a),r=Y.instance({isFloat:!0,width:e,isPot:!1,isFlipY:!1}),q=1/d;return{process:function(y){C.set("s37");n.o();U.l(l,!1);C.set("s38");for(var v=0;v<b;++v)p.o(),C.ba("u8",q,0),U.l(l,!1),t.o(),n.h(0),U.l(l,!1),x.o(),p.h(0),C.ba("u8",0,q),U.l(l,!1),n.o(),t.h(0),U.l(l,!1),v!==b-1&&x.h(0);C.set("s39");
r.o();y.h(0);x.h(1);n.h(2);U.l(l,!1);r.h(0)},hc:function(){return r}}}}}(),fc=function(){return{instance:function(a){function b(q){return Y.instance({isFloat:q,width:d.B,isPot:!1,isFlipY:!1})}var d=Object.assign({ve:.1,dd:9,B:128,gain:1,sb:!1},a),e=b(!1),l=[b(!1),b(!1),b(!1)],p=[b(!1),b(!1),b(!1)],x=b(!0),t=[e,p[0],p[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u32;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u32*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((d.dd-1)/2).toFixed(2)).replace("2.2222",(1/d.B).toFixed(6));var n="uniform sampler2D u33,u34,u35,u36;const float f=1.1111;const vec3 g=vec3(1.,1.,1.);const float h=2.2222;varying vec2 vv0;void main(){vec3 a=texture2D(u33,vv0).rgb;float c=texture2D(u34,vv0).r,d=texture2D(u35,vv0).r,i=texture2D(u36,vv0).r,j=a.r*a.r;vec3 b=vec3(c,d,i),k=max(g*f,abs(j-b*b)),l=sqrt(k);gl_FragColor=vec4(a.r,h*(a-b)/l);}".replace("1.1111",d.ve.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),r={u1:0};C.cd([{id:"s51",
name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.,1.,1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",j:r,i:["u1"],precision:"lowp"},{id:"s52",name:"_",g:a,j:r,i:["u1","u32"],precision:"lowp"},{id:"s53",name:"_",g:n,j:{u33:0,u34:1,u35:2,u36:3},i:["u33","u34","u35","u36"],precision:"highp"}]);return{process:function(){C.set("s51");e.aa();U.l(d.sb,!1);C.set("s52");for(var q=0;3>q;++q)C.ba("u32",1,0),l[q].o(),t[q].h(0),
U.l(!1,!1),C.ba("u32",0,1),p[q].o(),l[q].h(0),U.l(!1,!1);C.set("s53");x.o();e.h(0);p[0].h(1);p[1].h(2);p[2].h(3);U.l(!1,!1);x.h(0)},hc:function(){return x}}}}}(),W={Ed:function(){return W.ld()?document.createElement("video"):!1},Ra:function(a,b){a[b]=!0;a.setAttribute(b,"true")},Je:function(){var a=!1,b=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(b)||
/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,
4)))a=!0;return a},hd:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},$e:function(){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return a&&a.length&&2<a.length?[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]:[0,0,0]},Td:function(){try{return window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(a){return window.innerHeight>window.innerWidth}},Ie:function(){return W.jd()||W.hd()},jd:function(){var a=navigator.userAgent.toLowerCase();
return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1},Yg:function(){return W.Je()?W.Td()?window.innerHeight/window.innerWidth*45:45:45},ld:function(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1},pause:function(a){a.pause()},Th:function(a){a.play()},release:function(a){a.pause();a.videoStream&&a.videoStream.stop();a.videoStream=null},kd:function(a){if(!a)return a;var b=null;if(a.video){var d=function(e){return e&&"object"===typeof e?Object.assign({},e):e};b={};
"undefined"!==typeof a.video.width&&(b.width=d(a.video.width));"undefined"!==typeof a.video.height&&(b.height=d(a.video.height));"undefined"!==typeof a.video.facingMode&&(b.facingMode=d(a.video.facingMode))}b={audio:a.audio,video:b};"undefined"!==typeof a.deviceId&&W.ad(b,a.deviceId);return b},ad:function(a,b){b&&(a.video=a.video||{},a.video.deviceId={exact:b},a.video.facingMode&&delete a.video.facingMode)},qe:function(a){var b=a.video.width;a.video.width=a.video.height;a.video.height=b;return a},
Ne:function(a){function b(v){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(m,D){return Math.abs(m-v)-Math.abs(D-v)})}function d(v){var m=W.kd(a);v=v(m);l.push(v);e(v)}function e(v){if(v.video&&v.video.facingMode&&v.video.facingMode.exact){var m=v.video.facingMode.exact;v=W.kd(v);delete v.video.facingMode.exact;v.video.facingMode.ideal=m;l.push(v)}}var l=[];if(!a||!a.video)return l;e(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var p=
b(a.video.width.ideal).slice(0,3),x=b(a.video.height.ideal).slice(0,3),t={},n=0;for(t.pa=void 0;n<p.length;t={pa:t.pa},++n){t.pa=p[n];var r={},q=0;for(r.oa=void 0;q<x.length;r={oa:r.oa},++q)if(r.oa=x[q],t.pa!==a.video.width.ideal||r.oa!==a.video.height.ideal){var y=Math.max(t.pa,r.oa)/Math.min(t.pa,r.oa);y<4/3-.1||y>16/9+.1||d(function(v,m){return function(D){D.video.width.ideal=v.pa;D.video.height.ideal=m.oa;return D}}(t,r))}}}d(function(v){return W.qe(v)})}a.video.width&&a.video.height&&(a.video.width.ideal&&
a.video.height.ideal&&d(function(v){delete v.video.width.ideal;delete v.video.height.ideal;return v}),d(function(v){delete v.video.width;delete v.video.height;return v}));a.video.facingMode&&(d(function(v){delete v.video.facingMode;return v}),a.video.width&&a.video.height&&d(function(v){W.qe(v);delete v.video.facingMode;return v}));l.push({audio:a.audio,video:!0});return l},ig:function(a){if(W.Td()){if(!a||!a.video)return!1;var b=a.video.width,d=a.video.height;if(!b||!d)return!1;if(b.ideal&&d.ideal&&
b.ideal>d.ideal)return a.video.height=b,a.video.width=d,!0}return!1},xb:function(a){a.volume=0;W.Ra(a,"muted");if(W.jd()){if(1===a.volume){var b=function(){a.volume=0;window.removeEventListener("mousemove",b,!1);window.removeEventListener("touchstart",b,!1)};window.addEventListener("mousemove",b,!1);window.addEventListener("touchstart",b,!1)}setTimeout(function(){a.volume=0;W.Ra(a,"muted")},5)}},te:function(a,b,d){return null===a?Promise.resolve():new Promise(function(e,l){if(a.srcObject&&a.srcObject.getVideoTracks){var p=
a.srcObject.getVideoTracks();1!==p.length?l("INVALID_TRACKNUMBER"):(p=p[0],b?W.get(a,e,l,d):(p.stop(),e()))}else l("BAD_IMPLEMENTATION")})},Dd:function(a,b,d,e){function l(x){p||(p=!0,d(x))}var p=!1;return navigator.mediaDevices.getUserMedia(e).then(function(x){function t(){setTimeout(function(){if(a.currentTime){var r=a.videoWidth,q=a.videoHeight;if(0===r||0===q)l("VIDEO_NULLSIZE");else{r&&(a.style.width=r.toString()+"px");q&&(a.style.height=q.toString()+"px");var y={He:null,dg:null,Hf:null};try{var v=
x.getVideoTracks()[0];v&&(y.Hf=v,y.He=v.getCapabilities(),y.dg=v.getSettings())}catch(m){}W.Ie()?a.parentNode&&null!==a.parentNode?(p||b(a,x,y),setTimeout(function(){a.play()},100)):(document.body.appendChild(a),W.xb(a),setTimeout(function(){a.style.transform="scale(0.0001,0.0001)";a.style.position="fixed";a.style.bottom="0px";a.style.right="0px";W.xb(a);setTimeout(function(){a.play();p||b(a,x,y)},100)},80)):p||b(a,x,y)}}else l("VIDEO_NOTSTARTED")},700)}function n(){a.removeEventListener("loadeddata",
n,!1);var r=a.play();W.xb(a);"undefined"===typeof r?t():r.then(function(){t()}).catch(function(){l("VIDEO_PLAYPROMISEREJECTED")})}"undefined"!==typeof a.srcObject?a.srcObject=x:(a.src=window.URL.createObjectURL(x),a.videoStream=x);W.xb(a);a.addEventListener("loadeddata",n,!1)}).catch(function(x){l(x)})},qf:function(a,b){var d=b||W.Ed();return new Promise(function(e,l){W.get(d,e,l,a)})},get:function(a,b,d,e){if(!a)return d&&d("VIDEO_NOTPROVIDED"),!1;if(!W.ld())return d&&d("MEDIASTREAMAPI_NOTFOUND"),
!1;if(e&&e.video){if(W.hd()){var l=W.$e();0!==l[0]&&(12>l[0]||12===l[0]&&2>l[1])&&W.ig(e)}e.video.width&&e.video.width.ideal&&(a.style.width=e.video.width.ideal+"px");e.video.height&&e.video.height.ideal&&(a.style.height=e.video.height.ideal+"px")}W.Ra(a,"autoplay");W.Ra(a,"playsinline");e&&e.audio?a.volume=0:W.Ra(a,"muted");W.Dd(a,b,function(){function p(t){if(0===t.length)d("INVALID_FALLBACKCONSTRAINTS");else{var n=t.shift();W.Dd(a,b,function(){p(t)},n)}}var x=W.Ne(e);p(x)},e)},rf:function(a){if(!navigator.mediaDevices||
!navigator.mediaDevices.enumerateDevices)return a(!1,"NOTSUPPORTED"),!1;navigator.mediaDevices.enumerateDevices().then(function(b){(b=b.filter(function(d){return d.kind&&-1!==d.kind.toLowerCase().indexOf("video")&&d.label&&d.deviceId}))&&b.length&&0<b.length?a(b,!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,"PROMISEREJECTED")})},yg:function(a,b,d){var e={};e[b]=d;b=[];b.push(e);a.applyConstraints({advanced:b}).catch(function(){})}},na=function(){function a(E,g,K,H,k,J,u){if(!m)if(u===J.length)k();
else{switch(J[u]){case "A":K();break;case "D":E();break;case "S":g().then(function(L,N){D.Kb();a(E,g,K,N?null:H,k,J,++u)}).catch(function(L){console.log("An error occurred in the WebAR loop: ",L);k()});return;case "R":H&&H()}a(E,g,K,H,k,J,++u)}}var b={n:5,Dc:1,Vd:0,jb:[35,49],eb:[2,200],k:.7,ng:200,Mf:.05},d=-1,e=null,l=-1,p=-1,x=0,t=-1,n=-1,r=0,q=0,y=b.eb[1],v=Math.log(2),m=!0,D={lf:function(){switch(d){case -1:return-1;case 0:return n+e.Vd;case 1:return r}},dh:function(E){return Math.pow(Math.min(Math.max(t,
0),e.n-1)/(e.n-1),E||1)},v:function(E){e=Object.assign({},b,E);t=n=e.Dc;d=0;D.reset()},Kb:function(E){E=("undefined"===typeof E?Date.now():E)||0;var g=Math.min(Math.max(E-q,e.eb[0]),e.eb[1]);y=g;q=E;var K=-1===l?0:e.k;l=Math.min(Math.max(1E3/g,5),120)*(1-K)+l*K;E-p>e.ng&&5<++x&&(g=e.k,t=t*(1-g)+(l<e.jb[0]?n-1:l>e.jb[1]?n+1:n)*g,Math.abs(t-n)>1-e.Mf&&(g=Math.min(Math.max(Math.round(t),0),e.n-1),g!==n&&(t=n=g,l=(e.jb[1]-e.jb[0])/2)),p=E)},Lc:function(E,g,K,H,k,J){m=!1;a(E,g,K,H,k,J,0)},stop:function(){m=
!0},Mc:function(E){r=E;d=1},Wc:function(){d=0;D.reset()},reset:function(){y=b.eb[1];p=l=-1;x=0},Ib:function(E,g,K){K=Math.exp(-v*y/K);return(1-K)*E+K*g},df:function(){return y}};return D}(),Na=function(){function a(){d(E+m.Cc);g.port.postMessage("DONE")}function b(){J.$a=0===m.Za?H(d):H(e)}function d(f){k.Da&&null!==D&&(f-=E,f=Math.min(Math.max(f,m.pd[0]),m.pd[1]),E+=f,p(),u.isEnabled&&u.Sa&&k.Z&&E-u.wc>m.Zc&&(r(),u.wc=E),D(E))}function e(f){k.Da&&(J.timeout=setTimeout(d.bind(null,f),m.Za))}function l(){D=
null;k.Da=!1;p()}function p(){J.$a&&(window.cancelAnimationFrame(J.$a),J.$a=null);J.timeout&&(window.clearTimeout(J.timeout),J.timeout=null)}function x(f){f&&!k.Z?(k.Z=!0,K&&na.Wc(),g.port.postMessage("STOP"),aa.se(!0),b()):!f&&k.Z&&(k.Z=!1,K&&na.Mc(1),aa.se(!1),g.port.postMessage("START"))}function t(f){f.target.hidden?N():L()}function n(f,z,I){z=f.createShader(z);f.shaderSource(z,I);f.compileShader(z);return z}function r(){u.Sa=!1;var f=u.ia,z=u.ob,I=u.pb,h=u.Y;f.uniform1f(u.Fd,Math.random());u.Ea?
z.beginQueryEXT(h,I):f.beginQuery(h,I);f.drawElements(f.POINTS,1,f.UNSIGNED_SHORT,0);u.Ea?z.endQueryEXT(h):f.endQuery(h);aa.flush();y().then(function(F){F=m.we*m.Yc*1E3/F;u.Mb=(u.Mb+1)%m.Ia;u.xc[u.Mb]=F;++u.Ud>m.Ia&&(u.ub.set(u.xc),u.ub.sort(function(M,O){return M-O}),F=u.ub[Math.floor(m.Ia/2)],u.hb=Math.max(u.hb,F),m.Nb(F/u.hb));u.Sa=!0}).catch(function(){u.Sa=!0})}function q(f){var z=u.ia,I=u.ob,h=u.pb;h=u.Ea?I.$g(h,I.QUERY_RESULT_AVAILABLE_EXT):z.getQueryParameter(h,z.QUERY_RESULT_AVAILABLE);z=
z.getParameter(I.GPU_DISJOINT_EXT);h?f(!z):setTimeout(q.bind(null,f),.1)}function y(){return new Promise(function(f,z){q(function(I){if(I){I=u.ia;var h=u.ob,F=u.pb;I=u.Ea?h.getQueryObjectEXT(F,h.QUERY_RESULT_EXT):I.getQueryParameter(F,I.QUERY_RESULT);f(I)}else z()})})}var v={Pd:!0,pd:[1,200],Cc:20,Za:0,Yc:50,we:240,Zc:3E3,Ia:3,Nb:null},m=null,D=null,E=0,g=null,K=!1,H=null,k={xa:!1,Z:!0,pc:!1,nc:!1,mc:!1,Da:!1},J={$a:null,timeout:null},u={isEnabled:!1,Sa:!1,ia:null,ob:null,pb:null,Y:null,Fd:null,Ea:!0,
wc:0,Ud:0,xc:null,ub:null,Mb:0,hb:0},L=x.bind(null,!0),N=x.bind(null,!1),w={v:function(f){m=Object.assign(v,f);Object.assign(k,{Z:!0,xa:!0,Da:!1});H=window.requestPostAnimationFrame||window.requestAnimationFrame;if(null!==m.Nb){f=document.createElement("canvas");f.setAttribute("width","1");f.setAttribute("height","1");var z={antialias:!1};f=f.getContext("webgl2",z)||f.getContext("webgl",z);if(z=f.getExtension("EXT_disjoint_timer_query")||f.getExtension("EXT_disjoint_timer_query_webgl2")){u.ia=f;u.ob=
z;u.isEnabled=!0;u.Ea=z.beginQueryEXT?!0:!1;var I=n(f,f.VERTEX_SHADER,"attribute vec4 a0;void main(){gl_Position=a0;}"),h=n(f,f.FRAGMENT_SHADER,"precision lowp float;uniform float u37;void main(){vec4 a=u37*vec4(1.,2.,3.,4.);for(int b=0;b<666;b+=1)a=cos(a);gl_FragColor=a;}".replace("666",m.Yc.toString())),F=f.createProgram();f.attachShader(F,I);f.attachShader(F,h);f.linkProgram(F);I=f.getAttribLocation(F,"a0");u.Fd=f.getUniformLocation(F,"u37");f.useProgram(F);f.enableVertexAttribArray(I);F=f.createBuffer();
f.bindBuffer(f.ARRAY_BUFFER,F);f.bufferData(f.ARRAY_BUFFER,new Float32Array([.5,.5,0,1]),f.STATIC_DRAW);f.vertexAttribPointer(I,4,f.FLOAT,!1,16,0);F=f.createBuffer();f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,F);f.bufferData(f.ELEMENT_ARRAY_BUFFER,new Uint16Array([0]),f.STATIC_DRAW);f.disable(f.DEPTH_TEST);f.disable(f.DITHER);f.disable(f.STENCIL_TEST);f.viewport(0,0,1,1);F=u.Ea?z.createQueryEXT():f.createQuery();u.pb=F;u.Y=z.TIME_ELAPSED_EXT||f.TIME_ELAPSED;u.wc=-m.Zc;u.xc=new Float32Array(m.Ia);u.ub=new Float32Array(m.Ia);
u.hb=0;u.Mb=0;u.Ud=0;u.Sa=!0}}if(m.Pd){f=!1;try{if("undefined"===typeof SharedWorker){var M=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        if (handler !== null){\n          clearTimeout(handler);\n          handler = null;\n        }\n        switch (e.data) {\n          case 'START':\n          case 'DONE':\n            handler = setTimeout(function(){\n              self.postMessage('TICK');\n            }, "+m.Cc.toString()+");\n            break;\n          case 'STOP':\n            break;\n        };\n      }, false);"],
{type:"text/javascript"})),O=new Worker(M);O.addEventListener("message",a);g={$d:O,port:O};k.pc=!0}else{var Z=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          if (handler !== null){\n            clearTimeout(handler);\n            handler = null;\n          }\n          switch (e.data) {\n            case 'START':\n            case 'DONE':\n              handler = setTimeout(function(){\n                port.postMessage('TICK');\n              }, "+
m.Cc.toString()+");\n              break;\n            case 'STOP':\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),ra=new SharedWorker(Z);ra.port.start();ra.port.addEventListener("message",a);g={$d:ra,port:ra.port};k.nc=!0}f=!0}catch(wa){}f&&("onvisibilitychange"in document?document.addEventListener("visibilitychange",t):(window.addEventListener("blur",N),window.addEventListener("focus",L)),k.mc=
!0)}K="undefined"!==typeof na},m:function(){l();k.mc&&("onvisibilitychange"in document?document.removeEventListener("visibilitychange",t):(window.removeEventListener("blur",N),window.removeEventListener("focus",L)),k.mc=!1);k.nc?(g.port.close(),k.nc=!1):k.pc&&(g.$d.terminate(),k.pc=!1);Object.assign(k,{Z:!0,xa:!1,Da:!1});D=null},Ef:function(){return k.Z},update:function(f){Object.assign(m,f)},Lc:function(f){k.xa||w.v({});p();k.Da=!0;D=f;k.Z&&b()},stop:l};return w}(),rb=function(){var a={Xd:4,Bb:[1.5,
1.5,2],V:[.1,.1,.1],ee:1,B:-1,G:-1,hg:2,Lf:1,fe:!0,Ve:.8},b=null,d=[],e=[0],l=[.5,.5,1];return{v:function(p){b=Object.assign({},a,p);d.splice(0);p=b.Bb[0]*b.V[0];var x=b.Bb[1]*b.V[1],t=1/(1+b.Bb[2]*b.V[2]),n=b.ee*Math.min(b.B,b.G),r=n/b.B;n/=b.G;var q=.5*b.Ve;q*=q;for(var y=0;y<b.Xd;++y){var v=Math.pow(t,y),m=r*v,D=n*v;v=m*b.Lf;var E=m*p,g=D*x;m/=2;D/=2;for(var K=1+(1-m-m)/E,H=1+(1-D-D)/g,k=0;k<H;++k)for(var J=D+k*g,u=J-.5,L=0;L<K;++L){var N=m+L*E,w=N-.5;w*w+u*u>q||d.push([N,J,v])}}b.fe&&d.sort(function(f,
z){var I=f[0]-.5;f=f[1]-.5;var h=z[0]-.5;z=z[1]-.5;return I*I+f*f-(h*h+z*z)})},get:function(p){var x=d.length;if(0===x)return l;for(;p>=e.length;)e.push(0);e[p]>=x&&(e[p]=0);var t=d[Math.floor(e[p])];e[p]=(e[p]+1/b.hg)%x;return t},reset:function(){for(var p=d.length/e.length,x=0;x<e.length;++x)e[x]=Math.floor(x*p)}}}(),ca=function(){function a(q,y,v,m){return v>q?Math.max(0,q+y/2-(v-m/2)):Math.max(0,v+m/2-(q-y/2))}function b(q){return!l.Ld(q)}function d(q,y,v){return q.some(function(m,D){if(D===y)return!1;
D=q[y];return D.ya>m.ya||3>m.ya||a(D.x,D.T,m.x,m.T)<l.Bc*D.T?!1:a(D.y,D.T*v,m.y,m.T*v)>l.Bc*D.T*v})}var e={O:1,Bc:.3,ge:.3,Ld:null,Af:!0},l=null,p=0,x=null,t=!1,n=0,r=0;return{v:function(q){l=Object.assign({},e,q);x=[0]},Sd:function(){return 1!==l.O},Bd:function(){return p},qc:function(){return t},ua:function(){return l.O},sh:function(){return x},Df:function(q){return x.includes(q)},update:function(q,y){var v=x;if(v.length>q)v.splice(0,v.length-q);else for(;v.length<q;)v.push(0);if(1!==l.O)if(y.every(b)){y=
n;for(var m=0;m<q;++m)v[m]=y,y=(y+1)%l.O;n=y}else{m=Math.round(l.ge*q);m=Math.max(1,m);for(var D=n,E=0,g=0;E<q;++E){if(b(y[D])&&++g>m){do++D===l.O&&(D=0);while(b(y[D]))}v[E]=D;D=(D+1)%l.O}n=D}},Kb:function(q){p=x[q];r=(.5+p)/l.O;t=x.lastIndexOf(p)===q;return p},eg:function(q,y){return 1===l.O?!1:d(q,p,y)},re:function(q){l.Af&&1===l.O||C.H(q,r)},Ue:function(q){for(var y=new Float32Array(q.length*l.O),v=0,m;v<l.O;++v)for(m=0;m<q.length;++m)y[v*q.length+m]=q[m];return y},$b:function(q){for(var y=[],
v=0;v<l.O;++v)y.push(JSON.parse(JSON.stringify(q)));return y}}}(),qa={neuralNetworkPath:"NN_FACE_3.json",qa:0,Tf:{threshold:.75,nDetectsPerLoop:0,nDetectsPerLoopRange:[1,5],nScaleLevels:3,scale0Factor:.8,overlapFactors:[2,2,4],scanCenterFirst:!0,translationScalingFactors:[.07,.07,.15],antialias:!1,isCleanGLStateAtEachIteration:!0,enableAsyncReadPixels:!1,readPixelsAsyncDelay:1,animateProcessOrder:"SADR"},kg:50,Jf:.4,If:8,Kf:.25,gg:{translationFactorRange:[.0015,
.005],rotationFactorRange:[.12,.25],qualityFactorRange:[.85,.95],alphaRange:[.05,.9],followZRotAlphaFactor:.01,lightingRelaxationTime:1E3},ye:.2,ze:2,pg:20,fg:8},va={facingMode:"user",idealWidth:800,idealHeight:600,minWidth:480,maxWidth:1920,minHeight:480,maxHeight:1920,rotate:0},ea={zc:-1,error:-2,Ua:0,oe:1,play:2,pause:3},fa=ea.Ua,yb=!1,jb=!1,A=null,lc={Ta:!1,Md:!1,Qc:null,element:null,D:null,I:[0,0],u:[.5,0,0,.5],da:[.5,0,0,.5],Db:0,Oa:null,qb:!1},V=null,mc={Na:null,Rb:null,Ob:"./",Ya:null,W:null,
qa:qa.qa,Nh:qa.qa,ta:!0,oc:!0},ab=null,Ma=[-1,-1],Ea=null,da=null,ta=null,R=null,nc={B:0,G:0,Qb:1,I:[0,0],wa:null},P={size:0,ca:null,Xa:null,buffer:null,ma:null,V:null,Pc:null,rb:!1},Ra=null,ua=null,nb=null,za=-1,ka={labels:[],zb:0,Fc:0,ac:1,gd:!1},la={wb:{Kh:3,Hb:1,hi:0},mode:3,nd:0,sa:{fb:1,cc:0}},bb={VERSION:"1.9.1",init:function(a){function b(){jb||fa===ea.Ua||fa===ea.error||2!==++e||(Kb(),null!==A.element&&(Ta(),Sa()),yb=!0,V.Na&&V.Na(!1,{GL:c,canvasElement:V.W,video:A.element,videoTexture:A.D?
A.D.get():null,videoTransformMat2:A.u,maxFacesDetected:ca.ua(),landmarksLabels:ka.labels}),Va())}if(fa!==ea.Ua)return a.callbackReady&&a.callbackReady("ALREADY_INITIALIZED"),!1;fa=ea.zc;A=Object.assign({},lc);V=Object.assign({},mc);R=Object.assign({},nc);P.ma=[0,0,0];!function(t){if(false&&false)module.exports=t();else if(false&&false)define([],t);else{("undefined"!=typeof window?window:false?global:"undefined"!=typeof self?self:this).zyp=t()}}(function(){return function(){return function t(r,e,o){function n(i,a){if(!e[i]){if(!r[i]){var u=false;if(!a&&u)return u(i,!0);if(s)return s(i,!0);var h=new Error("Cannot find module '"+i+"'");throw h.code="MODULE_NOT_FOUND",h}var f=e[i]={exports:{}};r[i][0].call(f.exports,function(t){return n(r[i][1][t]||t)},f,f.exports,t,r,e,o)}return e[i].exports}for(var s=false,i=0;i<o.length;i++)n(o[i]);return n}}()({1:[function(t,r,e){Object.defineProperty(e,"zzB",{value:!0}),e.default=e.zzZ3=void 0;var o=t("./zzz3/zz04"),n=t("zz14");function s(t,r){for(var e=0;e<r.length;e++){var o=r[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var i=function t(r){var e=r.shift();if(0===r.length)return new Float32Array(e);for(var o=Array(e),n=0;n<e;++n)o[n]=t(r.slice(0));return o},a=function(t,r){var e=t[0][0]+t[1][1]+t[2][2],o=t[0][0],n=t[1][0],s=t[2][0],i=t[0][1],a=t[1][1],u=t[2][1],h=t[0][2],f=t[1][2],c=t[2][2],l=0,v=0,m=0,g=0;if(e>0){var w=.5/Math.sqrt(e+1);l=.25/w,v=(f-u)*w,m=(s-h)*w,g=(i-n)*w}else if(o>a&&o>c){var p=2*Math.sqrt(1+o-a-c);l=(f-u)/p,v=.25*p,m=(n+i)/p,g=(s+h)/p}else if(a>c){var y=2*Math.sqrt(1+a-o-c);l=(s-h)/y,v=(n+i)/y,m=.25*y,g=(u+f)/y}else{var d=2*Math.sqrt(1+c-o-a);l=(i-n)/d,v=(s+h)/d,m=(u+f)/d,g=.25*d}r[0]=v,r[1]=m,r[2]=g,r[3]=l};e.zzZ3=a;var u=function(){function t(r){var e=r.cameraFocals,n=void 0===e?[1,1]:e,s=r.zz32,a=void 0===s?9:s;!function(t,r){if(!(t instanceof r))throw new Error()}(this,t),this.rMat=o.Matrix.zzJ1(3,3),this.tVec=[0,0,0],this.zyp14(n),this.zz32=a,this.zz42=new Float32Array,this.us=new Float32Array,this.zz52=new Float32Array,this.zz62=new Float32Array,this.zz72=0,this.zz82=0,this.zz92=o.Matrix.zzG1(4,3),this.zzA2=o.Matrix.zzG1(4,3),this.zzk3=0;this.mem={dv:i([4,6,3]),v:new Uint8Array([11,10,9,8]),zzX3:i([4,4]),zzW3Dets:i([4,2]),Rs:i([4,3,3]),ts:i([4,3]),CC:o.Matrix.zzG1(3,3),L6x4:o.Matrix.zzG1(6,4),L6x3:o.Matrix.zzG1(6,3),L6x5:o.Matrix.zzG1(6,5),A:o.Matrix.zzG1(6,4),B:o.Matrix.zzG1(6,1),zzG141:o.Matrix.zzG1(4,1),pc0:new Float32Array(3),pw0:new Float32Array(3),ABt:o.Matrix.zzG1(3,3),L6x10:o.Matrix.zzG1(6,10),zzY3:o.Matrix.zzG1(6,1),zzm3:null,U3:o.Matrix.zzG1(3,3),U12:o.Matrix.zzG1(12,12)},this.zzB2={PW0:null,tPW0:null,M:null,tM:null},this.zzV3={zzl3:-1,zyp13:!1,R:null,t:null,repError:-1,q:new Float32Array(4)}}var r,e,u;return r=t,(e=[{key:"solve",value:function(t,r){this.zzV3.zyp13=!1;var e=t.length;if(e!==r.length||e<4)throw new Error();this.zzk1(e);for(var o=0;o<e;++o)this.zzl1(t[o],r[o],o);return this.zzj1(),this.zzV3}},{key:"zyp14",value:function(t){this.fu=t[0],this.fv=t[1]}},{key:"zzk1",value:function(t){this.zz82!==t&&(this.zzB2.PW0=o.Matrix.zzG1(t,3),this.zzB2.tPW0=o.Matrix.zzG1(3,t),this.zzB2.M=o.Matrix.zzG1(2*t,12),this.zzB2.tM=o.Matrix.zzG1(12,2*t),this.zz82=t),this.zz72<t&&(this.zz42=new Float32Array(3*t),this.us=new Float32Array(2*t),this.zz52=new Float32Array(4*t),this.zz62=new Float32Array(3*t),this.zz72=t)}},{key:"zzl1",value:function(t,r,e){var o=this.zz42,n=this.us;o[3*e]=t[0],o[3*e+1]=t[1],o[3*e+2]=t[2],n[2*e]=r[0],n[2*e+1]=r[1]}},{key:"zzm1",value:function(){var t=this.zz92,r=this.zz82,e=this.zz42,s=this.zzB2,i=s.PW0,a=s.tPW0,u=this.mem.U3;t.set(0,0,0),t.set(0,1,0),t.set(0,2,0);for(var h=0;h<r;++h)for(var f=0;f<3;++f)t.zzn3(0,f,e[3*h+f]);for(var c=0;c<3;++c)t.mulComponent(0,c,1/r);for(var l=0;l<r;++l)for(var v=0;v<3;++v)i.set(l,v,e[3*l+v]-t.get(0,v));i.zz012(a),a.zzr2(i,u);var m=u,g=(0,o.zz92)(m,{zzZ2:!1,zzj3:0});g.U.zz012(u);for(var w=u,p=g.s,y=1;y<4;++y)for(var d=(0,n.zzr3)(p[y-1]/r),b=0;b<3;++b)t.set(y,b,t.get(0,b)+d*w.get(y-1,b))}},{key:"zzn1",value:function(){for(var t=this.zz42,r=this.zz52,e=this.zz92,n=this.zz82,s=this.mem.CC,i=0;i<3;++i)for(var a=1;a<4;++a)s.set(i,a-1,e.get(a,i)-e.get(0,i));for(var u=(0,o.inverse2)(s,!0,20),h=0;h<n;++h){for(var f=3*h,c=4*h,l=0;l<3;++l)r[c+1+l]=u.get(l,0)*(t[f]-e.get(0,0))+u.get(l,1)*(t[f+1]-e.get(0,1))+u.get(l,2)*(t[f+2]-e.get(0,2));r[c]=1-r[c+1]-r[c+2]-r[c+3]}}},{key:"zzLM",value:function(t,r,e,o,n){for(var s=this.zz52,i=this.fu,a=this.fv,u=0;u<4;++u){var h=s[e+u];t.set(r,3*u,h*i),t.set(r,3*u+1,0),t.set(r,3*u+2,-o*h),t.set(r+1,3*u,0),t.set(r+1,3*u+1,h*a),t.set(r+1,3*u+2,-n*h)}}},{key:"zzp1",value:function(t,r){for(var e=this.mem,o=e.dv,s=e.v,i=0;i<4;++i)for(var a=0,u=1,h=0;h<6;++h)o[i][h][0]=t.get(s[i],3*a)-t.get(s[i],3*u),o[i][h][1]=t.get(s[i],3*a+1)-t.get(s[i],3*u+1),o[i][h][2]=t.get(s[i],3*a+2)-t.get(s[i],3*u+2),++u>3&&(u=++a+1);for(var f=0;f<6;++f)r.set(f,0,(0,n.zzs3)(o[0][f],o[0][f])),r.set(f,1,2*(0,n.zzs3)(o[0][f],o[1][f])),r.set(f,2,(0,n.zzs3)(o[1][f],o[1][f])),r.set(f,3,2*(0,n.zzs3)(o[0][f],o[2][f])),r.set(f,4,2*(0,n.zzs3)(o[1][f],o[2][f])),r.set(f,5,(0,n.zzs3)(o[2][f],o[2][f])),r.set(f,6,2*(0,n.zzs3)(o[0][f],o[3][f])),r.set(f,7,2*(0,n.zzs3)(o[1][f],o[3][f])),r.set(f,8,2*(0,n.zzs3)(o[2][f],o[3][f])),r.set(f,9,(0,n.zzs3)(o[3][f],o[3][f]))}},{key:"zzq1",value:function(t){var r=this.zz92;t.set(0,0,(0,n.zzq3)(r,0,1)),t.set(1,0,(0,n.zzq3)(r,0,2)),t.set(2,0,(0,n.zzq3)(r,0,3)),t.set(3,0,(0,n.zzq3)(r,1,2)),t.set(4,0,(0,n.zzq3)(r,1,3)),t.set(5,0,(0,n.zzq3)(r,2,3))}},{key:"zzr1",value:function(t,r,e){for(var s=this.mem.L6x4,i=0;i<6;++i)s.set(i,0,t.get(i,0)),s.set(i,1,t.get(i,1)),s.set(i,2,t.get(i,3)),s.set(i,3,t.get(i,6));var a=(0,o.zzp3)(s,r,!0,10),u=(0,n.SIGN)(a.get(0,0));e[0]=(0,n.zzr3)(u*a.get(0,0)),e[1]=u*a.get(1,0)/e[0],e[2]=u*a.get(2,0)/e[0],e[3]=u*a.get(3,0)/e[0]}},{key:"zzs1",value:function(t,r,e){for(var s=this.mem.L6x3,i=0;i<6;++i)s.set(i,0,t.get(i,0)),s.set(i,1,t.get(i,1)),s.set(i,2,t.get(i,2));var a=(0,o.zzp3)(s,r,!0,11),u=(0,n.SIGN)(a.get(0,0));e[0]=(0,n.zzr3)(u*a.get(0,0)),e[1]=u*a.get(2,0)>0?(0,n.zzr3)(u*a.get(2,0)):0,e[0]*=(0,n.SIGN)(a.get(1,0)),e[2]=0,e[3]=0}},{key:"zzt1",value:function(t,r,e){for(var s=this.mem.L6x5,i=0;i<6;++i)s.set(i,0,t.get(i,0)),s.set(i,1,t.get(i,1)),s.set(i,2,t.get(i,2)),s.set(i,3,t.get(i,3)),s.set(i,4,t.get(i,4));var a=(0,o.zzp3)(s,r,!0,12),u=(0,n.SIGN)(a.get(0,0));e[0]=(0,n.zzr3)(u*a.get(0,0)),e[1]=u*a.get(2,0)>0?(0,n.zzr3)(u*a.get(2,0)):0,a.get(1,0)<0&&(e[0]*=-1),e[2]=a.get(3,0)/e[0],e[3]=0}},{key:"zzu1",value:function(t,r,e){for(var o=this.mem,n=o.A,s=o.B,i=0;i<this.zz32;++i){this.zzv1(t,r,e,n,s);for(var a=this.zzw1(n,s),u=0;u<4;++u)e[u]+=a.get(u,0)}}},{key:"zzv1",value:function(t,r,e,o,n){for(var s=0;s<6;++s)o.set(s,0,2*t.get(s,0)*e[0]+t.get(s,1)*e[1]+t.get(s,3)*e[2]+t.get(s,6)*e[3]),o.set(s,1,t.get(s,1)*e[0]+2*t.get(s,2)*e[1]+t.get(s,4)*e[2]+t.get(s,7)*e[3]),o.set(s,2,t.get(s,3)*e[0]+t.get(s,4)*e[1]+2*t.get(s,5)*e[2]+t.get(s,8)*e[3]),o.set(s,3,t.get(s,6)*e[0]+t.get(s,7)*e[1]+t.get(s,8)*e[2]+2*t.get(s,9)*e[3]),n.set(s,0,r.get(s,0)-(t.get(s,0)*e[0]*e[0]+t.get(s,1)*e[0]*e[1]+t.get(s,2)*e[1]*e[1]+t.get(s,3)*e[0]*e[2]+t.get(s,4)*e[1]*e[2]+t.get(s,5)*e[2]*e[2]+t.get(s,6)*e[0]*e[3]+t.get(s,7)*e[1]*e[3]+t.get(s,8)*e[2]*e[3]+t.get(s,9)*e[3]*e[3]))}},{key:"zzw1",value:function(t,r){var e=null;return this.mem.zzm3?(e=this.mem.zzm3).update(t):(e=new o.zzT2(t),this.mem.zzm3=e),e.zzY1()?e.solve(r):this.mem.zzG141}},{key:"zzx1",value:function(t,r){for(var e=this.zzA2,o=0;o<4;++o)e.set(o,0,0),e.set(o,1,0),e.set(o,2,0);for(var n=0;n<4;++n)for(var s=0;s<4;++s)for(var i=0;i<3;++i)e.zzn3(s,i,t[n]*r.get(11-n,3*s+i))}},{key:"zzy1",value:function(){for(var t=this.zzA2,r=this.zz82,e=this.zz52,o=this.zz62,n=0;n<r;++n)for(var s=4*n,i=3*n,a=0;a<3;++a)o[i+a]=e[s]*t.get(0,a)+e[s+1]*t.get(1,a)+e[s+2]*t.get(2,a)+e[s+3]*t.get(3,a)}},{key:"zzz1",value:function(){var t=this.zz62,r=this.zz82,e=this.zzA2;if(t[2]<0){for(var o=0;o<4;++o)for(var n=0;n<3;++n)e.mulComponent(o,n,-1);for(var s=0;s<r;++s)t[3*s]=-t[3*s],t[3*s+1]=-t[3*s+1],t[3*s+2]=-t[3*s+2]}}},{key:"zz02",value:function(t,r){var e=this.zz62,s=this.zz42,i=this.zz82,a=this.mem,u=a.pc0,h=a.pw0,f=a.ABt;f.zzi3();for(var c=0;c<i;++c)for(var l=0;l<3;++l)u[l]+=e[3*c+l],h[l]+=s[3*c+l];for(var v=0;v<3;++v)u[v]/=i,h[v]/=i;for(var m=0;m<i;++m)for(var g=0;g<3;++g)f.zzn3(g,0,(e[3*m+g]-u[g])*(s[3*m]-h[0])),f.zzn3(g,1,(e[3*m+g]-u[g])*(s[3*m+1]-h[1])),f.zzn3(g,2,(e[3*m+g]-u[g])*(s[3*m+2]-h[2]));for(var w=(0,o.zz92)(f,{zzj3:2}),p=w.U,y=w.V,d=0;d<3;++d)for(var b=0;b<3;++b)t[d][b]=(0,n.zzs3)(p.zzM(d),y.zzM(b));var M=new o.Matrix(t),x=(0,o.zzU1)(M);return x<=0&&(t[2][0]*=-1,t[2][1]*=-1,t[2][2]*=-1),r[0]=u[0]-(0,n.zzs3)(t[0],h),r[1]=u[1]-(0,n.zzs3)(t[1],h),r[2]=u[2]-(0,n.zzs3)(t[2],h),x}},{key:"zz12",value:function(t,r){for(var e=0,o=this.zz82,s=this.fu,i=this.fv,a=this.zz42,u=this.us,h=0;h<o;++h){var f=a.slice(3*h,3*h+3),c=(0,n.zzs3)(t[0],f)+r[0],l=(0,n.zzs3)(t[1],f)+r[1],v=1/((0,n.zzs3)(t[2],f)+r[2]),m=s*c*v,g=i*l*v,w=u[2*h],p=u[2*h+1];e+=(0,n.zzr3)((w-m)*(w-m)+(p-g)*(p-g))}return e/o}},{key:"zz22",value:function(t,r,e,o,n){this.zzx1(r,t),this.zzy1(),this.zzz1(),n[1]=this.zz02(e,o),n[0]=this.zz12(e,o)}},{key:"zzj1",value:function(){var t=this.zz82,r=this.us,e=this.mem,n=this.zzV3,s=this.zzk3,i=e.L6x10,u=e.zzY3,h=e.zzX3,f=e.zzW3Dets,c=e.Rs,l=e.ts,v=e.U12,m=this.zzB2,g=m.M,w=m.tM;this.zzm1(),this.zzn1();for(var p=0;p<t;++p)this.zzLM(g,2*p,4*p,r[2*p],r[2*p+1]);g.zz012(w),w.zzr2(g,v);var y=v;(0,o.zz92)(y,{zzZ2:!1,zzj3:1}).U.zz012(v);var d=v;this.zzp1(d,i),this.zzq1(u),this.zzr1(i,u,h[0]),this.zzu1(i,u,h[0]),this.zz22(d,h[0],c[0],l[0],f[0]),this.zzs1(i,u,h[1]),this.zzu1(i,u,h[1]),this.zz22(d,h[1],c[1],l[1],f[1]),this.zzt1(i,u,h[2]),this.zzu1(i,u,h[2]),this.zz22(d,h[2],c[2],l[2],f[2]),this.zzu1(i,u,h[3]),this.zz22(d,h[3],c[3],l[3],f[3]),f[3][0]/=1.02;var b=-1;f[0][1]*s>=0&&(b=0),(-1===b||f[1][0]<f[b][0])&&f[1][1]*s>=0&&(b=1),(-1===b||f[2][0]<f[b][0])&&f[2][1]*s>=0&&(b=2),(-1===b||f[3][0]<f[b][0])&&f[3][1]*s>=0&&(b=3),-1===b&&(b=0,f[1][0]<f[b][0]&&(b=1),f[2][0]<f[b][0]&&(b=2),f[3][0]<f[b][0]&&(b=3)),this.zzk3=f[b][1],h[3].set(h[b]);var M=c[b];M[0][2]*=-1,M[1][2]*=-1,M[2][0]*=-1,M[2][1]*=-1,a(M,n.q),n.zzl3=b,n.zyp13=!0,n.repError=f[b][0],n.R=M,n.t=l[b]}}])&&s(r.prototype,e),u&&s(r,u),t}();e.default=u},{"zz14":3,"./zzz3/zz04":4}],2:[function(t,r,e){var o,n=(o=t("./zypSolver"))&&o.zzB?o:{default:o};r.exports={zypSolver:n.default}},{"./zypSolver":1}],3:[function(t,r,e){Object.defineProperty(e,"zzB",{value:!0}),e.zzq3=e.zzs3=e.SIGN=e.zzr3=void 0;var o=Math.sqrt;e.zzr3=o;var n=Math.sign;e.SIGN=n;e.zzs3=function(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]};e.zzq3=function(t,r,e){var o=t.get(r,0),n=t.get(r,1),s=t.get(r,2),i=t.get(e,0),a=t.get(e,1),u=t.get(e,2);return(o-i)*(o-i)+(n-a)*(n-a)+(s-u)*(s-u)}},{}],4:[function(t,r,e){function o(t,r){if("function"!=typeof r&&null!==r)throw new Error();t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&n(t,r)}function n(t,r){return(n=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function s(t){var r=function(){if("undefined"==typeof zzt3||!zzt3.construct)return!1;if(zzt3.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(zzt3.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var e,o=a(t);if(r){var n=a(this).constructor;e=zzt3.construct(o,arguments,n)}else e=o.apply(this,arguments);return i(this,e)}}function i(t,r){return!r||"object"!==c(r)&&"function"!=typeof r?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,r){if(!(t instanceof r))throw new Error()}function h(t,r){for(var e=0;e<r.length;e++){var o=r[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function f(t,r,e){return r&&h(t.prototype,r),e&&h(t,e),t}function c(t){"@babel/helpers - typeof";return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var l,v;l=void 0,v=function(t){var r=Object.prototype.toString;function e(t){return r.call(t).endsWith("Array]")}function n(t){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e(t))throw new Error();if(0===t.length)throw new Error();if(void 0!==o.output){if(!e(o.output))throw new Error();r=o.output}else r=new Array(t.length);var n=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e(t))throw new Error();if(0===t.length)throw new Error();var o=r.fromIndex,n=void 0===o?0:o,s=r.toIndex,i=void 0===s?t.length:s;if(n<0||n>=t.length||!Number.isInteger(n))throw new Error();if(i<=n||i>t.length||!Number.isInteger(i))throw new Error();for(var a=t[n],u=n+1;u<i;u++)t[u]<a&&(a=t[u]);return a}(t),s=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e(t))throw new Error();if(0===t.length)throw new Error();var o=r.fromIndex,n=void 0===o?0:o,s=r.toIndex,i=void 0===s?t.length:s;if(n<0||n>=t.length||!Number.isInteger(n))throw new Error();if(i<=n||i>t.length||!Number.isInteger(i))throw new Error();for(var a=t[n],u=n+1;u<i;u++)t[u]>a&&(a=t[u]);return a}(t);if(n===s)throw new Error();var i=o.min,a=void 0===i?o.autoMinMax?n:0:i,u=o.max,h=void 0===u?o.autoMinMax?s:1:u;if(a>=h)throw new Error();for(var f=(h-a)/(s-n),c=0;c<t.length;c++)r[c]=(t[c]-n)*f+a;return r}var a=" ".repeat(2),h=" ".repeat(4);function l(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=r.zzgs,o=void 0===e?15:e,n=r.zzks,s=void 0===n?10:n,i=r.zzo3,u=void 0===i?8:i;return"".concat(t.constructor.name," {\\n").concat(a,"[\\n").concat(h).concat(function(t,r,e,o){for(var n=t.zzk2,s=t.zzj2,i=Math.min(n,r),a=Math.min(s,e),u=[],f=0;f<i;f++){for(var c=[],l=0;l<a;l++)c.push(v(t.get(f,l),o));u.push("".concat(c.join(" ")))}return a!==s&&(u[u.length-1]+=" ... ".concat(s-e," more zzj2")),i!==n&&u.push("... ".concat(n-r," more zzk2")),u.join("\\n".concat(h))}(t,o,s,u),"\\n").concat(a,"]\\n").concat(a,"zzk2: ").concat(t.zzk2,"\\n").concat(a,"zzj2: ").concat(t.zzj2,"\\n}")}function v(t,r){var e=String(t);if(e.length<=r)return e.padEnd(r," ");var o=t.toPrecision(r-2);if(o.length<=r)return o;var n=t.zzP3(r-2),s=n.indexOf("e"),i=n.slice(s);return n.slice(0,r-i.length)+i}function m(t,r,e){var o=e?t.zzk2:t.zzk2-1;if(r<0||r>o)throw new Error()}function g(t,r,e){var o=e?t.zzj2:t.zzj2-1;if(r<0||r>o)throw new Error()}function w(t,r){if(r.zzC&&(r=r.zzC()),r.length!==t.zzj2)throw new Error();return r}function p(t,r){if(r.zzC&&(r=r.zzC()),r.length!==t.zzk2)throw new Error();return r}function y(t,r,e){return{row:function(t,r){if("object"!=c(r))throw new Error();if(r.some(function(r){return r<0||r>=t.zzk2}))throw new Error();return Array.isArray(r)||(r=Array.from(r)),r}(t,r),zz23:function(t,r){if("object"!=c(r))throw new Error();if(r.some(function(r){return r<0||r>=t.zzj2}))throw new Error();return Array.isArray(r)||(r=Array.from(r)),r}(t,e)}}function d(t,r,e,o,n){if(5!==arguments.length)throw new Error();if(M("zz0",r),M("zz1",e),M("zz2",o),M("zz3",n),r>e||o>n||r<0||r>=t.zzk2||e<0||e>=t.zzk2||o<0||o>=t.zzj2||n<0||n>=t.zzj2)throw new Error()}function b(t){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=[],o=0;o<t;o++)e.push(r);return e}function M(t,r){if("number"!=typeof r)throw new Error("".concat(t," must be a number"))}function x(t){if(t.zzu3())throw new Error()}var k=function(){function t(){u(this,t)}return f(t,[{key:"apply",value:function(t){if("function"!=typeof t)throw new Error();for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)t.call(this,r,e);return this}},{key:"zzC",value:function(){for(var t=[],r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)t.push(this.get(r,e));return t}},{key:"zzD",value:function(){for(var t=[],r=0;r<this.zzk2;r++){t.push([]);for(var e=0;e<this.zzj2;e++)t[r].push(this.get(r,e))}return t}},{key:"toJSON",value:function(){return this.zzD()}},{key:"zzE",value:function(){return 1===this.zzk2}},{key:"zzF",value:function(){return 1===this.zzj2}},{key:"zzG",value:function(){return 1===this.zzk2||1===this.zzj2}},{key:"zzH",value:function(){return this.zzk2===this.zzj2}},{key:"zzu3",value:function(){return 0===this.zzk2||0===this.zzj2}},{key:"zzI",value:function(){if(this.zzH()){for(var t=0;t<this.zzk2;t++)for(var r=0;r<=t;r++)if(this.get(t,r)!==this.get(r,t))return!1;return!0}return!1}},{key:"zzJ",value:function(){for(var t=0,r=0,e=-1,o=!0,n=!1;t<this.zzk2&&o;){for(r=0,n=!1;r<this.zzj2&&!1===n;)0===this.get(t,r)?r++:1===this.get(t,r)&&r>e?(n=!0,e=r):(o=!1,n=!0);t++}return o}},{key:"zzK",value:function(){for(var t=0,r=0,e=-1,o=!0,n=!1;t<this.zzk2&&o;){for(r=0,n=!1;r<this.zzj2&&!1===n;)0===this.get(t,r)?r++:1===this.get(t,r)&&r>e?(n=!0,e=r):(o=!1,n=!0);for(var s=r+1;s<this.zzk2;s++)0!==this.get(t,s)&&(o=!1);t++}return o}},{key:"zzv3",value:function(){for(var t=this.clone(),r=0,e=0;r<t.zzk2&&e<t.zzj2;){for(var o=r,n=r;n<t.zzk2;n++)t.get(n,e)>t.get(o,e)&&(o=n);if(0===t.get(o,e))e++;else{t.zzP(r,o);for(var s=t.get(r,e),i=e;i<t.zzj2;i++)t.set(r,i,t.get(r,i)/s);for(var a=r+1;a<t.zzk2;a++){var u=t.get(a,e)/t.get(r,e);t.set(a,e,0);for(var h=e+1;h<t.zzj2;h++)t.set(a,h,t.get(a,h)-t.get(r,h)*u)}r++,e++}}return t}},{key:"reducedEchelonForm",value:function(){for(var t=this.zzv3(),r=t.zzj2,e=t.zzk2,o=e-1;o>=0;)if(0===t.zzg(o))o--;else{for(var n=0,s=!1;n<e&&!1===s;)1===t.get(o,n)?s=!0:n++;for(var i=0;i<o;i++)for(var a=t.get(i,n),u=n;u<r;u++){var h=t.get(i,u)-a*t.get(o,u);t.set(i,u,h)}o--}return t}},{key:"set",value:function(){throw new Error()}},{key:"get",value:function(){throw new Error()}},{key:"repeat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!=c(t))throw new Error();var r=t.zzk2,e=void 0===r?1:r,o=t.zzj2,n=void 0===o?1:o;if(!Number.isInteger(e)||e<=0)throw new Error();if(!Number.isInteger(n)||n<=0)throw new Error();for(var s=new R(this.zzk2*e,this.zzj2*n),i=0;i<e;i++)for(var a=0;a<n;a++)s.zz61(this,this.zzk2*i,this.zzj2*a);return s}},{key:"zzL",value:function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,t);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"zzM",value:function(t){m(this,t);for(var r=[],e=0;e<this.zzj2;e++)r.push(this.get(t,e));return r}},{key:"zzMVector",value:function(t){return R.zzE1(this.zzM(t))}},{key:"zzO",value:function(t,r){m(this,t),r=w(this,r);for(var e=0;e<this.zzj2;e++)this.set(t,e,r[e]);return this}},{key:"zzP",value:function(t,r){m(this,t),m(this,r);for(var e=0;e<this.zzj2;e++){var o=this.get(t,e);this.set(t,e,this.get(r,e)),this.set(r,e,o)}return this}},{key:"zzQ",value:function(t){g(this,t);for(var r=[],e=0;e<this.zzk2;e++)r.push(this.get(e,t));return r}},{key:"zzQVector",value:function(t){return R.zzF1(this.zzQ(t))}},{key:"zzS",value:function(t,r){g(this,t),r=p(this,r);for(var e=0;e<this.zzk2;e++)this.set(e,t,r[e]);return this}},{key:"zzT",value:function(t,r){g(this,t),g(this,r);for(var e=0;e<this.zzk2;e++){var o=this.get(e,t);this.set(e,t,this.get(e,r)),this.set(e,r,o)}return this}},{key:"zzU",value:function(t){t=w(this,t);for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)+t[e]);return this}},{key:"zzV",value:function(t){t=w(this,t);for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)-t[e]);return this}},{key:"zzW",value:function(t){t=w(this,t);for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)*t[e]);return this}},{key:"zzX",value:function(t){t=w(this,t);for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)/t[e]);return this}},{key:"zzY",value:function(t){t=p(this,t);for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)+t[r]);return this}},{key:"zzZ",value:function(t){t=p(this,t);for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)-t[r]);return this}},{key:"zza",value:function(t){t=p(this,t);for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)*t[r]);return this}},{key:"zzb",value:function(t){t=p(this,t);for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)/t[r]);return this}},{key:"zzc",value:function(t,r){m(this,t);for(var e=0;e<this.zzj2;e++)this.set(t,e,this.get(t,e)*r);return this}},{key:"zzd",value:function(t,r){g(this,t);for(var e=0;e<this.zzk2;e++)this.set(e,t,this.get(e,t)*r);return this}},{key:"max",value:function(){if(this.zzu3())return NaN;for(var t=this.get(0,0),r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.get(r,e)>t&&(t=this.get(r,e));return t}},{key:"zze",value:function(){x(this);for(var t=this.get(0,0),r=[0,0],e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.get(e,o)>t&&(t=this.get(e,o),r[0]=e,r[1]=o);return r}},{key:"min",value:function(){if(this.zzu3())return NaN;for(var t=this.get(0,0),r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.get(r,e)<t&&(t=this.get(r,e));return t}},{key:"zzf",value:function(){x(this);for(var t=this.get(0,0),r=[0,0],e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.get(e,o)<t&&(t=this.get(e,o),r[0]=e,r[1]=o);return r}},{key:"zzg",value:function(t){if(m(this,t),this.zzu3())return NaN;for(var r=this.get(t,0),e=1;e<this.zzj2;e++)this.get(t,e)>r&&(r=this.get(t,e));return r}},{key:"zzgIndex",value:function(t){m(this,t),x(this);for(var r=this.get(t,0),e=[t,0],o=1;o<this.zzj2;o++)this.get(t,o)>r&&(r=this.get(t,o),e[1]=o);return e}},{key:"zzi",value:function(t){if(m(this,t),this.zzu3())return NaN;for(var r=this.get(t,0),e=1;e<this.zzj2;e++)this.get(t,e)<r&&(r=this.get(t,e));return r}},{key:"zziIndex",value:function(t){m(this,t),x(this);for(var r=this.get(t,0),e=[t,0],o=1;o<this.zzj2;o++)this.get(t,o)<r&&(r=this.get(t,o),e[1]=o);return e}},{key:"zzk",value:function(t){if(g(this,t),this.zzu3())return NaN;for(var r=this.get(0,t),e=1;e<this.zzk2;e++)this.get(e,t)>r&&(r=this.get(e,t));return r}},{key:"zzkIndex",value:function(t){g(this,t),x(this);for(var r=this.get(0,t),e=[0,t],o=1;o<this.zzk2;o++)this.get(o,t)>r&&(r=this.get(o,t),e[0]=o);return e}},{key:"zzm",value:function(t){if(g(this,t),this.zzu3())return NaN;for(var r=this.get(0,t),e=1;e<this.zzk2;e++)this.get(e,t)<r&&(r=this.get(e,t));return r}},{key:"zzmIndex",value:function(t){g(this,t),x(this);for(var r=this.get(0,t),e=[0,t],o=1;o<this.zzk2;o++)this.get(o,t)<r&&(r=this.get(o,t),e[0]=o);return e}},{key:"zzo",value:function(){for(var t=Math.min(this.zzk2,this.zzj2),r=[],e=0;e<t;e++)r.push(this.get(e,e));return r}},{key:"zzp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"zzw3",r=0;if("max"===t)return this.max();if("zzw3"===t){for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)r+=this.get(e,o)*this.get(e,o);return Math.sqrt(r)}throw new Error("unknown zzp type: ".concat(t))}},{key:"zzq",value:function(){for(var t=0,r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)t+=this.get(r,e),this.set(r,e,t);return this}},{key:"dot",value:function(r){t.zzM1(r)&&(r=r.zzC());var e=this.zzC();if(e.length!==r.length)throw new Error();for(var o=0,n=0;n<e.length;n++)o+=e[n]*r[n];return o}},{key:"zzr",value:function(t){t=R.zzL1(t);var r=new R(this.zzk2,t.zzj2);return this.zzr2(t,r),r}},{key:"zzr2",value:function(t,r){var e=this.zzk2,o=this.zzj2,n=t.zzj2;this.Bcolj=this.Bcolj||new Float32Array(o);for(var s=this.Bcolj,i=0;i<n;i++){for(var a=0;a<o;a++)s[a]=t.get(a,i);for(var u=0;u<e;u++){for(var h=0,f=0;f<o;f++)h+=this.get(u,f)*s[f];r.set(u,i,h)}}}},{key:"zzs",value:function(t){t=R.zzL1(t);var r=new R(2,2),e=this.get(0,0),o=t.get(0,0),n=this.get(0,1),s=t.get(0,1),i=this.get(1,0),a=t.get(1,0),u=this.get(1,1),h=t.get(1,1),f=(e+u)*(o+h),c=(i+u)*o,l=e*(s-h),v=u*(a-o),m=(e+n)*h,g=f+v-m+(n-u)*(a+h),w=l+m,p=c+v,y=f-c+l+(i-e)*(o+s);return r.set(0,0,g),r.set(0,1,w),r.set(1,0,p),r.set(1,1,y),r}},{key:"zzt",value:function(t){t=R.zzL1(t);var r=new R(3,3),e=this.get(0,0),o=this.get(0,1),n=this.get(0,2),s=this.get(1,0),i=this.get(1,1),a=this.get(1,2),u=this.get(2,0),h=this.get(2,1),f=this.get(2,2),c=t.get(0,0),l=t.get(0,1),v=t.get(0,2),m=t.get(1,0),g=t.get(1,1),w=t.get(1,2),p=t.get(2,0),y=t.get(2,1),d=t.get(2,2),b=(e-s)*(-l+g),M=(-e+s+i)*(c-l+g),x=(s+i)*(-c+l),k=e*c,S=(-e+u+h)*(c-v+w),E=(-e+u)*(v-w),T=(u+h)*(-c+v),A=(-n+h+f)*(g+p-y),C=(n-f)*(g-y),I=n*p,D=(h+f)*(-p+y),N=(-n+i+a)*(w+p-d),O=(n-a)*(w-d),F=(i+a)*(-p+d),P=k+I+o*m,j=(e+o+n-s-i-h-f)*g+M+x+k+A+I+D,q=k+S+T+(e+o+n-i-a-u-h)*w+I+N+F,V=b+i*(-c+l+m-g-w-p+d)+M+k+I+N+O,z=b+M+x+k+a*y,Q=I+N+O+F+s*v,L=k+S+E+h*(-c+v+m-g-w-p+y)+A+C+I,B=A+C+I+D+u*l,U=k+S+E+T+f*d;return r.set(0,0,P),r.set(0,1,j),r.set(0,2,q),r.set(1,0,V),r.set(1,1,z),r.set(1,2,Q),r.set(2,0,L),r.set(2,1,B),r.set(2,2,U),r}},{key:"zzrStrassen",value:function(r){r=R.zzL1(r);var e=this.clone(),o=e.zzk2,n=e.zzj2,s=r.zzk2,i=r.zzj2;function a(r,e,o){var n=r.zzk2,s=r.zzj2;if(n===e&&s===o)return r;var i=t.zzG1(e,o);return i=i.zz61(r,0,0)}n!==s&&1;var u=Math.max(o,s),h=Math.max(n,i);return function r(e,o,n,s){if(n<=512||s<=512)return e.zzr(o);n%2==1&&s%2==1?(e=a(e,n+1,s+1),o=a(o,n+1,s+1)):n%2==1?(e=a(e,n+1,s),o=a(o,n+1,s)):s%2==1&&(e=a(e,n,s+1),o=a(o,n,s+1));var i=parseInt(e.zzk2/2,10),u=parseInt(e.zzj2/2,10),h=e.zz31(0,i-1,0,u-1),f=o.zz31(0,i-1,0,u-1),c=e.zz31(0,i-1,u,e.zzj2-1),l=o.zz31(0,i-1,u,o.zzj2-1),v=e.zz31(i,e.zzk2-1,0,u-1),m=o.zz31(i,o.zzk2-1,0,u-1),g=e.zz31(i,e.zzk2-1,u,e.zzj2-1),w=o.zz31(i,o.zzk2-1,u,o.zzj2-1),p=r(t.add(h,g),t.add(f,w),i,u),y=r(t.add(v,g),f,i,u),d=r(h,t.sub(l,w),i,u),b=r(g,t.sub(m,f),i,u),M=r(t.add(h,c),w,i,u),x=r(t.sub(v,h),t.add(f,l),i,u),k=r(t.sub(c,g),t.add(m,w),i,u),S=t.add(p,b);S.sub(M),S.add(k);var R=t.add(d,M),E=t.add(y,b),T=t.sub(p,y);T.add(d),T.add(x);var A=t.zzG1(2*S.zzk2,2*S.zzj2);return(A=(A=(A=(A=A.zz61(S,0,0)).zz61(R,S.zzk2,0)).zz61(E,0,S.zzj2)).zz61(T,S.zzk2,S.zzj2)).zz31(0,n-1,0,s-1)}(e=a(e,u,h),r=a(r,u,h),u,h)}},{key:"zzv",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!=c(t))throw new Error();var r=t.min,e=void 0===r?0:r,o=t.max,s=void 0===o?1:o;if(!Number.isFinite(e))throw new Error();if(!Number.isFinite(s))throw new Error();if(e>=s)throw new Error();for(var i=new R(this.zzk2,this.zzj2),a=0;a<this.zzk2;a++){var u=this.zzM(a);u.length>0&&n(u,{min:e,max:s,output:u}),i.zzO(a,u)}return i}},{key:"zzw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!=c(t))throw new Error();var r=t.min,e=void 0===r?0:r,o=t.max,s=void 0===o?1:o;if(!Number.isFinite(e))throw new Error();if(!Number.isFinite(s))throw new Error();if(e>=s)throw new Error();for(var i=new R(this.zzk2,this.zzj2),a=0;a<this.zzj2;a++){var u=this.zzQ(a);u.length&&n(u,{min:e,max:s,output:u}),i.zzS(a,u)}return i}},{key:"zzx",value:function(){for(var t=Math.ceil(this.zzj2/2),r=0;r<this.zzk2;r++)for(var e=0;e<t;e++){var o=this.get(r,e),n=this.get(r,this.zzj2-1-e);this.set(r,e,n),this.set(r,this.zzj2-1-e,o)}return this}},{key:"zzy",value:function(){for(var t=Math.ceil(this.zzk2/2),r=0;r<this.zzj2;r++)for(var e=0;e<t;e++){var o=this.get(e,r),n=this.get(this.zzk2-1-e,r);this.set(e,r,n),this.set(this.zzk2-1-e,r,o)}return this}},{key:"zzz",value:function(t){t=R.zzL1(t);for(var r=this.zzk2,e=this.zzj2,o=t.zzk2,n=t.zzj2,s=new R(r*o,e*n),i=0;i<r;i++)for(var a=0;a<e;a++)for(var u=0;u<o;u++)for(var h=0;h<n;h++)s.set(o*i+u,n*a+h,this.get(i,a)*t.get(u,h));return s}},{key:"kroneckerSum",value:function(t){if(t=R.zzL1(t),!this.zzH()||!t.zzH())throw new Error();var r=this.zzk2,e=t.zzk2,o=this.zzz(R.zzJ1(e,e)),n=R.zzJ1(r,r).zzz(t);return o.add(n)}},{key:"zz01",value:function(){var t=new R(this.zzj2,this.zzk2);return this.zz012(t),t}},{key:"zz012",value:function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)t.set(e,r,this.get(r,e))}},{key:"zz11",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,r=0;r<this.zzk2;r++)this.zzO(r,this.zzM(r).sort(t));return this}},{key:"zz21",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,r=0;r<this.zzj2;r++)this.zzS(r,this.zzQ(r).sort(t));return this}},{key:"zz31",value:function(t,r,e,o){d(this,t,r,e,o);for(var n=new R(r-t+1,o-e+1),s=t;s<=r;s++)for(var i=e;i<=o;i++)n.set(s-t,i-e,this.get(s,i));return n}},{key:"zz31Row",value:function(t,r,e){if(void 0===r&&(r=0),void 0===e&&(e=this.zzj2-1),r>e||r<0||r>=this.zzj2||e<0||e>=this.zzj2)throw new Error();for(var o=new R(t.length,e-r+1),n=0;n<t.length;n++)for(var s=r;s<=e;s++){if(t[n]<0||t[n]>=this.zzk2)throw new Error("Row index out of range: ".concat(t[n]));o.set(n,s-r,this.get(t[n],s))}return o}},{key:"zz31Column",value:function(t,r,e){if(void 0===r&&(r=0),void 0===e&&(e=this.zzk2-1),r>e||r<0||r>=this.zzk2||e<0||e>=this.zzk2)throw new Error();for(var o=new R(e-r+1,t.length),n=0;n<t.length;n++)for(var s=r;s<=e;s++){if(t[n]<0||t[n]>=this.zzj2)throw new Error("Column index out of range: ".concat(t[n]));o.set(s-r,n,this.get(s,t[n]))}return o}},{key:"zz61",value:function(t,r,e){if((t=R.zzL1(t)).zzu3())return this;d(this,r,r+t.zzk2-1,e,e+t.zzj2-1);for(var o=0;o<t.zzk2;o++)for(var n=0;n<t.zzj2;n++)this.set(r+o,e+n,t.get(o,n));return this}},{key:"zz71",value:function(t,r){for(var e=y(this,t,r),o=new R(t.length,r.length),n=0;n<e.row.length;n++)for(var s=e.row[n],i=0;i<e.zz23.length;i++){var a=e.zz23[i];o.set(n,i,this.get(s,a))}return o}},{key:"trace",value:function(){for(var t=Math.min(this.zzk2,this.zzj2),r=0,e=0;e<t;e++)r+=this.get(e,e);return r}},{key:"copy",value:function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,t.get(r,e))}},{key:"reset",value:function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,0)}},{key:"clone",value:function(){var t=new R(this.zzk2,this.zzj2);return t.copy(this),t}},{key:"sum",value:function(t){switch(t){case"row":return function(t){for(var r=b(t.zzk2),e=0;e<t.zzk2;++e)for(var o=0;o<t.zzj2;++o)r[e]+=t.get(e,o);return r}(this);case"zz23":return function(t){for(var r=b(t.zzj2),e=0;e<t.zzk2;++e)for(var o=0;o<t.zzj2;++o)r[o]+=t.get(e,o);return r}(this);case void 0:return function(t){for(var r=0,e=0;e<t.zzk2;e++)for(var o=0;o<t.zzj2;o++)r+=t.get(e,o);return r}(this);default:throw new Error("inzyp13 option: ".concat(t))}}},{key:"zz81",value:function(t){switch(t){case"row":return function(t){for(var r=b(t.zzk2,1),e=0;e<t.zzk2;++e)for(var o=0;o<t.zzj2;++o)r[e]*=t.get(e,o);return r}(this);case"zz23":return function(t){for(var r=b(t.zzj2,1),e=0;e<t.zzk2;++e)for(var o=0;o<t.zzj2;++o)r[o]*=t.get(e,o);return r}(this);case void 0:return function(t){for(var r=1,e=0;e<t.zzk2;e++)for(var o=0;o<t.zzj2;o++)r*=t.get(e,o);return r}(this);default:throw new Error("inzyp13 option: ".concat(t))}}},{key:"zz91",value:function(t){var r=this.sum(t);switch(t){case"row":for(var e=0;e<this.zzk2;e++)r[e]/=this.zzj2;return r;case"zz23":for(var o=0;o<this.zzj2;o++)r[o]/=this.zzk2;return r;case void 0:return r/this.zzC1;default:throw new Error("inzyp13 option: ".concat(t))}}},{key:"zzA1",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"==c(t)&&(r=t,t=void 0),"object"!=c(r))throw new Error();var e=r,o=e.unbiased,n=void 0===o||o,s=e.zz91,i=void 0===s?this.zz91(t):s;if("boolean"!=typeof n)throw new Error();switch(t){case"row":if(!Array.isArray(i))throw new Error();return function(t,r,e){for(var o=t.zzk2,n=t.zzj2,s=[],i=0;i<o;i++){for(var a=0,u=0,h=0,f=0;f<n;f++)a+=h=t.get(i,f)-e[i],u+=h*h;r?s.push((u-a*a/n)/(n-1)):s.push((u-a*a/n)/n)}return s}(this,n,i);case"zz23":if(!Array.isArray(i))throw new Error();return function(t,r,e){for(var o=t.zzk2,n=t.zzj2,s=[],i=0;i<n;i++){for(var a=0,u=0,h=0,f=0;f<o;f++)a+=h=t.get(f,i)-e[i],u+=h*h;r?s.push((u-a*a/o)/(o-1)):s.push((u-a*a/o)/o)}return s}(this,n,i);case void 0:if("number"!=typeof i)throw new Error();return function(t,r,e){for(var o=t.zzk2,n=t.zzj2,s=o*n,i=0,a=0,u=0,h=0;h<o;h++)for(var f=0;f<n;f++)i+=u=t.get(h,f)-e,a+=u*u;return r?(a-i*i/s)/(s-1):(a-i*i/s)/s}(this,n,i);default:throw new Error("inzyp13 option: ".concat(t))}}},{key:"zzB1",value:function(t,r){"object"==c(t)&&(r=t,t=void 0);var e=this.zzA1(t,r);if(void 0===t)return Math.sqrt(e);for(var o=0;o<e.length;o++)e[o]=Math.sqrt(e[o]);return e}},{key:"center",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"==c(t)&&(r=t,t=void 0),"object"!=c(r))throw new Error();var e=r.center,o=void 0===e?this.zz91(t):e;switch(t){case"row":if(!Array.isArray(o))throw new Error();return function(t,r){for(var e=0;e<t.zzk2;e++)for(var o=0;o<t.zzj2;o++)t.set(e,o,t.get(e,o)-r[e])}(this,o),this;case"zz23":if(!Array.isArray(o))throw new Error();return function(t,r){for(var e=0;e<t.zzk2;e++)for(var o=0;o<t.zzj2;o++)t.set(e,o,t.get(e,o)-r[o])}(this,o),this;case void 0:if("number"!=typeof o)throw new Error();return function(t,r){for(var e=0;e<t.zzk2;e++)for(var o=0;o<t.zzj2;o++)t.set(e,o,t.get(e,o)-r)}(this,o),this;default:throw new Error("inzyp13 option: ".concat(t))}}},{key:"scale",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"==c(t)&&(r=t,t=void 0),"object"!=c(r))throw new Error();var e=r.scale;switch(t){case"row":if(void 0===e)e=function(t){for(var r=[],e=0;e<t.zzk2;e++){for(var o=0,n=0;n<t.zzj2;n++)o+=Math.pow(t.get(e,n),2)/(t.zzj2-1);r.push(Math.sqrt(o))}return r}(this);else if(!Array.isArray(e))throw new Error();return function(t,r){for(var e=0;e<t.zzk2;e++)for(var o=0;o<t.zzj2;o++)t.set(e,o,t.get(e,o)/r[e])}(this,e),this;case"zz23":if(void 0===e)e=function(t){for(var r=[],e=0;e<t.zzj2;e++){for(var o=0,n=0;n<t.zzk2;n++)o+=Math.pow(t.get(n,e),2)/(t.zzk2-1);r.push(Math.sqrt(o))}return r}(this);else if(!Array.isArray(e))throw new Error();return function(t,r){for(var e=0;e<t.zzk2;e++)for(var o=0;o<t.zzj2;o++)t.set(e,o,t.get(e,o)/r[o])}(this,e),this;case void 0:if(void 0===e)e=function(t){for(var r=t.zzC1-1,e=0,o=0;o<t.zzj2;o++)for(var n=0;n<t.zzk2;n++)e+=Math.pow(t.get(n,o),2)/r;return Math.sqrt(e)}(this);else if("number"!=typeof e)throw new Error();return function(t,r){for(var e=0;e<t.zzk2;e++)for(var o=0;o<t.zzj2;o++)t.set(e,o,t.get(e,o)/r)}(this,e),this;default:throw new Error("inzyp13 option: ".concat(t))}}},{key:"toString",value:function(t){return l(this,t)}},{key:"zzC1",get:function(){return this.zzk2*this.zzj2}}],[{key:"zzD1",value:function(t,r,e){if(t*r!==e.length)throw new Error();for(var o=new R(t,r),n=0;n<t;n++)for(var s=0;s<r;s++)o.set(n,s,e[n*r+s]);return o}},{key:"zzE1",value:function(t){for(var r=new R(1,t.length),e=0;e<t.length;e++)r.set(0,e,t[e]);return r}},{key:"zzF1",value:function(t){for(var r=new R(t.length,1),e=0;e<t.length;e++)r.set(e,0,t[e]);return r}},{key:"zzG1",value:function(t,r){return new R(t,r)}},{key:"zzH1",value:function(t,r){return new R(t,r).zzL(1)}},{key:"rand",value:function(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!=c(e))throw new Error();for(var o=e.random,n=void 0===o?Math.random:o,s=new R(t,r),i=0;i<t;i++)for(var a=0;a<r;a++)s.set(i,a,n());return s}},{key:"zzI1",value:function(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!=c(e))throw new Error();var o=e.min,n=void 0===o?0:o,s=e.max,i=void 0===s?1e3:s,a=e.random,u=void 0===a?Math.random:a;if(!Number.isInteger(n))throw new Error();if(!Number.isInteger(i))throw new Error();if(n>=i)throw new Error();for(var h=i-n,f=new R(t,r),l=0;l<t;l++)for(var v=0;v<r;v++){var m=n+Math.round(u()*h);f.set(l,v,m)}return f}},{key:"zzJ1",value:function(t,r,e){void 0===r&&(r=t),void 0===e&&(e=1);for(var o=Math.min(t,r),n=this.zzG1(t,r),s=0;s<o;s++)n.set(s,s,e);return n}},{key:"zzo",value:function(t,r,e){var o=t.length;void 0===r&&(r=o),void 0===e&&(e=r);for(var n=Math.min(o,r,e),s=this.zzG1(r,e),i=0;i<n;i++)s.set(i,i,t[i]);return s}},{key:"min",value:function(t,r){t=this.zzL1(t),r=this.zzL1(r);for(var e=t.zzk2,o=t.zzj2,n=new R(e,o),s=0;s<e;s++)for(var i=0;i<o;i++)n.set(s,i,Math.min(t.get(s,i),r.get(s,i)));return n}},{key:"max",value:function(t,r){t=this.zzL1(t),r=this.zzL1(r);for(var e=t.zzk2,o=t.zzj2,n=new this(e,o),s=0;s<e;s++)for(var i=0;i<o;i++)n.set(s,i,Math.max(t.get(s,i),r.get(s,i)));return n}},{key:"zzL1",value:function(r){return t.zzM1(r)?r:new R(r)}},{key:"zzM1",value:function(t){return null!=t&&"Matrix"===t.klass}}]),t}();function S(t,r){return t-r}k.prototype.klass="Matrix","undefined"!=typeof Symbol&&(k.prototype[Symbol.for("zze3")]=function(){return l(this)}),k.random=k.rand,k.randomInt=k.zzI1,k.zzoonal=k.zzo,k.prototype.zzoonal=k.prototype.zzo,k.zzo2=k.zzJ1,k.prototype.negate=k.prototype.neg,k.prototype.zzI3=k.prototype.zzz;var R=function(t){o(e,k);var r=s(e);function e(t,o){var n;if(u(this,e),n=r.call(this),e.zzM1(t))return i(n,t.clone());if(Number.isInteger(t)&&t>=0)n.dataFlatten=new Float32Array(o*t);else{if(!Array.isArray(t))throw new Error();var s=t;if("number"!=typeof(o=(t=s.length)?s[0].length:0))n.dataFlatten=new Float32Array(s);else{n.dataFlatten=new Float32Array(o*t);for(var a=0;a<t;a++)for(var h=0;h<o;h++)n.dataFlatten[a*o+h]=s[a][h]}}return n.zzk2=t,n.zzj2=o,i(n)}return f(e,[{key:"set",value:function(t,r,e){return this.dataFlatten[t*this.zzj2+r]=e,this}},{key:"get",value:function(t,r){return this.dataFlatten[t*this.zzj2+r]}},{key:"zzn3",value:function(t,r,e){this.dataFlatten[t*this.zzj2+r]+=e}},{key:"mulComponent",value:function(t,r,e){this.dataFlatten[t*this.zzj2+r]*=e}}]),e}();!function(t,r){t.prototype.add=function(t){return"number"==typeof t?this.addS(t):this.addM(t)},t.prototype.addS=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)+t);return this},t.prototype.addM=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,this.get(e,o)+t.get(e,o));return this},t.add=function(t,e){return new r(t).add(e)},t.prototype.sub=function(t){return"number"==typeof t?this.subS(t):this.subM(t)},t.prototype.subS=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)-t);return this},t.prototype.subM=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,this.get(e,o)-t.get(e,o));return this},t.sub=function(t,e){return new r(t).sub(e)},t.prototype.subtract=t.prototype.sub,t.prototype.subtractS=t.prototype.subS,t.prototype.subtractM=t.prototype.subM,t.subtract=t.sub,t.prototype.zzi3=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,0)},t.prototype.mul=function(t){return"number"==typeof t?this.mulS(t):this.mulM(t)},t.prototype.mulS=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)*t);return this},t.prototype.mulM=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,this.get(e,o)*t.get(e,o));return this},t.mul=function(t,e){return new r(t).mul(e)},t.prototype.multiply=t.prototype.mul,t.prototype.multiplyS=t.prototype.mulS,t.prototype.multiplyM=t.prototype.mulM,t.multiply=t.mul,t.prototype.div=function(t){return"number"==typeof t?this.divS(t):this.divM(t)},t.prototype.divS=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)/t);return this},t.prototype.divM=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,this.get(e,o)/t.get(e,o));return this},t.div=function(t,e){return new r(t).div(e)},t.prototype.divide=t.prototype.div,t.prototype.divideS=t.prototype.divS,t.prototype.divideM=t.prototype.divM,t.divide=t.div,t.prototype.mod=function(t){return"number"==typeof t?this.modS(t):this.modM(t)},t.prototype.modS=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)%t);return this},t.prototype.modM=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,this.get(e,o)%t.get(e,o));return this},t.mod=function(t,e){return new r(t).mod(e)},t.prototype.zzO3=t.prototype.mod,t.prototype.zzO3S=t.prototype.modS,t.prototype.zzO3M=t.prototype.modM,t.zzO3=t.mod,t.prototype.and=function(t){return"number"==typeof t?this.andS(t):this.andM(t)},t.prototype.andS=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)&t);return this},t.prototype.andM=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,this.get(e,o)&t.get(e,o));return this},t.and=function(t,e){return new r(t).and(e)},t.prototype.or=function(t){return"number"==typeof t?this.orS(t):this.orM(t)},t.prototype.orS=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)|t);return this},t.prototype.orM=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,this.get(e,o)|t.get(e,o));return this},t.or=function(t,e){return new r(t).or(e)},t.prototype.xor=function(t){return"number"==typeof t?this.xorS(t):this.xorM(t)},t.prototype.xorS=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)^t);return this},t.prototype.xorM=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,this.get(e,o)^t.get(e,o));return this},t.xor=function(t,e){return new r(t).xor(e)},t.prototype.zzQ3=function(t){return"number"==typeof t?this.zzQ3S(t):this.zzQ3M(t)},t.prototype.zzQ3S=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)<<t);return this},t.prototype.zzQ3M=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,this.get(e,o)<<t.get(e,o));return this},t.zzQ3=function(t,e){return new r(t).zzQ3(e)},t.prototype.zzJ3=function(t){return"number"==typeof t?this.zzJ3S(t):this.zzJ3M(t)},t.prototype.zzJ3S=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)>>t);return this},t.prototype.zzJ3M=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,this.get(e,o)>>t.get(e,o));return this},t.zzJ3=function(t,e){return new r(t).zzJ3(e)},t.prototype.zzL3=function(t){return"number"==typeof t?this.zzL3S(t):this.zzL3M(t)},t.prototype.zzL3S=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)>>>t);return this},t.prototype.zzL3M=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,this.get(e,o)>>>t.get(e,o));return this},t.zzL3=function(t,e){return new r(t).zzL3(e)},t.prototype.zzK3=t.prototype.zzL3,t.prototype.zzK3S=t.prototype.zzL3S,t.prototype.zzK3M=t.prototype.zzL3M,t.zzK3=t.zzL3,t.prototype.not=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,~this.get(t,r));return this},t.not=function(t){return new r(t).not()},t.prototype.abs=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.abs(this.get(t,r)));return this},t.abs=function(t){return new r(t).abs()},t.prototype.acos=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.acos(this.get(t,r)));return this},t.acos=function(t){return new r(t).acos()},t.prototype.zzM3=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.zzM3(this.get(t,r)));return this},t.zzM3=function(t){return new r(t).zzM3()},t.prototype.asin=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.asin(this.get(t,r)));return this},t.asin=function(t){return new r(t).asin()},t.prototype.zzN3=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.zzN3(this.get(t,r)));return this},t.zzN3=function(t){return new r(t).zzN3()},t.prototype.atan=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.atan(this.get(t,r)));return this},t.atan=function(t){return new r(t).atan()},t.prototype.atanh=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.atanh(this.get(t,r)));return this},t.atanh=function(t){return new r(t).atanh()},t.prototype.cbrt=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.cbrt(this.get(t,r)));return this},t.cbrt=function(t){return new r(t).cbrt()},t.prototype.ceil=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.ceil(this.get(t,r)));return this},t.ceil=function(t){return new r(t).ceil()},t.prototype.clz32=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.clz32(this.get(t,r)));return this},t.clz32=function(t){return new r(t).clz32()},t.prototype.cos=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.cos(this.get(t,r)));return this},t.cos=function(t){return new r(t).cos()},t.prototype.cosh=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.cosh(this.get(t,r)));return this},t.cosh=function(t){return new r(t).cosh()},t.prototype.exp=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.exp(this.get(t,r)));return this},t.exp=function(t){return new r(t).exp()},t.prototype.expm1=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.expm1(this.get(t,r)));return this},t.expm1=function(t){return new r(t).expm1()},t.prototype.floor=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.floor(this.get(t,r)));return this},t.floor=function(t){return new r(t).floor()},t.prototype.fround=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.fround(this.get(t,r)));return this},t.fround=function(t){return new r(t).fround()},t.prototype.log=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.log(this.get(t,r)));return this},t.log=function(t){return new r(t).log()},t.prototype.log1p=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.log1p(this.get(t,r)));return this},t.log1p=function(t){return new r(t).log1p()},t.prototype.log10=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.log10(this.get(t,r)));return this},t.log10=function(t){return new r(t).log10()},t.prototype.log2=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.log2(this.get(t,r)));return this},t.log2=function(t){return new r(t).log2()},t.prototype.round=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.round(this.get(t,r)));return this},t.round=function(t){return new r(t).round()},t.prototype.sign=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.sign(this.get(t,r)));return this},t.sign=function(t){return new r(t).sign()},t.prototype.sin=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.sin(this.get(t,r)));return this},t.sin=function(t){return new r(t).sin()},t.prototype.sinh=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.sinh(this.get(t,r)));return this},t.sinh=function(t){return new r(t).sinh()},t.prototype.sqrt=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.sqrt(this.get(t,r)));return this},t.sqrt=function(t){return new r(t).sqrt()},t.prototype.tan=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.tan(this.get(t,r)));return this},t.tan=function(t){return new r(t).tan()},t.prototype.tanh=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.tanh(this.get(t,r)));return this},t.tanh=function(t){return new r(t).tanh()},t.prototype.trunc=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.trunc(this.get(t,r)));return this},t.trunc=function(t){return new r(t).trunc()},t.pow=function(t,e){return new r(t).pow(e)},t.prototype.pow=function(t){return"number"==typeof t?this.powS(t):this.powM(t)},t.prototype.powS=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,Math.pow(this.get(r,e),t));return this},t.prototype.powM=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,Math.pow(this.get(e,o),t.get(e,o)));return this}}(k,R);var E=function(t){o(e,k);var r=s(e);function e(t){var o;u(this,e),(o=r.call(this)).zzk2=t.length,o.zzj2=t[0].length,o.dataFlatten=new Float32Array(o.zzk2*o.zzj2);for(var n=0;n<o.zzk2;n++)for(var s=0;s<o.zzj2;s++)o.dataFlatten[n*o.zzj2+s]=t[n][s];return o}return f(e,[{key:"set",value:function(t,r,e){return this.dataFlatten[t*this.zzj2+r]=e,this}},{key:"get",value:function(t,r){return this.dataFlatten[t*this.zzj2+r]}}]),e}();function T(t,r){var e=0;return Math.abs(t)>Math.abs(r)?(e=r/t,Math.abs(t)*Math.sqrt(1+e*e)):0!==r?(e=t/r,Math.abs(r)*Math.sqrt(1+e*e)):0}var A=function(){function t(r){u(this,t);var e=(r=E.zzL1(r)).zzk2,o=r.zzj2;this.QR=r.clone(),this.X=r.clone(),this.Rzzo=new Float32Array(o),this.m=e,this.n=o,this.update(r)}return f(t,[{key:"update",value:function(t){var r,e,o,n,s=this.QR,i=this.m,a=this.n,u=this.Rzzo;for(s.copy(t),o=0;o<a;o++){var h=0;for(r=o;r<i;r++)h=T(h,s.get(r,o));if(0!==h){for(s.get(o,o)<0&&(h=-h),r=o;r<i;r++)s.set(r,o,s.get(r,o)/h);for(s.set(o,o,s.get(o,o)+1),e=o+1;e<a;e++){for(n=0,r=o;r<i;r++)n+=s.get(r,o)*s.get(r,e);for(n=-n/s.get(o,o),r=o;r<i;r++)s.set(r,e,s.get(r,e)+n*s.get(r,o))}}u[o]=-h}}},{key:"solve",value:function(t){var r=this.QR,e=r.zzk2,o=t.zzj2,n=this.X;n.copy(t);var s,i,a,u,h=r.zzj2;for(a=0;a<h;a++)for(i=0;i<o;i++){for(u=0,s=a;s<e;s++)u+=r.get(s,a)*n.get(s,i);for(u=-u/r.get(a,a),s=a;s<e;s++)n.set(s,i,n.get(s,i)+u*r.get(s,a))}for(a=h-1;a>=0;a--){for(i=0;i<o;i++)n.set(a,i,n.get(a,i)/this.Rzzo[a]);for(s=0;s<a;s++)for(i=0;i<o;i++)n.set(s,i,n.get(s,i)-n.get(a,i)*r.get(s,a))}return n.zz31(0,h-1,0,o-1)}},{key:"zzY1",value:function(){for(var t=this.QR.zzj2,r=0;r<t;r++)if(0===this.Rzzo[r])return!1;return!0}},{key:"zzW1",get:function(){var t,r,e=this.QR,o=e.zzj2,n=new R(o,o);for(t=0;t<o;t++)for(r=0;r<o;r++)t<r?n.set(t,r,e.get(t,r)):t===r?n.set(t,r,this.Rzzo[t]):n.set(t,r,0);return n}},{key:"zzZ1",get:function(){var t,r,e,o,n=this.QR,s=n.zzk2,i=n.zzj2,a=new R(s,i);for(e=i-1;e>=0;e--){for(t=0;t<s;t++)a.set(t,e,0);for(a.set(e,e,1),r=e;r<i;r++)if(0!==n.get(e,e)){for(o=0,t=e;t<s;t++)o+=n.get(t,e)*a.get(t,r);for(o=-o/n.get(e,e),t=e;t<s;t++)a.set(t,r,a.get(t,r)+o*n.get(t,e))}}return a}}]),t}(),C=function(){function t(r,e){u(this,t);var o=r.zzk2,n=r.zzj2,s=Boolean(e.zzx3),i=Boolean(e.zzZ2),a=r.clone(),h=Math.min(o+1,n),f=Math.min(o,n),c=new Float32Array(h),l=new R(o,f),v=new R(n,n),m=new Float32Array(n),g=new Float32Array(o),w=new Float32Array(h),p=R.zzG1(h,h),y=R.zzG1(v.zzk2,l.zzk2),d=new R(v.zzk2,h),b=new R(v.zzk2,l.zzk2);this.m=o,this.n=n,this.ni=h,this.nu=f,this.s=c,this.si=w,this.work=g,this.e=m,this.U=l,this.V=v,this.wantu=s,this.wantv=i,this.a=a,this.Ls=p,this.VLU=y,this.X=d,this.Y=b,this.compute()}return f(t,[{key:"zz24",value:function(t){this.a.copy(t),this.U.reset(),this.V.reset(),this.compute()}},{key:"compute",value:function(){for(var t=this.m,r=this.n,e=this.ni,o=this.nu,n=this.s,s=this.si,i=this.work,a=this.e,u=this.U,h=this.V,f=this.wantu,c=this.wantv,l=this.a,v=0;v<e;v++)s[v]=v;for(var m=Math.min(t-1,r),g=Math.max(0,Math.min(r-2,t)),w=Math.max(m,g),p=0;p<w;p++){if(p<m){n[p]=0;for(var y=p;y<t;y++)n[p]=T(n[p],l.get(y,p));if(0!==n[p]){l.get(p,p)<0&&(n[p]=-n[p]);for(var d=p;d<t;d++)l.set(d,p,l.get(d,p)/n[p]);l.set(p,p,l.get(p,p)+1)}n[p]=-n[p]}for(var b=p+1;b<r;b++){if(p<m&&0!==n[p]){for(var M=0,x=p;x<t;x++)M+=l.get(x,p)*l.get(x,b);M=-M/l.get(p,p);for(var k=p;k<t;k++)l.set(k,b,l.get(k,b)+M*l.get(k,p))}a[b]=l.get(p,b)}if(f&&p<m)for(var S=p;S<t;S++)u.set(S,p,l.get(S,p));if(p<g){a[p]=0;for(var R=p+1;R<r;R++)a[p]=T(a[p],a[R]);if(0!==a[p]){a[p+1]<0&&(a[p]=0-a[p]);for(var E=p+1;E<r;E++)a[E]/=a[p];a[p+1]+=1}if(a[p]=-a[p],p+1<t&&0!==a[p]){for(var A=p+1;A<t;A++)i[A]=0;for(var C=p+1;C<t;C++)for(var I=p+1;I<r;I++)i[C]+=a[I]*l.get(C,I);for(var D=p+1;D<r;D++)for(var N=-a[D]/a[p+1],O=p+1;O<t;O++)l.set(O,D,l.get(O,D)+N*i[O])}if(c)for(var F=p+1;F<r;F++)h.set(F,p,a[F])}}var P=Math.min(r,t+1);if(m<r&&(n[m]=l.get(m,m)),t<P&&(n[P-1]=0),g+1<P&&(a[g]=l.get(g,P-1)),a[P-1]=0,f){for(var j=m;j<o;j++){for(var q=0;q<t;q++)u.set(q,j,0);u.set(j,j,1)}for(var V=m-1;V>=0;V--)if(0!==n[V]){for(var z=V+1;z<o;z++){for(var Q=0,L=V;L<t;L++)Q+=u.get(L,V)*u.get(L,z);Q=-Q/u.get(V,V);for(var B=V;B<t;B++)u.set(B,z,u.get(B,z)+Q*u.get(B,V))}for(var U=V;U<t;U++)u.set(U,V,-u.get(U,V));u.set(V,V,1+u.get(V,V));for(var _=0;_<V-1;_++)u.set(_,V,0)}else{for(var G=0;G<t;G++)u.set(G,V,0);u.set(V,V,1)}}if(c)for(var W=r-1;W>=0;W--){if(W<g&&0!==a[W])for(var X=W+1;X<r;X++){for(var Y=0,J=W+1;J<r;J++)Y+=h.get(J,W)*h.get(J,X);Y=-Y/h.get(W+1,W);for(var K=W+1;K<r;K++)h.set(K,X,h.get(K,X)+Y*h.get(K,W))}for(var H=0;H<r;H++)h.set(H,W,0);h.set(W,W,1)}for(var Z=P-1,$=Number.EPSILON;P>0;){var tt=void 0,rt=void 0;for(tt=P-2;tt>=-1&&-1!==tt;tt--){var et=Number.MIN_VALUE+$*Math.abs(n[tt]+Math.abs(n[tt+1]));if(Math.abs(a[tt])<=et||Number.isNaN(a[tt])){a[tt]=0;break}}if(tt===P-2)rt=4;else{var ot=void 0;for(ot=P-1;ot>=tt&&ot!==tt;ot--){var nt=(ot!==P?Math.abs(a[ot]):0)+(ot!==tt+1?Math.abs(a[ot-1]):0);if(Math.abs(n[ot])<=$*nt){n[ot]=0;break}}ot===tt?rt=3:ot===P-1?rt=1:(rt=2,tt=ot)}switch(tt++,rt){case 1:var st=a[P-2];a[P-2]=0;for(var it=P-2;it>=tt;it--){var at=T(n[it],st),ut=n[it]/at,ht=st/at;if(n[it]=at,it!==tt&&(st=-ht*a[it-1],a[it-1]=ut*a[it-1]),c)for(var ft=0;ft<r;ft++)at=ut*h.get(ft,it)+ht*h.get(ft,P-1),h.set(ft,P-1,-ht*h.get(ft,it)+ut*h.get(ft,P-1)),h.set(ft,it,at)}break;case 2:var ct=a[tt-1];a[tt-1]=0;for(var lt=tt;lt<P;lt++){var vt=T(n[lt],ct),mt=n[lt]/vt,gt=ct/vt;if(n[lt]=vt,ct=-gt*a[lt],a[lt]=mt*a[lt],f)for(var wt=0;wt<t;wt++)vt=mt*u.get(wt,lt)+gt*u.get(wt,tt-1),u.set(wt,tt-1,-gt*u.get(wt,lt)+mt*u.get(wt,tt-1)),u.set(wt,lt,vt)}break;case 3:var pt=Math.max(Math.abs(n[P-1]),Math.abs(n[P-2]),Math.abs(a[P-2]),Math.abs(n[tt]),Math.abs(a[tt])),yt=n[P-1]/pt,dt=n[P-2]/pt,bt=a[P-2]/pt,Mt=n[tt]/pt,xt=a[tt]/pt,kt=((dt+yt)*(dt-yt)+bt*bt)/2,St=yt*bt*(yt*bt),Rt=0;0===kt&&0===St||(Rt=St/(kt+(Rt=kt<0?0-Math.sqrt(kt*kt+St):Math.sqrt(kt*kt+St))));for(var Et=(Mt+yt)*(Mt-yt)+Rt,Tt=Mt*xt,At=tt;At<P-1;At++){var Ct=T(Et,Tt);0===Ct&&(Ct=Number.MIN_VALUE);var It=Et/Ct,Dt=Tt/Ct;if(At!==tt&&(a[At-1]=Ct),Et=It*n[At]+Dt*a[At],a[At]=It*a[At]-Dt*n[At],Tt=Dt*n[At+1],n[At+1]=It*n[At+1],c)for(var Nt=0;Nt<r;Nt++)Ct=It*h.get(Nt,At)+Dt*h.get(Nt,At+1),h.set(Nt,At+1,-Dt*h.get(Nt,At)+It*h.get(Nt,At+1)),h.set(Nt,At,Ct);if(0===(Ct=T(Et,Tt))&&(Ct=Number.MIN_VALUE),It=Et/Ct,Dt=Tt/Ct,n[At]=Ct,Et=It*a[At]+Dt*n[At+1],n[At+1]=-Dt*a[At]+It*n[At+1],Tt=Dt*a[At+1],a[At+1]=It*a[At+1],f&&At<t-1)for(var Ot=0;Ot<t;Ot++)Ct=It*u.get(Ot,At)+Dt*u.get(Ot,At+1),u.set(Ot,At+1,-Dt*u.get(Ot,At)+It*u.get(Ot,At+1)),u.set(Ot,At,Ct)}a[P-2]=Et;break;case 4:if(n[tt]<=0&&(n[tt]=n[tt]<0?-n[tt]:0,c))for(var Ft=0;Ft<=Z;Ft++)h.set(Ft,tt,-h.get(Ft,tt));for(;tt<Z&&!(n[tt]>=n[tt+1]);){var Pt=n[tt];if(n[tt]=n[tt+1],n[tt+1]=Pt,c&&tt<r-1)for(var jt=0;jt<r;jt++)Pt=h.get(jt,tt+1),h.set(jt,tt+1,h.get(jt,tt)),h.set(jt,tt,Pt);if(f&&tt<t-1)for(var qt=0;qt<t;qt++)Pt=u.get(qt,tt+1),u.set(qt,tt+1,u.get(qt,tt)),u.set(qt,tt,Pt);tt++}P--}}}},{key:"solve",value:function(t){for(var r=t,e=this.zzf1,o=this.s.length,n=this.Ls,s=this.VLU,i=0;i<o;i++)Math.abs(this.s[i])<=e?n.set(i,i,0):n.set(i,i,1/this.s[i]);for(var a=this.U,u=this.zzh1,h=u.zzr(n),f=u.zzk2,c=a.zzk2,l=0;l<f;l++)for(var v=0;v<c;v++){for(var m=0,g=0;g<o;g++)m+=h.get(l,g)*a.get(v,g);s.set(l,v,m)}return s.zzr(r)}},{key:"zza1",value:function(t){return this.solve(R.zzo(t))}},{key:"inverse",value:function(){for(var t=this.V,r=this.zzf1,e=t.zzk2,o=t.zzj2,n=this.X,s=this.Y,i=0;i<e;i++)for(var a=0;a<o;a++)Math.abs(this.s[a])>r&&n.set(i,a,t.get(i,a)/this.s[a]);for(var u=this.U,h=u.zzk2,f=u.zzj2,c=0;c<e;c++)for(var l=0;l<h;l++){for(var v=0,m=0;m<f;m++)v+=n.get(c,m)*u.get(l,m);s.set(c,l,v)}return s}},{key:"zzb1",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"zzp2",get:function(){return this.s[0]}},{key:"zzd1",get:function(){for(var t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,r=0,e=this.s,o=0,n=e.length;o<n;o++)e[o]>t&&r++;return r}},{key:"zzoonal",get:function(){return Array.from(this.s)}},{key:"zzf1",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"zzg1",get:function(){return this.U}},{key:"zzh1",get:function(){return this.V}},{key:"zzoonalMatrix",get:function(){return R.zzo(this.s)}}]),t}(),I=[],D=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{zzj3:-1},e=r.zzj3;if(-1!==e&&I[e]){var o=I[e];return o.zz24(t),o}var n=new C(t,Object.assign({zzx3:!0,zzZ2:!0},r));return-1!==e&&(I[e]=n),n};function N(t,r){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0;return e?D(t,{zzj3:o}).solve(r):new A(t).solve(r)}var O=function(t){o(e,k);var r=s(e);function e(t,o,n){var s;return u(this,e),(s=r.call(this)).matrix=t,s.zzk2=o,s.zzj2=n,s}return e}(),F=function(t){o(e,O);var r=s(e);function e(t,o,n){var s;u(this,e);var i=y(t,o,n);return(s=r.call(this,t,i.row.length,i.zz23.length)).zzy3=i.row,s.zzl2=i.zz23,s}return f(e,[{key:"set",value:function(t,r,e){return this.matrix.set(this.zzy3[t],this.zzl2[r],e),this}},{key:"get",value:function(t,r){return this.matrix.get(this.zzy3[t],this.zzl2[r])}}]),e}();t.Matrix=R,t.QR=A,t.zzT2=A,t.zz92=D,t.default=R,t.zzU1=function t(r){if(0===r.zzj2)return 1;var e,o,n,s,i,a;if(2===r.zzj2)return e=r.get(0,0),o=r.get(0,1),n=r.get(1,0),e*r.get(1,1)-o*n;if(3===r.zzj2)return s=new F(r,[1,2],[1,2]),i=new F(r,[1,2],[0,2]),a=new F(r,[1,2],[0,1]),e=r.get(0,0),o=r.get(0,1),n=r.get(0,2),e*t(s)-o*t(i)+n*t(a);throw new Error()},t.inverse2=function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=arguments.length>2?arguments[2]:void 0;return r?D(t,{zzj3:e}).inverse():N(t,R.zzJ1(t.zzk2))},t.zzp3=N,Object.defineProperty(t,"zzB",{value:!0})},"object"==(void 0===e?"undefined":c(e))&&void 0!==r?v(e):v((l=falseThis?globalThis:l||self).mlMatrix={})},{}]},{},[2])(2)});;tb=window.zyp;a.callbackReady&&(V.Na=a.callbackReady);a.callbackTrack&&(V.Rb=a.callbackTrack);"undefined"!==typeof a.animateDelay&&(V.qa=a.animateDelay);"undefined"!==typeof a.NNCPath&&(V.Ob=a.NNCPath);"undefined"!==typeof a.NN&&
(V.Ya=a.NN);"undefined"!==typeof a.followZRot&&(V.ta=a.followZRot?!0:!1);"undefined"!==typeof a.isTrackingEnabled&&(V.oc=a.isTrackingEnabled?!0:!1);da=Object.create(qa.Tf);a.scanSettings&&Object.assign(da,a.scanSettings);P.V=da.translationScalingFactors.slice(0);ta=Object.create(qa.gg);a.stabilizationSettings&&Object.assign(ta,a.stabilizationSettings);var d=1;"undefined"!==typeof a.maxFacesDetected&&(d=Math.max(1,a.maxFacesDetected));if(d>qa.If)return Oa("MAXFACES_TOOHIGH"),!1;ca.v({O:d,Bc:qa.Jf,
ge:qa.Kf,Ld:function(l){return l.isDetected}});if(a.canvas)V.W=a.canvas;else{if(!a.canvasId)return Oa("NO_CANVASID"),!1;V.W=document.getElementById(a.canvasId);if(!V.W)return Oa("INVALID_CANVASID"),!1}R.B=V.W.width;R.G=V.W.height;if(!R.B||!R.G)return Oa("INVALID_CANVASDIMENSIONS"),!1;R.Qb=R.B/R.G;Na.v({Pd:a.isKeepRunningOnWinFocusLost||!1,Nb:a.GPUBenchmarkerCallback||null,Za:V.qa});na.v({Dc:0,n:da.nDetectsPerLoopRange[1]-da.nDetectsPerLoopRange[0]+1,Vd:da.nDetectsPerLoopRange[0]});0!==da.nDetectsPerLoop?
na.Mc(da.nDetectsPerLoop):na.Wc();var e=0;a.videoSettings&&a.videoSettings.videoElement?fb(a.videoSettings.videoElement,b):null===a.videoSettings?b():(a.videoSettings&&Object.assign(va,a.videoSettings),Lb(a.onWebcamAsk,a.onWebcamGet,function(l){fb(l,b)}));Hb(function(l){if(!$b())return!1;C.cd([{id:"s58",name:"_",na:"attribute vec2 a0;uniform mat2 u44;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5,.5)+u44*a0*vec2(1.,-1.);}",ab:["a0"],Ka:[2],g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
i:["u1","u44"],precision:"lowp"},{id:"s56",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",na:"attribute vec2 a0;uniform sampler2D u45;uniform mat2 u44;uniform vec2 u46;uniform float u47,u38,u48,u49;varying vec2 vv0;void main(){vec2 f=a0;vec4 a=texture2D(u45,vec2(u38,u47));vec2 g=a.gb,b=a.a*u46;b.x*=u49;float c=cos(u48),d=sin(u48);vec2 h=mat2(c,d,-d,c)*f,i=g+.5*h*b;vv0=.5+2.*u44*(i-.5),gl_Position=vec4(a0,0.,1.);}",ab:["a0"],Ka:[2],i:"u1 u45 u46 u47 u38 u48 u49 u44".split(" "),
precision:"lowp"},{id:"s55",name:"_",g:"uniform sampler2D u50,u45;uniform vec3 u51,u52;uniform float u53,u54,u47,u38,u55,u56,u48,u57;const vec4 e=vec4(.25,.25,.25,.25);void main(){float b=(u56-.5)/u56;vec4 f=texture2D(u50,vec2(3.5/u56,b));bool g=dot(f,e)>u54;vec4 a=texture2D(u45,vec2(u38,u47));a.r<-.5?a.r+=1.:g?a.r=2.:a.r>u53?a.r=0.:a.r>1.9?a.r+=1.:0.,a.r=mix(-2.,a.r,u55);if(a.r<.9)a=vec4(1.,u51);else{a.r*=step(1.9,a.r);float h=dot(e,texture2D(u50,vec2(.5/u56,b))),i=dot(e,texture2D(u50,vec2(1.5/u56,b))),j=dot(e,texture2D(u50,vec2(2.5/u56,b))),c=cos(u48),d=sin(u48);vec2 k=mat2(c,d*u57,-d/u57,c)*vec2(h,i);a.gba+=vec3(k,j)*u52*a.a;}gl_FragColor=a;}",
na:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",i:"u50 u45 u51 u53 u52 u55 u54 u47 u38 u56 u48 u57".split(" ")},{id:"s59",name:"_",na:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u50;uniform float u56,u55;const vec4 e=vec4(.25,.25,.25,.25);void main(){float a=(u56-.5)/u56,b=dot(e,texture2D(u50,vec2(5.5/u56,a))),c=dot(e,texture2D(u50,vec2(6.5/u56,a))),d=dot(e,texture2D(u50,vec2(7.5/u56,a))),f=dot(e,texture2D(u50,vec2(3.5/u56,a)));vec3 g=vec3(b,c,d);gl_FragColor=vec4(g,f*u55);}",
i:["u50","u56","u55"]},{id:"s60",name:"_",na:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u50;uniform float u56;const vec4 e=vec4(.25,.25,.25,.25),h=vec4(.5,.5,.5,.5);vec2 f(float a){float b=floor(a/u56),c=a-b*u56;return vec2(c,u56-.5-b)/u56;}vec2 g(float a){vec2 b=f(a*2.),c=f(a*2.+1.);float d=dot(e,texture2D(u50,b)),i=dot(e,texture2D(u50,c));return vec2(d,i);}void main(){float a=2.*gl_FragCoord.x-2.;vec2 b=g(a-1.),c=g(a);gl_FragColor=h+.5*vec4(b,c)/1.2;}",i:["u50",
"u56"]},{id:"s57",name:"_",na:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u50;uniform vec2 u39,u40,u41,u42,u43;const vec4 e=vec4(.25,.25,.25,.25);const float f=3.141593,g=1e-7;void main(){float b=dot(e,texture2D(u50,u39)),c=dot(e,texture2D(u50,u40))/2.,a=dot(e,texture2D(u50,u41)),d=dot(e,texture2D(u50,u42));a+=(step(0.,a)-.5)*g;float h=.5+.5*atan(d,a)/f,i=dot(e,texture2D(u50,u43));gl_FragColor=vec4(b,c,h,i);}",i:"u50 u39 u40 u41 u42 u43".split(" ")},{id:"s54",
name:"_",g:"uniform sampler2D u45,u58;uniform vec2 u59;uniform float u60,u38;varying vec2 vv0;void main(){float f=step(.5,mod(gl_FragCoord.y+1.5,2.)),a=step(u38,vv0.x);vec2 d=vv0+u59;vec4 b=mix(texture2D(u58,d),texture2D(u45,d),vec4(1.,a,a,a));b.a*=mix(u60,1.,a);vec4 g=floor(255.*b),h=255.*fract(255.*b),c=mix(g,h,f)/255.;c.x=mix(step(b.x,1.5),c.x,a),gl_FragColor=c;}",i:["u45","u58","u60","u59","u38"]}]);Jb(l);b()});return!0},update:function(a){if(!yb)return Promise.reject("NOT_READY");a.scanSettings&&
bb.set_scanSettings(a.scanSettings);a.stabilizationSettings&&bb.set_stabilizationSettings(a.stabilizationSettings);var b=Promise.resolve();if(a.NNCPath||a.NN){mb();fa=ea.zc;Ea&&Ea.m();Ea=null;for(b=0;b<ca.ua();++b)ua[b].detected=0,ua.isDetected=!1,ua[b].detectedRaw=0,Ra[b].Qa=0;a.NNCPath?V.Ob=a.NNCPath:a.NN&&(V.Ya=a.NN);b=new Promise(function(d){Hb(function(e){Jb(e);Va();d()})})}return b},destroy:function(){if(jb)return Promise.reject("ALREADY_DESTROYING");ab=null;yb=!1;jb=!0;Na.m();return new Promise(function(a){bb.toggle_pause(!0,
!0).finally(function(){Ea&&Ea.m();Ka.m();Ea=nb=ua=Ra=null;R.wa=null;P.ca=null;P.Xa=null;A.D=null;fa=ea.Ua;jb=!1;a()}).catch(function(){})})},toggle_videoStream:function(a){return A.qb||!A.element?Promise.resolve():W.te(A.element,a,A.Oa)},toggle_pause:function(a,b){if(-1===[ea.play,ea.pause].indexOf(fa))return Promise.reject("NOT_READY");b=b?bb.toggle_videoStream(!a):Promise.resolve();a?mb():b.then(function(){Va()});return b},toggle_tracking:function(a){-1!==[ea.play,ea.pause].indexOf(fa)&&(V.oc=a)},
reset_GLState:cb,update_videoSettings:function(a){if(fa===ea.zc||fa===fa.Ua)return Promise.reject("NOT_READY");mb();return null===a&&null===A.element?Promise.resolve(null):new Promise(function(b,d){W.te(A.element,!1,A.Oa).then(function(){null===a?b(null):(Object.assign(va,a),Lb(null,null,function(e){fb(e,function(){A.D.$f(e);Ta();Sa();Va();b(A.element)})}))}).catch(d)})},set_animateDelay:function(a){V.qa=a;Na.update({Za:V.qa})},resize:function(){if(!(A&&A.element&&V&&V.W))return!1;var a=V.W.width,
b=V.W.height;if(!sb()&&a===R.B&&b===R.G)return!1;R.B=a;R.G=b;R.Qb=R.B/R.G;C.N();qb();pb();Ta();Sa();return!0},set_inputTexture:function(a,b,d,e){A.I[0]=b;A.I[1]=d;A.Md=e||!1;A.D=Y.instance({width:b,height:d,ic:a});A.Ta=!0;Ta();cb();Sa()},reset_inputTexture:function(){A.Ta=!1;A.D=A.Qc;sb();Ta();Sa()},render_video:function(){Aa.P();C.N();C.set("s58");C.le("u44",A.da);c.viewport(0,0,R.B,R.G);A.D.h(0);U.l(!0,!0);C.le("u44",A.u)},get_videoDevices:function(a){return W.rf(a)},get_videoUVScaleMat2:function(){return A.u},
is_winFocus:function(){return Na.Ef()},set_scanSettings:function(a){Object.assign(da,a);0!==da.nDetectsPerLoop?na.Mc(da.nDetectsPerLoop):na.Wc();qb();pb()},set_stabilizationSettings:function(a){Object.assign(ta,a)},update_videoElement:function(a,b){fb(a,function(){Kb();Ta();Sa();b&&b(A.D.get());fa===ea.oe&&Va()})},bind_croppedTextureToSampler:function(a){R.wa.Ma(a)},capture_image:function(a){return Ka.bf(a)},get_LMLabels:function(){return ka.labels},get_widthPx:function(){return R?R.B:-1},get_heightPx:function(){return R?
R.G:-1},force_animate:function(){cb();Db();Cb();Eb();db()},reset:function(){ua.forEach(function(a){Object.assign(a,{detected:0,detectedRaw:0,isDetected:!1,x:0,y:0,s:1,rx:0,ry:0,rz:0,lAmb:0,lDir:0,lTheta:0,lPhi:0})});P.ca.Ha(P.Pc);P.Xa.Ha(P.Pc);rb.reset()},compute_pose:function(a,b,d,e){null===ab&&(Ma[0]=d,Ma[1]=e,ab=new tb.zypSolver({cameraFocals:Ma,zyp15:qa.fg}));if(Ma[0]!==d||Ma[1]!==e)Ma[0]=d,Ma[1]=e,ab.zyp14(Ma);a=ab.solve(a,b,!1);return{ok:a.zyp13,repError:a.repError,
rotation:a.R,translation:a.t}}};return bb}();
if(typeof(module)!=='undefined'){module.exports=window.WEBARROCKSFACE;}
window.WEBARROCKSFACE.FAKEDOM=FAKEDOM;