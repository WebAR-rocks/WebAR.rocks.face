/**
 * WebAR.rocks.face
 *
 * Copyright (c) 2020 WebAR.rocks ( https://webar.rocks )
 * This code is released under dual licensing:
 *   - GPLv3 
 *   - Nominative commercial license
 * Please read https://github.com/WebAR-rocks/WebAR.rocks.face/blob/master/LICENSE
 * 
*/

/* eslint-enable */
/* prettier-ignore */
var Ha="function"==typeof Object.defineProperties?Object.defineProperty:function(L,O,S){if(L==Array.prototype||L==Object.prototype)return L;L[O]=S.value;return L};function Ya(L){L=["object"==typeof globalThis&&globalThis,L,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var O=0;O<L.length;++O){var S=L[O];if(S&&S.Math==Math)return S}throw Error("Cannot find global object");}var zb=Ya(this);
function Mb(L,O){if(O)a:{var S=zb;L=L.split(".");for(var ea=0;ea<L.length-1;ea++){var la=L[ea];if(!(la in S))break a;S=S[la]}L=L[L.length-1];ea=S[L];O=O(ea);O!=ea&&null!=O&&Ha(S,L,{configurable:!0,writable:!0,value:O})}}function Nb(L){var O=0;return function(){return O<L.length?{done:!1,value:L[O++]}:{done:!0}}}
function Ob(L){var O="undefined"!=typeof Symbol&&Symbol.iterator&&L[Symbol.iterator];if(O)return O.call(L);if("number"==typeof L.length)return{next:Nb(L)};throw Error(String(L)+" is not an iterable or ArrayLike");}
Mb("Symbol",function(L){function O(xa){if(this instanceof O)throw new TypeError("Symbol is not a constructor");return new S(ea+(xa||"")+"_"+la++,xa)}function S(xa,P){this.G=xa;Ha(this,"description",{configurable:!0,writable:!0,value:P})}if(L)return L;S.prototype.toString=function(){return this.G};var ea="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",la=0;return O});
Mb("Symbol.iterator",function(L){if(L)return L;L=Symbol("Symbol.iterator");for(var O="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),S=0;S<O.length;S++){var ea=zb[O[S]];"function"===typeof ea&&"function"!=typeof ea.prototype[L]&&Ha(ea.prototype,L,{configurable:!0,writable:!0,value:function(){return cc(Nb(this))}})}return L});function cc(L){L={next:L};L[Symbol.iterator]=function(){return this};return L}
Mb("Promise",function(L){function O(P){this.da=0;this.ra=void 0;this.G=[];this.af=!1;var V=this.hb();try{P(V.resolve,V.reject)}catch(X){V.reject(X)}}function S(){this.G=null}function ea(P){return P instanceof O?P:new O(function(V){V(P)})}if(L)return L;S.prototype.da=function(P){if(null==this.G){this.G=[];var V=this;this.ra(function(){V.kb()})}this.G.push(P)};var la=zb.setTimeout;S.prototype.ra=function(P){la(P,0)};S.prototype.kb=function(){for(;this.G&&this.G.length;){var P=this.G;this.G=[];for(var V=
0;V<P.length;++V){var X=P[V];P[V]=null;try{X()}catch(ra){this.hb(ra)}}}this.G=null};S.prototype.hb=function(P){this.ra(function(){throw P;})};O.prototype.hb=function(){function P(ra){return function(Ea){X||(X=!0,ra.call(V,Ea))}}var V=this,X=!1;return{resolve:P(this.ff),reject:P(this.kb)}};O.prototype.ff=function(P){if(P===this)this.kb(new TypeError("A Promise cannot resolve to itself"));else if(P instanceof O)this.jf(P);else{a:switch(typeof P){case "object":var V=null!=P;break a;case "function":V=
!0;break a;default:V=!1}V?this.ef(P):this.Be(P)}};O.prototype.ef=function(P){var V=void 0;try{V=P.then}catch(X){this.kb(X);return}"function"==typeof V?this.kf(V,P):this.Be(P)};O.prototype.kb=function(P){this.wd(2,P)};O.prototype.Be=function(P){this.wd(1,P)};O.prototype.wd=function(P,V){if(0!=this.da)throw Error("Cannot settle("+P+", "+V+"): Promise already settled in state"+this.da);this.da=P;this.ra=V;2===this.da&&this.gf();this.cf()};O.prototype.gf=function(){var P=this;la(function(){if(P.df()){var V=
zb.console;"undefined"!==typeof V&&V.error(P.ra)}},1)};O.prototype.df=function(){if(this.af)return!1;var P=zb.CustomEvent,V=zb.Event,X=zb.dispatchEvent;if("undefined"===typeof X)return!0;"function"===typeof P?P=new P("unhandledrejection",{cancelable:!0}):"function"===typeof V?P=new V("unhandledrejection",{cancelable:!0}):(P=zb.document.createEvent("CustomEvent"),P.initCustomEvent("unhandledrejection",!1,!0,P));P.promise=this;P.reason=this.ra;return X(P)};O.prototype.cf=function(){if(null!=this.G){for(var P=
0;P<this.G.length;++P)xa.da(this.G[P]);this.G=null}};var xa=new S;O.prototype.jf=function(P){var V=this.hb();P.xb(V.resolve,V.reject)};O.prototype.kf=function(P,V){var X=this.hb();try{P.call(V,X.resolve,X.reject)}catch(ra){X.reject(ra)}};O.prototype.then=function(P,V){function X(Ia,Ja){return"function"==typeof Ia?function(db){try{ra(Ia(db))}catch(eb){Ea(eb)}}:Ja}var ra,Ea,fb=new O(function(Ia,Ja){ra=Ia;Ea=Ja});this.xb(X(P,ra),X(V,Ea));return fb};O.prototype.catch=function(P){return this.then(void 0,
P)};O.prototype.xb=function(P,V){function X(){switch(ra.da){case 1:P(ra.ra);break;case 2:V(ra.ra);break;default:throw Error("Unexpected state: "+ra.da);}}var ra=this;null==this.G?xa.da(X):this.G.push(X);this.af=!0};O.resolve=ea;O.reject=function(P){return new O(function(V,X){X(P)})};O.race=function(P){return new O(function(V,X){for(var ra=Ob(P),Ea=ra.next();!Ea.done;Ea=ra.next())ea(Ea.value).xb(V,X)})};O.all=function(P){var V=Ob(P),X=V.next();return X.done?ea([]):new O(function(ra,Ea){function fb(db){return function(eb){Ia[db]=
eb;Ja--;0==Ja&&ra(Ia)}}var Ia=[],Ja=0;do Ia.push(void 0),Ja++,ea(X.value).xb(fb(Ia.length-1),Ea),X=V.next();while(!X.done)})};return O});Mb("Math.log2",function(L){return L?L:function(O){return Math.log(O)/Math.LN2}});function dc(L,O){L instanceof String&&(L+="");var S=0,ea=!1,la={next:function(){if(!ea&&S<L.length){var xa=S++;return{value:O(xa,L[xa]),done:!1}}ea=!0;return{done:!0,value:void 0}}};la[Symbol.iterator]=function(){return la};return la}
Mb("Array.prototype.keys",function(L){return L?L:function(){return dc(this,function(O){return O})}});var ec="function"==typeof Object.assign?Object.assign:function(L,O){for(var S=1;S<arguments.length;S++){var ea=arguments[S];if(ea)for(var la in ea)Object.prototype.hasOwnProperty.call(ea,la)&&(L[la]=ea[la])}return L};Mb("Object.assign",function(L){return L||ec});
function fc(L,O,S){L instanceof String&&(L=String(L));for(var ea=L.length,la=0;la<ea;la++){var xa=L[la];if(O.call(S,xa,la,L))return{fe:la,bf:xa}}return{fe:-1,bf:void 0}}Mb("Array.prototype.find",function(L){return L?L:function(O,S){return fc(this,O,S).bf}});Mb("Object.is",function(L){return L?L:function(O,S){return O===S?0!==O||1/O===1/S:O!==O&&S!==S}});
Mb("Array.prototype.includes",function(L){return L?L:function(O,S){var ea=this;ea instanceof String&&(ea=String(ea));var la=ea.length;S=S||0;for(0>S&&(S=Math.max(S+la,0));S<la;S++){var xa=ea[S];if(xa===O||Object.is(xa,O))return!0}return!1}});
Mb("String.prototype.includes",function(L){return L?L:function(O,S){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(O instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(O,S||0)}});Mb("Array.prototype.findIndex",function(L){return L?L:function(O,S){return fc(this,O,S).fe}});
Mb("Promise.prototype.finally",function(L){return L?L:function(O){return this.then(function(S){return Promise.resolve(O()).then(function(){return S})},function(S){return Promise.resolve(O()).then(function(){throw S;})})}});
const WEBARROCKSFACE=function(){function L(a){var b=null,d=null,e=null,k=0,l=this,u=null,n={ib:[],Vb:"none",bd:!1,Ub:null,grid:null};this.B=function(){this.vf(u.ib);e.$g({Vb:u.Vb,bd:u.bd,Ub:u.Ub})};this.fg=function(h){return b[h]};this.fc=function(h){["s32","s34","s27"].forEach(function(r){z.H(r,[{type:"2f",name:"u21",value:h}])});b&&b.forEach(function(r){r.fc(h)})};this.vf=function(h){var r=null;k=h.length;var w=null!==u.grid&&a.grid.length&&!(1===a.grid[0]&&1===a.grid[1]),B=w?u.grid:[1,1];
w&&this.fc(B);b=h.map(function(x,t){x=Object.assign({},x,{index:t,parent:l,Xb:r,sg:t===k-1,cb:w,X:B});return r=t=0===t?gc.instance(x):hc.instance(x)});d=b[0];e=b[k-1];b.forEach(function(x,t){0!==t&&x.Ig()})};this.Y=function(h){h.h(0);var r=h;b.forEach(function(w){r=w.Y(r,!1)});return r};this.eg=function(){return d.dg()};this.ig=function(){return e.L()};this.ab=function(){return e.hg()};this.Zd=function(){return e.Zd()};this.o=function(){b&&(b.forEach(function(h){h.o()}),e=d=b=null,k=0)};"undefined"!==
typeof a&&(u=Object.assign({},n,a),this.B())}function O(a,b){var d=b%8;return a[(b-d)/8]>>7-d&1}function S(a,b,d){var e=1,k=0;for(d=b+d-1;d>=b;--d)k+=e*O(a,d),e*=2;return k}function ea(a){var b=null;a=a.data;"undefined"===typeof btoa&&"undefined"!==typeof Buffer?b=Buffer.from(a,"base64").toString("latin1"):b=atob(a);a=b.length;for(var d=new Uint8Array(a),e=0;e<a;++e)d[e]=b.charCodeAt(e);return d}function la(a){return"string"===typeof a?JSON.parse(a):a}function xa(a){if("undefined"===typeof la(a).nb){var b=
la(a);a=b.ne;var d=b.nf,e=b.n;b=ea(b);for(var k=new Float32Array(e),l=new Float32Array(d),u=a+d+1,n=0;n<e;++n){var h=u*n,r=0===O(b,h)?1:-1,w=S(b,h+1,a),B=b;h=h+1+a;for(var x=l.length,t=0,I=h;I<h+x;++I)l[t]=O(B,I,!0),++t;for(h=B=0;h<d;++h)B+=l[h]*Math.pow(2,-h-1);k[n]=0===B&&0===w?0:r*(1+B)*Math.pow(2,1+w-Math.pow(2,a-1))}a=k}else if(e=la(a),a=e.nb,0===a)a=new Uint8Array(e.nb);else{d=e.n;e=ea(e);b=new Uint32Array(d);for(k=0;k<d;++k)b[k]=S(e,k*a,a);a=b}return a}function P(){if(na===ka.play)return!1;
if(null===C.element||na===ka.Rb)return na=ka.Ue,!1;na=ka.play;ya.dc();$a.stop();Na.Hc();fb(0);return!0}function V(){if(na!==ka.play)return!1;ya.stop();$a.stop();na=ka.pause;return!0}function X(a,b,d,e,k){a=4*(b*Oa+a)+d;return e+(U.buffer[a]/255+U.buffer[a+4*Oa]/65025)*(k-e)}function ra(){var a=pa.Aa();Ka.P();c.viewport(0,0,Oa,2*a);z.set("s62");U.fa.h(0);U.rb.h(1);W.l(!1,!1);return oa.enableAsyncReadPixels?ja.Zb(0,0,Oa,2*a,U.buffer,Ja,oa.readPixelsAsyncDelay):ja.He(0,0,Oa,2*a,U.buffer)}function Ea(a){var b=
gb[a],d=Ab[a],e=Fa[a];a*=2;b.Za=X(1,a,3,0,1);e.detectedRaw=b.Za;e.detected=Ta.ta(e.detected,b.Za,ua.mf);var k=e.isDetected;e.isDetected=e.detected>oa.threshold;b.x=X(0,a,1,-1,1);b.y=X(0,a,2,-1,1);b.T=X(0,a,3,0,oa.maxFaceWinScale);if(e.isDetected){b.rx=X(1,a,0,-U.ua[0],U.ua[0]);b.ry=X(1,a,1,-U.ua[1],U.ua[1]);b.Ga=X(1,a,2,-U.ua[2],U.ua[2]);if(U.Ka)if(b.Mc=X(2,a,0,0,1),b.Nc=X(2,a,1,0,2),b.Pc=X(2,a,2,-Math.PI,Math.PI),b.Oc=X(2,a,3,0,Math.PI),k){var l=Da.lightingRelaxationTime;e.lAmb=ya.qb(b.Mc,e.lAmb,
l);e.lDir=ya.qb(b.Nc,e.lDir,l);e.lTheta=ya.qb(b.Pc,e.lTheta,l);e.lPhi=ya.qb(b.Oc,e.lPhi,l)}else e.lAmb=b.Mc,e.lDir=b.Nc,e.lTheta=b.Pc,e.lPhi=b.Oc;U.Nb&&(b.lc=X(3,a,0,U.oc[0],U.oc[1]),e.angWidth=k?ya.qb(b.lc,e.angWidth,Da.angWidthRelaxationTime):b.lc);k=ua.zd;for(l=0;l<va.lb;++l){var u=4+Math.floor(.5*l);b.Qc[l][0]=X(u,a,l%2*2,-k,k);b.Qc[l][1]=X(u,a,l%2*2+1,-k,k)}d.dx=b.x-e.x;d.dy=b.y-e.y;d.wc=b.T-e.s;d.tc=b.rx-e.rx;d.uc=b.ry-e.ry;d.vc=ba.za?b.Ga:b.Ga-e.rz;a=ya.Yf();d=Ta.ta(Da.alphaRange[1],Da.alphaRange[0],
Math.pow((1-Bb.Uc(Da.translationFactorRange[0],Da.translationFactorRange[1],Math.sqrt(d.dx*d.dx+d.dy*d.dy+d.wc*d.wc)/a))*(1-Bb.Uc(Da.rotationFactorRange[0],Da.rotationFactorRange[1],Math.sqrt(d.tc*d.tc+d.uc*d.uc+d.vc*d.vc)/a))*Bb.Uc(Da.qualityFactorRange[0],Da.qualityFactorRange[1],b.Za),ua.pf));za.mode===za.Sb.bc&&(za.ya.Bb=Math.cos(Math.sqrt(Math.abs(e.ry))),za.ya.Ac=za.Kd*Math.sin(e.ry));e.x=Ta.ta(e.x,b.x,d);e.y=Ta.ta(e.y,b.y,d);e.s=Ta.ta(e.s,b.T,d);e.rx=Ta.ta(e.rx,b.rx,d);e.ry=Ta.ta(e.ry,b.ry,
d);var n=1,h=0;ba.za?(n=Math.cos(e.rz),h=Math.sin(e.rz),e.rz+=Da.followZRotAlphaFactor*d*b.Ga):e.rz=Ta.ta(e.rz,b.Ga,d);e.landmarks.forEach(function(r,w){var B=va.Fd[w],x=b.Qc[w];w=b.Ag[w];var t=B[0]+x[0]/va.yc;B=B[1]+x[1]/va.yc;za.mode===za.Sb.bc&&(t=t*za.ya.Bb+za.ya.Ac*b.T);ba.za&&(x=B*n+t*h,t=t*n-B*h,B=x);w[0]=b.x+t*b.T;w[1]=b.y+B*b.T*Z.mc;r[0]=w[0];r[1]=w[1]});++b.Ea}else ba.za&&(e.rz=0),za.mode===za.Sb.bc&&(za.ya.Bb=1,za.ya.Ac=0),b.Ea=Math.floor(b.Ea/2)}function fb(){na===ka.play&&(oa.isCleanGLStateAtEachIteration&&
(z.Pd(),W.reset(),W.Ia(),c.disable(c.DEPTH_TEST),z.Oa()),ba.Kc?ya.gd(Ia,ra,db,Ja,eb,oa.animateProcessOrder):(Pb(),Ja(),eb()))}function Ia(){Ka.ja();C.gb||Pb();var a=ya.gg();pa.update(a,Fa);for(var b=0;b<a;++b){pa.dc(b);z.set("s64");za.mode===za.Sb.bc&&z.M("u53",za.ya.Bb);var d=pa.Aa(),e=pa.$d(),k=Fa[e];ba.za&&z.M("u52",k.rz);pa.Xe("u51");k=Qb.Of(Z.m,k,Cb);Z.bb.O(k,Cb);C.D.h(1);U.fa.h(0);W.l(!1,!1);U.rb.v();z.set("s3");c.viewport(0,e,Oa,1);z.U("u11",1,1/d);z.U("u12",0,e/d);W.l(!1,!1);Ua.Y(Z.bb)}}function Ja(){Ka.jh();
ia.reset();oa.isCleanGLStateAtEachIteration&&(Ka.reset(),c.enable(c.DEPTH_TEST));ba.nc&&ba.nc(pa.ue()?Fa:Fa[0]);oa.isCleanGLStateAtEachIteration&&(W.reset(),W.Ia(),c.disable(c.BLEND))}function db(){for(var a=0;a<pa.Aa();++a)pa.yg(a)&&Ea(a)}function eb(){na===ka.play&&$a.gd(fb)}function Pb(){if(C.Mb)C.element.needsUpdate&&(C.D.Oe(C.element.videoWidth,C.element.videoHeight),C.D.Qa(C.element.arrayBuffer),C.element.needsUpdate=!1);else{var a=C.element.currentTime,b=a-C.Yb;0>b&&(C.Yb=a);1E3*b<ua.mh||(C.Yb+=
b,C.D.refresh())}}function ic(){function a(k,l){z.H(k,[{name:"u41",type:"1f",value:l/Oa}])}function b(){return va.labels.map(function(){return[0,0]})}var d=pa.Aa();Oa=4+va.$c;var e={width:Oa,height:d,isFloat:!0,isPot:!1,array:pa.Kf(new Float32Array(4*Oa))};U.fa&&U.fa.remove();U.fa=jc.instance(e);U.rb=ia.instance(e);U.buffer=new Uint8Array(8*Oa*d);U.nd=e.array;a("s63",.5);a("s62",1);a("s64",.5);gb=pa.xc({Za:0,x:0,y:0,T:1,rx:0,ry:0,Ga:0,Qc:b(),Ag:b(),Ea:0,Mc:0,Nc:0,Pc:0,Oc:0,lc:0});Fa=pa.xc({detected:0,
detectedRaw:0,isDetected:!1,x:0,y:0,s:1,rx:0,ry:0,rz:0,landmarks:b(),lAmb:0,lDir:0,lTheta:0,lPhi:0});Ab=pa.xc({dx:0,dy:0,wc:0,tc:0,uc:0,vc:0})}function Rb(a){var b=Math.floor(a/U.size);a-=b*U.size;b=U.size-1-b;return[(a+.5)/U.size,(b+.5)/U.size]}function kc(){var a=["u42","u43","u44","u45","u46"].map(function(b,d){return{name:b,type:"2f",value:Rb(d+2*va.lb+8)}});z.H("s65",a)}function Db(){z.H("s64",[{type:"1i",name:"u1",value:1},{type:"1i",name:"u49",value:0},{type:"2f",name:"u50",value:Z.J},{type:"1f",
name:"u51",value:.5},{type:"1f",name:"u52",value:0},{type:"1f",name:"u53",value:1}]);var a=[{type:"1i",name:"u54",value:0}],b=[{type:"1f",name:"u60",value:U.size}].concat(a);z.H("s63",[{type:"1i",name:"u49",value:1},{type:"1f",name:"u57",value:ua.hh},{type:"1f",name:"u58",value:oa.threshold},{type:"3f",name:"u56",value:[U.Z[0]*Z.J[0],U.Z[1]*Z.J[1],U.Z[2]]},{type:"1f",name:"u51",value:.5},{type:"1f",name:"u59",value:1},{type:"1f",name:"u52",value:0}].concat(b));z.H("s68",[{type:"1f",name:"u59",value:1}].concat(b));
z.H("s69",[{type:"1f",name:"u62",value:ua.zd}].concat(b));z.H("s65",a);z.H("s66",a);z.H("s62",[{type:"1i",name:"u49",value:0},{type:"1i",name:"u63",value:1},{type:"1f",name:"u65",value:Z.J[0]/oa.maxFaceWinScale},{type:"2f",name:"u64",value:[0,.5/pa.Aa()]}])}function Eb(){Cb=Ua.eg();U.size=Ua.ig();Z.J[0]=1;Z.J[1]=Z.m/Z.F;hb.B({Wb:oa.overlapFactors,Ae:oa.nScaleLevels,m:Z.m,F:Z.F,Ke:oa.scale0Factor,Z:U.Z,hd:oa.scanCenterFirst})}function Sb(a){if(null!==ba.sb)Tb(ba.sb,a);else{var b=ba.jc;"JSON"!==b.toUpperCase().split(".").pop()&&
(b+=ua.neuralNetworkPath);tb.get(b,function(d){d=JSON.parse(d);Tb(d,a)})}}function Tb(a,b){if(a.exportData){var d=a.exportData;d.rotationEulerAnglesFactors&&(U.ua=d.rotationEulerAnglesFactors);d.translationScalingFactors&&(U.Z=d.translationScalingFactors);U.Ka=d.isOutputLighting?!0:!1;U.Nb=d.isOutputFoV?!0:!1;U.oc=d.cameraFoVRangeRad||null;d.landmarksLabels&&(va.labels=d.landmarksLabels,va.lb=va.labels.length,va.$c=Math.ceil(va.lb/2));va.Fd=d.landmarksCenters?d.landmarksCenters:va.labels.map(function(){return[0,
0]});d.landmarksFactor&&(va.yc=d.landmarksFactor);d.facegenMode&&(za.mode=d.facegenMode,d.facegenDisplaceXFactor&&(za.Kd=d.facegenDisplaceXFactor))}b(a)}function Ub(a){Ua=new L({ib:a.layers,Vb:"gpuRawAvg",Ub:lc});ic();Eb();U.Ka&&kc();U.Nb&&z.H("s66",[{name:"u47",type:"2f",value:Rb(8+(U.Ka?5:0)+2*va.lb)}]);Db()}function mc(){if(Na.B({yb:ba.$,width:Z.m,height:Z.F,je:!1,debug:!1,ad:function(){ab("GLCONTEXT_LOST")},antialias:oa.antialias,premultipliedAlpha:!0}))return!0;ab("GL_INCOMPATIBLE");return!1}
function lc(){var a=pa.$d(),b=Fa[a];U.fa.Pg(1);c.viewport(0,a,1,1);z.set("s63");ba.za&&z.M("u52",b.rz);pa.Xe("u51");var d=1,e=pa.bh(gb,Fa,Z.m/Z.F);pa.ue()&&(e&&(d=0,gb[a].Ea=0,b.isDetected=!1,b.detected=0),z.M("u59",d));z.Wg("u55",hb.get(a));W.l(!1,!1);if(pa.te()||e)c.viewport(1,a,1,1),z.set("s68"),z.M("u59",d),W.l(!1,!1);pa.te()&&(U.Ka&&(c.viewport(2,a,1,1),z.set("s65"),W.l(!1,!1)),U.Nb&&(c.viewport(3,a,1,1),z.set("s66"),W.l(!1,!1)),c.viewport(4,a,va.$c,1),z.set("s69"),W.l(!1,!1));U.fa.sync()}function Vb(){C.D&&
C.D.remove();C.Mb=C.element&&C.element.isFakeVideo?!0:!1;var a=null;C.Mb?a={isFlipY:!1,array:C.element.arrayBuffer,width:C.element.videoWidth,height:C.element.videoHeight,isKeepArray:!0}:C.element&&(a={N:C.element});C.od=ia.instance(Object.assign({isPot:!1,isLinear:!0,isFloat:!1},a));C.D=C.od}function ib(){var a=[{type:"mat2",name:"u48",value:C.A}];z.H("s67",[{type:"1i",name:"u1",value:0}].concat(a));z.H("s64",a)}function jb(){var a=[.5,.5],b=C.J[1]/C.J[0],d=Na.aa()/Na.L();90===Math.abs(La.rotate)&&
(b=1/b);b>d?a[1]*=d/b:a[0]*=b/d;z.H("s63",[{name:"u61",type:"1f",value:d}]);C.A[0]=0;C.A[1]=0;C.A[2]=0;C.A[3]=0;switch(La.rotate){case 0:C.A[0]=a[0];C.A[3]=a[1];break;case 180:C.A[0]=-a[0];C.A[3]=-a[1];break;case 90:C.A[1]=a[0];C.A[2]=-a[1];break;case -90:C.A[1]=-a[0],C.A[2]=a[1]}C.ga[0]=C.A[0];C.ga[1]=C.A[1];C.ga[2]=C.A[2];C.ga[3]=C.A[3];C.gb||(C.A[1]*=-1,C.A[3]*=-1);C.gb&&C.le&&(C.ga[1]*=-1,C.ga[3]*=-1)}function Fb(){if(!C.element)return!1;var a=C.element.videoWidth,b=C.element.videoHeight,d=C.J[0]!==
a||C.J[1]!==b;d&&(C.J[0]=a,C.J[1]=b);return d}function ub(a,b){if(na===ka.error)return!1;C.element=a;Fb();b&&b();return!0}function Wb(a,b,d){a&&a();C.Wa={video:{facingMode:{ideal:La.facingMode},width:{min:La.minWidth,max:La.maxWidth,ideal:La.idealWidth},height:{min:La.minHeight,max:La.maxHeight,ideal:La.idealHeight}},audio:!1};ha.Bd(C.Wa,La.deviceId);ha.get(C.element?C.element:ha.de(),function(e){b&&b(e);d(e)},function(){ab("WEBCAM_UNAVAILABLE")},C.Wa)}function ab(a){na!==ka.error&&(na=ka.error,ba.Va&&
ba.Va(a))}var Gb=null,Ta={li:function(a){return Math.ceil(Math.log2(a))},Hi:function(a){return Math.log2(a)},Ei:function(a){return 0===Math.log2(a)%1},xh:function(a){var b=[0,0,0,0];a.forEach(function(d){b[0]+=d[0];b[1]+=d[1];b[2]+=d[2];b[3]+=d[3]});return b},yh:function(a,b,d){return Math.min(Math.max(a,b),d)},Bh:function(a){return a*Math.PI/180},Qi:function(a,b){b=Math.pow(10,b);return Math.round(a*b)/b},Ri:function(a){return Math.round(1E6*a)/1E6},mi:function(a,b){return(100*a/b).toFixed(3)},ta:function(a,
b,d){return a*(1-d)+b*d},Ii:function(a,b){return a[0]*(1-b)+a[1]*b},Jf:function(a,b){return Ta.Bf(a-b)},Bf:function(a){for(;a>Math.PI;)a-=2*Math.PI;for(;a<=-Math.PI;)a+=2*Math.PI;return a},Fh:function(a,b){return Math.abs(Ta.Jf(a,b))},nh:function(a,b){return Math.atan2(Math.sin(a)+Math.sin(b),Math.cos(a)+Math.cos(b))}},tb={get:function(a,b,d){var e=new XMLHttpRequest;e.open("GET",a,!0);e.withCredentials=!1;e.onreadystatechange=function(){4===e.readyState&&(200===e.status||0===e.status?b(e.responseText):
"undefined"!==typeof d&&d(e.status))};e.send()},jg:function(a){return new Promise(function(b,d){tb.get(a,b,d)})},ii:function(a,b,d){a+=d?"?"+tb.Nf(d):"";tb.get(a,function(e){b(JSON.parse(e))})},Li:function(a,b,d){var e=new XMLHttpRequest;e.open("POST",a,!0);e.setRequestHeader("Content-type","application/x-www-form-urlencoded");e.onreadystatechange=function(){4!==e.readyState||200!==e.status&&0!==e.status||d(e.responseText)};e.send(b)},Nf:function(a){return"string"===typeof a?a:Object.keys(a).map(function(b){return encodeURIComponent(b)+
"="+encodeURIComponent(a[b])}).join("&")},Yh:function(a,b){var d=new XMLHttpRequest;d.open("POST",a,!0);d.responseType="arraybuffer";d.onload=function(){b(d.response)};d.send()}},nc={create:function(a,b){for(var d=Array(b),e=0;e<b;++e)d[e]=a;return d},Ch:function(a,b){for(var d=0;d<a.length;++d)b[d]=a[d]},clone:function(a){for(var b=Array(a.length),d=0;d<a.length;++d)b[d]=a[d];return b},Ui:function(a,b,d){a.forEach(function(e,k){b[k]=e*d})},cj:function(a){for(var b=a.length-1;0<b;--b){var d=Math.floor(Math.random()*
(b+1)),e=a[b];a[b]=a[d];a[d]=e}},ej:function(a){return a.sort(function(b,d){return b-d})},gh:function(a){return Array.isArray(a)||a.constructor===Float32Array||a.constructor===Uint8Array}},Hb={rc:function(a,b){if(0===b||"object"!==typeof a)return a;a=Object.assign({},a);b=void 0===b||-1===b?-1:b-1;for(var d in a)a[d]=Hb.rc(a[d],b);return a},Eh:function(a){return JSON.parse(JSON.stringify(a))}},Bb={dj:function(a,b,d){a=Math.min(Math.max((d-a)/(b-a),0),1);return a*a*(3-2*a)},Uc:function(a,b,d){return Math.min(Math.max((d-
a)/(b-a),0),1)},Qh:function(a,b,d,e){return Math.pow(Math.min(Math.max((e-a)/(b-a),0),1),d)},ij:function(){return 0},Ki:function(){return 1},Gi:function(a){return a},Nh:function(a){return a*a},Sh:function(a){return a*(2-a)},Kh:function(a){return.5>a?2*a*a:-1+(4-2*a)*a},Ih:function(a){return a*a*a},Rh:function(a){return--a*a*a+1},Jh:function(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},Oh:function(a){return a*a*a*a},Th:function(a){return 1- --a*a*a*a},Lh:function(a){return.5>a?8*a*a*a*a:1-8*--a*
a*a*a},Ph:function(a){return a*a*a*a*a},Uh:function(a){return 1+--a*a*a*a*a},Mh:function(a){return.5>a?16*a*a*a*a*a:1+16*--a*a*a*a*a}},oc={Uf:function(a,b,d){switch(a){case "relu":return d+"=max(vec4(0.),"+b+");";case "elu":return d+"=mix(exp(-abs("+b+"))-vec4(1.),"+b+",step(0.,"+b+"));";case "elu01":return d+"=mix(0.1*exp(-abs("+b+"))-vec4(0.1),"+b+",step(0.,"+b+"));";case "arctan":return d+"=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";case "gelu":return d+"="+d+";\n          vec4 zou="+
b+";\n          vec4 polyZou=0.7978845608028654*(zou+0.044715*zou*zou*zou);\n          vec4 exZou=exp(-abs(polyZou));\n          vec4 exZou2=exZou*exZou;\n          vec4 tanhZou=sign(polyZou)*(vec4(1.)-exZou2)/(vec4(1.)+exZou2);\n          "+d+"=0.5*zou*(vec4(1.)+tanhZou);";default:return!1}}},z=function(){function a(q,v,H){v=q.createShader(v);q.shaderSource(v,H);q.compileShader(v);return q.getShaderParameter(v,q.COMPILE_STATUS)?v:null}function b(q,v,H){v=a(q,q.VERTEX_SHADER,v);H=a(q,q.FRAGMENT_SHADER,
H);q===c&&n.push(v,H);var T=q.createProgram();q.attachShader(T,v);q.attachShader(T,H);q.linkProgram(T);return T}function d(q){return["float","sampler2D","int"].map(function(v){return"precision "+q+" "+v+";\n"}).join("")}function e(q,v){v.u=v.u?!0:!1;if(!v.u){v.ha=v.ha||"precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5);}";v.wb=v.wb||["a0"];v.Ta=v.Ta||[2];v.precision=v.precision||x;v.id=w++;void 0!==v.Me&&(v.Me.forEach(function(fa,qa){v.g=
v.g.replace(fa,v.$b[qa])}),v.Me.splice(0));v.vd=0;v.Ta.forEach(function(fa){v.vd+=4*fa});var H=d(v.precision);v.Fa=b(q,H+v.ha,H+v.g);v.C={};v.i.forEach(function(fa){v.C[fa]=q.getUniformLocation(v.Fa,fa)});v.attributes={};v.Ua=[];v.wb.forEach(function(fa){var qa=q.getAttribLocation(v.Fa,fa);v.attributes[fa]=qa;v.Ua.push(qa)});if(v.j){q.useProgram(v.Fa);r=v;h=v.id;for(var T in v.j)q.uniform1i(v.C[T],v.j[T])}v.Da=!0}}function k(q){Pa.Tg(m);h!==q.id&&(m.S(),h=q.id,r=q,c.useProgram(q.Fa),q.Ua.forEach(function(v){0!==
v&&c.enableVertexAttribArray(v)}))}function l(q,v,H){e(q,v,H);q.useProgram(v.Fa);q.enableVertexAttribArray(v.attributes.a0);h=-1;return r=v}function u(){return{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],j:{u1:0}}}var n=[],h=-1,r=null,w=0,B=!1,x="highp",t=["u1"],I=["u0"],M={u1:0},f={u0:0},A={u1:0,u2:1},K={u1:0,u3:1},E=["u1","u3","u4"],D=["u5","u6"],g={u5:0},p=["u7","u8","u9","u10"],G={u7:0,u8:1},N={s0:u(),s1:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
i:t,j:M,precision:"lowp"},s2:{g:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],j:A},s3:{g:"uniform sampler2D u1;uniform vec2 u11,u12;varying vec2 vv0;void main(){vec2 a=vv0*u11+u12;gl_FragColor=texture2D(u1,a);}",i:["u1","u11","u12"],j:M,u:!0},s4:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",i:t,j:M},s5:{g:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",
i:["u1","u2"],j:A},s6:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:t,j:M},s7:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:t,j:M},s8:{g:"uniform sampler2D u0;uniform float u11;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u11;}",i:["u0","u11"],j:f},s9:{g:"uniform sampler2D u0;uniform float u11;varying vec2 vv0;const vec4 f=vec4(.25),g=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u11,f);gl_FragColor=b*g;}",
i:["u0","u11"],j:f},s10:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:t,j:M},s11:{g:"uniform sampler2D u1,u13;uniform float u14;const vec4 f=vec4(1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u13,vv0);gl_FragColor=mix(b,a,u14*f);}",i:["u1","u13","u14"],j:{u1:0,u13:1}},s12:{g:"uniform sampler2D u1;uniform vec2 u15;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u15)+texture2D(u1,vv0+u15*vec2(1.,-1.))+texture2D(u1,vv0+u15*vec2(-1.,-1.))+texture2D(u1,vv0+u15*vec2(-1.,1.)));}",
i:["u1","u15"],j:M},s13:{g:"uniform sampler2D u1;varying vec2 vv0;vec4 f(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),g=exp2(c);vec3 h=clamp(b/g,0.,1.);return vec4(h,(c+128.)/256.);}void main(){vec3 a=texture2D(u1,vv0).rgb;gl_FragColor=f(a);}",i:t,j:M,u:!0},s14:{g:"uniform sampler2D u1;varying vec2 vv0;vec3 f(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=vec4(f(a),1.);}",i:t,j:M,u:!0},
s15:{g:"uniform sampler2D u1;uniform vec4 u16;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u16);gl_FragColor=j(a);}",
i:["u1","u16"],j:M},s16:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:I,j:f,u:!0},s17:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:I,j:f,u:!0},s18:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);const float g=.797885,h=.044715;vec4 i(vec4 a){vec4 b=exp(-abs(a)),c=b*b,d=sign(a)*(e-c)/(e+c);return d;}void main(){vec4 a=texture2D(u0,vv0),b=a+h*a*a*a,c=i(g*b);gl_FragColor=.5*a*(e+c);}",
i:I,j:f,u:!0},s19:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:I,j:f,u:!0},s20:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(a)-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:I,j:f},s21:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",i:I,j:f},s22:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=2.*atan(e*texture2D(u0,vv0))/e;}",
i:I,j:f,u:!0},s23:{g:"uniform sampler2D u0,u17;uniform float u18;const vec2 e=vec2(.5);const float f=1e-5;const vec4 g=vec4(1.),i=vec4(0.);varying vec2 vv0;void main(){vec4 a=texture2D(u17,e);float b=u18*u18;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",i:["u0","u17","u18"],j:{u0:0,u17:1},u:!0},s24:{g:"uniform sampler2D u1;uniform vec2 u19;varying vec2 vv0;void main(){float a=u19.x*u19.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u19.y),f=floor(u19.x*fract(b*u19.y)),g=(f*u19.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
i:["u1","u19"],j:M},s25:{g:"uniform sampler2D u8,u7,u20;varying vec2 vv0;void main(){vec4 a=texture2D(u20,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u8,b),f=texture2D(u7,c);gl_FragColor=d*f;}",i:["u8","u7","u20"],j:Object.assign({u20:2},G),u:!0},s26:{g:"uniform float u9,u10;uniform sampler2D u8,u7;varying vec2 vv0;void main(){vec2 b=fract(vv0*u9);float a=u9*u10;vec2 c=(vec2(.5)+floor(a*vv0))/a;vec4 d=texture2D(u8,c),f=texture2D(u7,b);gl_FragColor=d*f;}",i:p,j:G},s27:{g:"uniform float u9,u10;uniform vec2 u21;uniform sampler2D u8,u7;varying vec2 vv0;void main(){float a=u9*u10;vec2 b=mod(vv0*u21,vec2(1.)),c=floor(vv0*u21)/u21,d=c+fract(b*u9)/u21,f=(vec2(.5)+floor(a*b))/a;vec4 g=texture2D(u8,f),h=texture2D(u7,d);gl_FragColor=g*h;}",
i:["u21"].concat(p),j:G,u:!0},s28:{g:"uniform float u9,u10;uniform sampler2D u8,u7,u23,u24,u25,u26;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 c=fract(vv0*u9),d=vv0;float h=u9*u10;d=(.5+floor(h*vv0))/h;vec4 l=texture2D(u8,d),m=texture2D(u7,c),a=texture2D(u26,d);a=floor(.5+a*255.);vec4 n=texture2D(u23,c),o=texture2D(u24,c),p=texture2D(u25,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b,r=i*m+j*n+k*o+q*p;gl_FragColor=l*r;}",
i:["u26","u23","u24","u25"].concat(p),j:Object.assign({u26:3,u23:4,u24:5,u25:6},G),u:!0},s29:{g:"uniform sampler2D u8,u7,u3;uniform float u9,u27,u28,u10;uniform vec2 u29;varying vec2 vv0;const vec2 f=vec2(1.),l=vec2(0.);void main(){vec2 c=floor(u27*vv0),d=u27*vv0-c;float g=u9/u27;vec2 h=floor(d*g),i=d*g-h,j=(c+i)/u27;float m=u27*u10/u9;vec2 b=m*h,n=floor(.5*(u10-1.)*(f-u29));b=floor(u29*b+n);vec2 a=(b+i*u28)/u10;a+=.25/u10;vec2 k=step(a,f)*step(l,a);vec4 o=texture2D(u8,j),p=texture2D(u7,a),q=o*p,r=texture2D(u3,j);gl_FragColor=(q*u28*u28+r)*k.x*k.y;}",
i:["u27","u28","u3","u29"].concat(p),j:Object.assign({u3:2},G)},s30:{g:"uniform sampler2D u8,u7;varying vec2 vv0;void main(){vec4 a=texture2D(u8,vv0),b=texture2D(u7,vv0);gl_FragColor=a*b;}",i:["u8","u7"],j:G,u:!0},s31:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0)+u4*texture2D(u1,vv0);}",i:E,j:K},s32:{g:"uniform sampler2D u1,u3;uniform vec2 u21;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0*u21)+u4*texture2D(u1,vv0);}",
i:["u21"].concat(E),j:K,u:!0},s33:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",i:E,j:K,u:!0},s34:{g:"uniform sampler2D u1,u3;uniform vec2 u21;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0*u21)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",
i:["u21"].concat(E),j:K,u:!0},s35:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 h=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 b=floor(gl_FragCoord.xy);vec3 d=b.x*vec3(1.)+vec3(0.,1.,2.);float c=mod(b.y,2.);vec4 f=vec4(c,(1.-c)*step(mod(d,vec3(3.)),vec3(.5)));mat4 g=mat4(a.rgba,a.gbar,a.barg,a.argb);gl_FragColor=g*f;}",i:E,j:K,u:!0},s36:{g:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:t,j:M,precision:"lowp"},s37:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u30;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u30)).rgb,c=texture2D(u1,vv0+vec2(u30,u30)).rgb,d=texture2D(u1,vv0+vec2(u30,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u30"],j:M,precision:"lowp"},s38:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u30;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u30)).rgb,c=texture2D(u1,vv0+vec2(u30,u30)).rgb,d=texture2D(u1,vv0+vec2(u30,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u30"],j:M,precision:"lowp"},s39:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u31;const vec4 f=vec4(1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u31,vv0.y-u31))*1.,a-=texture2D(u1,vec2(vv0.x-u31,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u31,vv0.y+u31))*1.,a+=texture2D(u1,vec2(vv0.x+u31,vv0.y-u31))*1.,a+=texture2D(u1,vec2(vv0.x+u31,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u31,vv0.y+u31))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u31,vv0.y-u31))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u31))*2.,b-=texture2D(u1,vec2(vv0.x+u31,vv0.y-u31))*1.,b+=texture2D(u1,vec2(vv0.x-u31,vv0.y+u31))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u31))*2.,b+=texture2D(u1,vec2(vv0.x+u31,vv0.y+u31))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u31"],j:A,u:!0},s40:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u31;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u31,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u31"],j:A,u:!0},s41:{g:"uniform sampler2D u5;uniform vec2 u6;varying vec2 vv0;const vec2 f=vec2(1.),g=vec2(.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=f/u6,c=u6/2.,d=floor(vv0*c)+g,j=d/c,b=j-a*.5;vec4 k=texture2D(u5,b),l=texture2D(u5,b+a*h),m=texture2D(u5,b+a*i),n=texture2D(u5,b+a),o=max(k,l),p=max(m,n);gl_FragColor=max(o,p);}",
i:D,j:g,u:!0},s42:{g:"uniform sampler2D u5;uniform vec2 u6;varying vec2 vv0;const vec2 k=vec2(1.),l=vec2(1.,0.),m=vec2(0.,1.),n=vec2(2.,0.),o=vec2(0.,2.);vec4 e(vec2 b,vec2 a){vec4 c=texture2D(u5,a),d=texture2D(u5,a+b*l),f=texture2D(u5,a+b*m),g=texture2D(u5,a+b),h=max(c,d),i=max(f,g);return max(h,i);}void main(){vec2 a=k/u6,c=u6/4.,d=4.*floor(vv0*c),f=d/u6,b=f+a*.5;vec4 g=e(a,b),h=e(a,b+a*n),i=e(a,b+a*2.),p=e(a,b+a*o),q=max(g,h),r=max(i,p);gl_FragColor=max(q,r);}",i:D,j:g,u:!0},s43:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
i:["u1"],j:M,precision:"lowp",u:!0},s44:{g:"uniform sampler2D u1;uniform vec2 u15;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u15)+2002./e*texture2D(u1,vv0-2.*u15)+3003./e*texture2D(u1,vv0-u15)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u15)+2002./e*texture2D(u1,vv0+2.*u15)+1001./e*texture2D(u1,vv0+3.*u15);gl_FragColor=a;}",i:["u15","u1"],j:M,precision:"lowp",u:!0},s45:{g:"uniform sampler2D u1,u17,u32;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u17,vv0),b=texture2D(u32,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",
i:["u1","u17","u32"],j:{u1:0,u17:1,u32:2},u:!0}},y={s46:{g:"uniform float u9,u33;uniform sampler2D u8,u7,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.),ONE2=vec2(1.),HALF2=vec2(.5),EPS2=vec2(1e-5);void main(){vec4 sum=texture2D(u3,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u9,xyTo=floor(vv0*u9+eps2);float weightSize=toSparsity*u9;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u33*(xyPatch-halfFromSparsity))/u9,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u8,uvWeight)*texture2D(u7,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u9","u8","u7","u3","u33"],$b:["1.1111","gl_FragColor\\*=2.2222;"]},s47:{g:"uniform float u9,u33,u10;uniform sampler2D u8,u7,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.),ONE2=vec2(1.),HALF2=vec2(.5),EPS2=vec2(1e-4);void main(){vec4 sum=texture2D(u3,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u10,xyTo=floor(vv0*u9+eps2);float weightSize=fromSparsity*u10;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u9;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u33*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u10,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u8,uvWeight)*texture2D(u7,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u9 u10 u8 u7 u3 u33".split(" "),$b:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},Q=null,R=null,m={Ob:function(){return B},B:function(){if(!B){Q=Hb.rc(N,2);R=Hb.rc(y,2);x="highp";c.getShaderPrecisionFormat&&(c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.MEDIUM_FLOAT),c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.LOW_FLOAT));for(var q in Q)e(c,Q[q],q);z.set("s0");c.enableVertexAttribArray(0);B=!0}},tb:function(q){q.forEach(function(v){m.Cd(v)})},Cd:function(q){Q[q.id]=q;e(c,q,q.id)},mg:function(q,
v,H){v||(v=q);Q[v]=Object.create(R[q]);Q[v].rg=!0;R[q].$b&&R[q].$b.forEach(function(T,fa){var qa="";"gl_Frag"===T.substring(0,7)?(T=new RegExp("[,;]?"+T,"g"),qa=";"):T=new RegExp(T,"g");Q[v].g=Q[v].g.replace(T,qa+H[fa])});e(c,Q[v],v)},set:function(q){var v=Q[q];v.u&&(v.u=!1,e(c,v,q));k(v)},ob:function(q){return l(q,u(),"s48")},ld:function(q){return l(q,{g:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:x},"s49")},Qf:function(q){return"undefined"===typeof Q[q]?!1:Q[q].Da},S:function(){-1!==
h&&(h=-1,r.Ua.forEach(function(q){0!==q&&c.disableVertexAttribArray(q)}))},md:function(){var q=0;r.Ua.forEach(function(v,H){H=r.Ta[H];c.vertexAttribPointer(v,H,c.FLOAT,!1,r.vd,q);q+=4*H})},Pd:function(){c.enableVertexAttribArray(0)},Oa:function(){m.ac(c)},ac:function(q){q.vertexAttribPointer(r.Ua[0],2,q.FLOAT,!1,8,0)},Zi:function(q,v){c.uniform1i(r.C[q],v)},M:function(q,v){c.uniform1f(r.C[q],v)},U:function(q,v,H){c.uniform2f(r.C[q],v,H)},Vg:function(q,v){c.uniform2fv(r.C[q],v)},Wg:function(q,v){c.uniform3fv(r.C[q],
v)},$i:function(q,v,H,T){c.uniform3f(r.C[q],v,H,T)},Xg:function(q,v,H,T,fa){c.uniform4f(r.C[q],v,H,T,fa)},Re:function(q,v){c.uniform4fv(r.C[q],v)},Se:function(q,v){c.uniformMatrix2fv(r.C[q],!1,v)},aj:function(q,v){c.uniformMatrix3fv(r.C[q],!1,v)},bj:function(q,v){c.uniformMatrix4fv(r.C[q],!1,v)},H:function(q,v){m.set(q);v.forEach(function(H){switch(H.type){case "4f":c.uniform4fv(r.C[H.name],H.value);break;case "3f":c.uniform3fv(r.C[H.name],H.value);break;case "2f":c.uniform2fv(r.C[H.name],H.value);
break;case "1f":c.uniform1f(r.C[H.name],H.value);break;case "1i":c.uniform1i(r.C[H.name],H.value);break;case "mat2":c.uniformMatrix2fv(r.C[H.name],!1,H.value);break;case "mat3":c.uniformMatrix3fv(r.C[H.name],!1,H.value);break;case "mat4":c.uniformMatrix4fv(r.C[H.name],!1,H.value)}})},ki:function(){return"lowp"},o:function(){m.S();c.disableVertexAttribArray(0);for(var q in Q){var v=Q[q];v.Da&&(v.Da=!1,c.deleteProgram(v.Fa));v.rg&&delete Q[q]}n.forEach(function(H){c.deleteShader(H)});n.splice(0);w=
0;B=!1;r=null;h=-1}};return m}(),c=null,Na=function(){function a(t){console.log("ERROR in ContextFF: ",t);return!1}function b(){return navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1")}function d(t,I,M){t.setAttribute("width",I);t.setAttribute("height",M)}function e(t){if(b())return!1;var I=document.createElement("canvas");d(I,5,5);var M=null;try{M=I.getContext("webgl2",t)}catch(f){return!1}if(!M)return!1;k(M);ja.Qd(M);t=ja.sc(M);if(!t.na&&!t.pa)return Va.o(),ja.reset(),!1;M=Va.Dd(M,
t);Va.o();ja.reset();return M?!0:!1}function k(t){t.clearColor(0,0,0,0);t.disable(t.DEPTH_TEST);t.disable(t.BLEND);t.disable(t.DITHER);t.disable(t.STENCIL_TEST);t.disable(t.CULL_FACE);t.GENERATE_MIPMAP_HINT&&t.FASTEST&&t.hint(t.GENERATE_MIPMAP_HINT,t.FASTEST);t.disable(t.SAMPLE_ALPHA_TO_COVERAGE);t.disable(t.SAMPLE_COVERAGE);t.depthFunc(t.LEQUAL);t.clearDepth(1)}var l=null,u=null,n=null,h=!0,r=null,w=null,B=[],x={L:function(){return l.width},aa:function(){return l.height},ci:function(){return l},
ai:function(){return c},qa:function(){return h},flush:function(){c.flush()},Hc:function(){Ka.reset();Ka.ja();x.Je()},Je:function(){ia.reset();W.reset();z.S();z.Pd();c.disable(c.DEPTH_TEST);c.disable(c.BLEND);W.Ia();z.Oa()},Xf:function(){r||(r=new Uint8Array(l.width*l.height*4));c.readPixels(0,0,l.width,l.height,c.RGBA,c.UNSIGNED_BYTE,r);return r},di:function(){return l.toDataURL("image/jpeg")},ei:function(){Ka.P();u||(u=document.createElement("canvas"),n=u.getContext("2d"));d(u,l.width,l.height);
for(var t=x.Xf(),I=n.createImageData(u.width,u.height),M=u.width,f=u.height,A=I.data,K=0;K<f;++K)for(var E=f-K-1,D=0;D<M;++D){var g=4*(K*M+D),p=4*(E*M+D);A[g]=t[p];A[g+1]=t[p+1];A[g+2]=t[p+2];A[g+3]=t[p+3]}n.putImageData(I,0,0);return u.toDataURL("image/png")},Wf:function(t){!u&&t&&(u=document.createElement("canvas"),n=u.getContext("2d"));var I=t?u:document.createElement("canvas");d(I,l.width,l.height);(t?n:I.getContext("2d")).drawImage(l,0,0);return I},B:function(t){t=Object.assign({oa:null,ad:null,
yb:null,Jd:null,width:512,height:512,premultipliedAlpha:!1,je:!0,antialias:!1,debug:!1,Dh:!1},t);t.oa?(c=t.oa,l=t.oa.canvas):t.Jd&&!t.yb?l=document.getElementById(t.Jd):t.yb&&(l=t.yb);l||(l=document.createElement("canvas"));l.width=t.width;l.height=t.height;if(c)h=c instanceof WebGL2RenderingContext;else{h=!0;var I={antialias:t.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:t.premultipliedAlpha,stencil:!1,depth:t.je,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance"};
navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&(I.antialias=!1);var M=e(I);M||!I.antialias||b()||(I.antialias=!1,M=e(I));M&&(c=l.getContext("webgl2",I));c?h=!0:((c=l.getContext("webgl",I))||(c=l.getContext("experimental-webgl",I)),h=!1)}if(!c)return a("WebGL1 and 2 are not enabled");t.ad&&l.addEventListener&&(w=t.ad,l.addEventListener("webglcontextlost",w,!1));if(!ja.B())return a("Not enough GL capabilities");k(c);z.B();W.B();Va.Dd(c,ja.Vf());B.forEach(function(f){f(c)});
B.splice(0);return!0},sh:function(){return new Promise(function(t){c?t(c):B.push(t)})},o:function(){c&&(ja.o(),z.o(),Va.o());w&&(l.removeEventListener("webglcontextlost",w,!1),w=null);c=r=n=u=l=null;B.splice(0)}};return x}(),Pa=function(){function a(){null===b&&("undefined"!==typeof z?b=z:"undefined"!==typeof JEShaders&&(b=JEShaders))}var b=null;return{reset:function(){b=null},Tg:function(d){b!==d&&(b&&b.S(),b=d)},Ob:function(){return b.Ob()},Oa:function(){return b.Oa()},ac:function(d){return b.ac(d)},
md:function(){return b.md()},S:function(){return b.S()},set:function(d){a();return b.set(d)},ob:function(d){a();return b.ob(d)},ld:function(d){a();return b.ld(d)}}}(),Sa=function(){function a(m){c.bindTexture(c.TEXTURE_2D,m)}function b(m){N[0]=m;m=y[0];var q=m>>16&32768,v=m>>12&2047,H=m>>23&255;return 103>H?q:142<H?q|31744|((255==H?0:1)&&m&8388607):113>H?(v|=2048,q|(v>>114-H)+(v>>113-H&1)):q=(q|H-112<<10|v>>1)+(v&1)}function d(m){var q=new Uint16Array(m.length);m.forEach(function(v,H){q[H]=b(v)});
return q}function e(){if(null!==Q.Fc)return Q.Fc;var m=l(d([.5,.5,.5,.5]),!0);return null===m?!0:Q.Fc=m}function k(){if(null!==Q.Gc)return Q.Gc;var m=l(new Uint8Array([127,127,127,127]),!1);return null===m?!0:Q.Gc=m}function l(m,q){if(!Pa.Ob()||!M)return null;var v=null,H=Math.sqrt(m.length/4);try{var T=c.getError();if("FUCKING_BIG_ERROR"===T)return!1;v=R.instance({isFloat:!1,W:q,array:m,width:H});T=c.getError();if(T!==c.NO_ERROR)return!1}catch(fa){return!1}Ca.P();c.viewport(0,0,H,H);c.clearColor(0,
0,0,0);c.clear(c.COLOR_BUFFER_BIT);Pa.set("s0");v.xa(0);Ba.l(!0,!0);m=4*H*H;q=new Uint8Array(m);c.readPixels(0,0,H,H,c.RGBA,c.UNSIGNED_BYTE,q);H=!0;for(T=0;T<m;++T)H=H&&3>Math.abs(q[T]-127);v.remove();Ca.ja();return H}var u=0,n=null,h=0,r=null,w=null,B=null,x=null,t=null,I=null,M=!1,f=[],A={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,qe:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,N:null,Ec:null,qg:!1,W:!1,
I:null,Tb:4,Vc:0},K=!1,E=null,D=null,g=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],p=!1,G=!1,N=new Float32Array(1),y=new Int32Array(N.buffer),Q={Fc:null,Gc:null},R={B:function(){M||(t=[c.RGBA,null,c.RGBA,c.RGBA],I=[c.RGBA,null,c.RGBA,c.RGBA],n=[c.TEXTURE0,c.TEXTURE1,c.TEXTURE2,c.TEXTURE3,c.TEXTURE4,c.TEXTURE5,c.TEXTURE6,c.TEXTURE7],p="undefined"!==typeof JEContext,G="undefined"!==typeof ja,p&&JEContext.Fi()&&n.push(c.TEXTURE8,c.TEXTURE9),r=[-1,-1,-1,-1,-1,-1,-1,-1],x=[c.UNSIGNED_BYTE,c.FLOAT,c.FLOAT],
M=!0)},Xi:function(){c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR)},Yi:function(){c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST)},lg:function(){if(!w){for(var m=new Float32Array(16384),q=0;16384>q;++q)m[q]=2*Math.random()-1;w={random:R.instance({isFloat:!0,isPot:!0,array:m,width:64}),$e:R.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,
0,0,0])})}}R.lh()},Pe:function(m){c.framebufferTexture2D(Ca.Cc(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,m,0)},ui:function(){return w.$e},lh:function(){x[1]=ja.Bc(c)},Rg:function(){I=t=[c.RGBA,c.RGBA,c.RGBA,c.RGBA]},Ie:function(m){z.set("s1");Ca.P();var q=m.L(),v=m.aa();c.viewport(0,0,q,v);m.h(0);Ba.l(!1,!1)},Oi:function(m,q){R.Ie(m);c.readPixels(0,0,m.L(),m.aa(),c.RGBA,c.UNSIGNED_BYTE,q)},Pi:function(m,q){R.Ie(m);return ja.Zb(0,0,m.L(),m.aa(),q)},Xd:function(m,q,v,H,T,fa,qa){m.activeTexture(m.TEXTURE0);
var Qa=m.createTexture();m.bindTexture(m.TEXTURE_2D,Qa);T=T instanceof Float32Array?T:new Float32Array(T);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.NEAREST);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.NEAREST);m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,fa);m.texImage2D(m.TEXTURE_2D,0,m.RGBA,v,H,0,m.RGBA,m.FLOAT,T);m.bindTexture(m.TEXTURE_2D,null);m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,
!1);qa&&(Ca.ja(),z.ob(m));m.viewport(0,0,v,H);m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,q,0);m.bindTexture(m.TEXTURE_2D,Qa);qa?Ba.l(!0,!0):W.Eb(m);m.deleteTexture(Qa);M&&(r[0]=-1,B=null,u=0)},kc:function(m){m!==u&&(c.activeTexture(n[m]),u=m)},instance:function(m){var q;function v(){aa=void 0!==F.N.videoWidth?F.N.videoWidth:F.N.width;ca=void 0!==F.N.videoHeight?F.N.videoHeight:F.N.height}function H(J){var Y=c.getError();if("FUCKING_BIG_ERROR"===Y)return!1;c.texImage2D(c.TEXTURE_2D,
0,wa,sa,ta,J);Y=c.getError();Y!==c.NO_ERROR&&sa!==c.RGBA&&(sa=c.RGBA,c.texImage2D(c.TEXTURE_2D,0,wa,sa,ta,J));return!0}function T(){if(!Xb){a(Ga);Wa&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,Wa);F.isPot?(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,F.isMirrorX?c.MIRRORED_REPEAT:c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,F.isMirrorY?c.MIRRORED_REPEAT:c.REPEAT)):(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE));F.isAnisotropicFiltering&&
"undefined"!==typeof JESETTINGS&&c.texParameterf(c.TEXTURE_2D,JEContext.fi().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.oh);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,F.isLinear?c.LINEAR:c.NEAREST);var J=F.isMipmap&&!kb;c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,F.qe?c.LINEAR_MIPMAP_LINEAR:F.isLinear?J?c.NEAREST_MIPMAP_LINEAR:c.LINEAR:J?c.NEAREST_MIPMAP_NEAREST:c.NEAREST);sa=t[F.Tb-1];wa=I[F.Tb-1];ta=x[Ib];ja.qa()&&(J=ja.Zf(),sa===c.RGBA&&ta===c.FLOAT?F.isMipmap||F.isLinear?wa=Va.ag(c):ja.Ed()?
J&&(wa=J):wa=c.RGBA16F||c.RGBA:sa===c.RGB&&ta===c.FLOAT&&J&&(wa=J,sa=c.RGBA));if(F.W&&!F.isFloat||F.isFloat&&F.isMipmap&&Va.wg())wa=ja.$f(),ta=ja.Bc(c);F.Vc&&(vb=F.Vc);F.isSrgb&&4===F.Tb&&(sa=JEContext.si());if(F.N)H(F.N);else if(F.url)H(bb);else if(Ma){J=Ma;try{"FUCKING_BIG_ERROR"!==c.getError()&&(c.texImage2D(c.TEXTURE_2D,0,wa,aa,ca,0,sa,ta,J),c.getError()!==c.NO_ERROR&&(c.texImage2D(c.TEXTURE_2D,0,wa,aa,ca,0,sa,ta,null),c.getError()!==c.NO_ERROR&&c.texImage2D(c.TEXTURE_2D,0,c.RGBA,aa,ca,0,c.RGBA,
c.UNSIGNED_BYTE,null)))}catch(Cc){c.texImage2D(c.TEXTURE_2D,0,wa,aa,ca,0,sa,ta,null)}F.isKeepArray||(Ma=null)}else J=c.getError(),"FUCKING_BIG_ERROR"!==J&&(c.texImage2D(c.TEXTURE_2D,0,wa,aa,ca,0,sa,ta,null),J=c.getError(),J!==c.NO_ERROR&&(sa=c.RGBA,F.W&&ta!==c.FLOAT&&(ta=c.FLOAT,c.texImage2D(c.TEXTURE_2D,0,wa,aa,ca,0,sa,ta,null))));if(F.isMipmap)if(!kb&&ma)ma.Fb(),wb=!0;else if(kb){J=Math.log2(Math.min(aa,ca));lb=Array(1+J);lb[0]=Ga;for(var Y=1;Y<=J;++Y){var Aa=Math.pow(2,Y),da=aa/Aa;Aa=ca/Aa;var cb=
c.createTexture();a(cb);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texImage2D(c.TEXTURE_2D,0,wa,da,Aa,0,sa,ta,null);a(null);lb[Y]=cb}wb=!0}a(null);r[u]=-1;Wa&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1);mb=!0;F.I&&ma&&(F.I(ma),F.I=null)}}function fa(){for(var J=aa*ca,Y=2*J,Aa=3*J,da=0;da<J;++da)Ra[0][da]=nb[da],Ra[1][da]=nb[da+J],Ra[2][da]=nb[da+Y],Ra[3][da]=nb[da+Aa]}function qa(){var J=aa*ca*4;Xa=[new Uint8Array(J),new Uint8Array(J),
new Uint8Array(J),new Uint8Array(J)];Ra=[new Float32Array(Xa[0].buffer),new Float32Array(Xa[1].buffer),new Float32Array(Xa[2].buffer),new Float32Array(Xa[3].buffer)];xb=new Uint8Array(4*J);nb=new Float32Array(xb.buffer);ob=!0}function Qa(){q=new Uint8Array(aa*ca*4);Yb=new Float32Array(q.buffer);Jb=!0}var F=Object.assign({},A,m),pb=h++;null===F.isFlipY&&(F.isFlipY=F.url?!0:!1);F.data&&(F.array="string"===typeof F.data?xa(F.data):F.isFloat?new Float32Array(F.data):new Uint8Array(F.data),F.isFlipY=!1);
var Ib=0,Zb=F.N?!0:!1,qb=null,Kb=null,$b=!1;F.W=F.W||F.isFloat;F.W&&(Ib=1);!F.qg&&F.isFloat&&G&&!ja.Ed()&&(F.isFloat=!1);F.isFloat&&(Ib=2);F.isAnisotropicFiltering&&p&&!JEContext.yi()&&(F.isAnisotropicFiltering=!1);var Ga=F.Ec||c.createTexture(),bb=null,Ma=!1,aa=0,ca=0,mb=!1,Xb=!1,ob=!1,Ra=null,Xa=null,xb=null,nb=null,wa=null,sa=null,ta=null,Wa=F.isFlipY,pc=(m=F.W&&F.isMipmap)&&Va.wf(),kb=m&&!pc?!0:!1,lb=null,vb=-1,ac=-1,wb=!1;var Jb=!1;var Yb=q=null;F.width&&(aa=F.width,ca=F.height?F.height:aa);
var ma={get:function(){return Ga},L:function(){return aa},aa:function(){return ca},vi:function(){return F.url},zi:function(){return F.isFloat},Bi:function(){return F.W},Wi:function(J){Ga=J},Ci:function(){return F.isLinear},Fb:function(){c.generateMipmap(c.TEXTURE_2D)},tf:function(J,Y){kb?(J||(J=ma.ae()),R.kc(Y),a(lb[J]),r[Y]=-1):ma.h(Y)},ae:function(){-1===vb&&(vb=Math.log2(aa));return vb},Qe:function(J){c.TEXTURE_MAX_LEVEL&&c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAX_LEVEL,J)},Tf:function(J){J||(J=
ma.ae());if(kb){z.set("s12");R.kc(0);for(var Y=aa,Aa=ca,da=1;da<=J;++da)Y/=2,Aa/=2,z.U("u15",.25/Y,.25/Aa),c.viewport(0,0,Y,Aa),a(lb[da-1]),c.framebufferTexture2D(Ca.Cc(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,lb[da],0),Ba.l(!1,1===da);r[0]=-1}else J!==ac&&(ac=J,ma.Qe(J)),ma.Fb()},Ug:function(J){(Zb=!nc.gh(J))?(Ma=null,F.N=J,v()):Ma=J},h:function(J){if(!mb)return!1;R.kc(J);if(r[J]===pb)return!1;a(Ga);r[J]=pb;return!0},xa:function(J){c.activeTexture(n[J]);u=J;a(Ga);r[J]=pb},v:function(){B=ma;R.Pe(Ga)},O:function(){c.viewport(0,
0,aa,ca);B=ma;R.Pe(Ga)},td:R.td,Oe:function(J,Y){aa=J;ca=Y},resize:function(J,Y){ma.Oe(J,Y);T()},clone:function(J){J=R.instance({width:aa,height:ca,W:F.W,isFloat:F.isFloat,isLinear:F.isLinear,isMirrorY:F.isMirrorY,isFlipY:J?!Wa:Wa,isPot:F.isPot});Pa.set("s0");Ca.ja();J.O();ma.h(0);Ba.l(!0,!0);return J},Yg:function(){c.viewport(0,0,aa,ca)},remove:function(){c.deleteTexture(Ga);Xb=!0;f.splice(f.indexOf(ma),1);ma=null},refresh:function(){ma.xa(0);Wa&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);Zb?c.texImage2D(c.TEXTURE_2D,
0,wa,sa,ta,F.N):c.texImage2D(c.TEXTURE_2D,0,wa,aa,ca,0,sa,ta,Ma);Wa&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},Ge:function(){ob||qa();c.readPixels(0,0,aa,4*ca,c.RGBA,c.UNSIGNED_BYTE,xb);fa();return Ra},Lg:function(){ob||qa();return ja.Zb(0,0,aa,4*ca,xb).then(function(){fa();return Ra})},Ng:function(){Jb||Qa();c.readPixels(0,0,aa,ca,c.RGBA,c.UNSIGNED_BYTE,q);return Yb},Mg:function(){Jb||Qa();return ja.Zb(0,0,aa,ca,q)},Md:function(J){Ca.P();z.set("s15");ma.h(0);if(J)c.viewport(0,0,aa,ca),z.Xg("u16",
.25,.25,.25,.25),Ba.l(!1,!0);else for(J=0;4>J;++J)c.viewport(0,ca*J,aa,ca),z.Re("u16",g[J]),Ba.l(!1,0===J)},Qa:function(J){var Y=ta===x[0]&&!k();a(Ga);Wa&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);Y?($b||(qb=document.createElement("canvas"),qb.width=aa,qb.height=ca,Kb=qb.getContext("2d"),Kb.createImageData(aa,ca),$b=!0),null.data.set(J),Kb.putImageData(null,0,0),c.texImage2D(c.TEXTURE_2D,0,wa,sa,ta,qb)):c.texImage2D(c.TEXTURE_2D,0,wa,aa,ca,0,sa,ta,J);r[u]=pb;Wa&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,
!1)},hj:function(J,Y){a(Ga);Y&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);c.texImage2D(c.TEXTURE_2D,0,wa,sa,ta,J);r[u]=pb;Y&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},Vi:function(J,Y){var Aa=aa*ca,da=4*Aa;J=F.W?J?"RGBE":"JSON":"RGBA";Y&&(J=Y);Y=ja.qa()&&!1;var cb=null;switch(J){case "RGBE":cb="s13";break;case "JSON":cb=Y?"s0":"s15";break;case "RGBA":case "RGBAARRAY":cb="s7"}ob||("RGBA"===J||"RGBE"===J||"RGBAARRAY"===J?(Xa=new Uint8Array(da),ob=!0):"JSON"!==J||Y||qa());Ca.P();z.set(cb);ma.h(0);da=null;
if("RGBA"===J||"RGBE"===J||"RGBAARRAY"===J){c.viewport(0,0,aa,ca);Ba.l(!0,!0);c.readPixels(0,0,aa,ca,c.RGBA,c.UNSIGNED_BYTE,Xa);if("RGBAARRAY"===J)return{data:Xa};K||(E=document.createElement("canvas"),D=E.getContext("2d"),K=!0);E.width=aa;E.height=ca;Aa=D.createImageData(aa,ca);Aa.data.set(Xa);D.putImageData(Aa,0,0);da=E.toDataURL("image/png")}else if("JSON"===J)if(Y)da=new Float32Array(Aa),c.viewport(0,0,aa,ca),Ba.l(!0,!0),c.readPixels(0,0,aa,ca,c.RGBA,c.FLOAT,da);else{for(da=0;4>da;++da)c.viewport(0,
ca*da,aa,ca),z.Re("u16",g[da]),Ba.l(!da,!da);ma.Ge();da=Array(Aa);for(Y=0;Y<Aa;++Y)da[4*Y]=Ra[0][Y],da[4*Y+1]=Ra[1][Y],da[4*Y+2]=Ra[2][Y],da[4*Y+3]=Ra[3][Y]}return{format:J,data:da,width:aa,height:ca,isMirrorY:F.isMirrorY,isFlipY:"RGBA"===J?F.isFlipY:!F.isFlipY}}};F.isMipmap&&!kb&&mb&&!wb&&(ma.Fb(),wb=!0);if(F.url)a(Ga),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,1,1,0,c.RGBA,c.UNSIGNED_BYTE,null),bb=new Image,bb.crossOrigin="anonymous",bb.src=F.url,bb.onload=function(){aa=bb.width;ca=bb.height;T()};else if(F.N){var bc=
function(){v();aa?T():setTimeout(bc,1)};bc()}else F.array?(F.W&&!F.isFloat?F.array instanceof Uint16Array?(Ma=F.array,T()):e()?(Ma=d(F.array),T()):(T(),R.Xd(c,Ga,ma.L(),ma.aa(),F.array,Wa,!0)):(Ma=F.isFloat?F.array instanceof Float32Array?F.array:new Float32Array(F.array):F.array instanceof Uint8Array?F.array:new Uint8Array(F.array),T()),F.isKeepArray||(Ma&&Ma!==F.array&&(Ma=null),delete F.array)):F.Ec?mb=!0:T();ma.pi=ma.L;F.I&&mb&&(F.I(ma),F.I=null);f.push(ma);return ma},P:function(m){m!==u&&(c.activeTexture(n[m]),
u=m);r[m]=-1;a(null)},rh:function(m){w.random.h(m)},td:function(){B=null;c.framebufferTexture2D(Ca.Cc(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0)},reset:function(){0!==u&&c.activeTexture(n[0]);for(var m=0;m<n.length;++m)r[m]=-1;u=-1},Si:function(){u=-1},ih:function(){for(var m=0;m<n.length;++m)R.P(m)},Yd:function(){w&&(w.random.remove(),w.$e.remove())},gj:function(m,q){if("RGBA"===m.format||"RGBE"===m.format){var v=new Image;v.src=m.data;v.onload=function(){R.instance({isMirrorY:m.isMirrorY,isFlipY:m.isFlipY,
isFloat:!1,N:v,I:function(H){if("RGBA"===m.format)q(H);else{var T=m.width,fa=m.height,qa=R.instance({isMirrorY:m.isMirrorY,isFloat:!0,width:T,height:fa,isFlipY:m.isFlipY});Ca.ja();c.viewport(0,0,T,fa);z.set("s14");qa.v();H.h(0);Ba.l(!0,!0);R.P(0);q(qa);ja.flush();H.remove()}}})}}else"JSON"===m.format?q(R.instance({isFloat:!0,isFlipY:m.isFlipY,width:m.width,height:m.height,array:new Float32Array(m.data)})):q(!1)},Df:d,o:function(){B&&(Ka.ja(),R.td(),Ka.P());R.ih();f.slice(0).forEach(function(m){m.remove()});
f.splice(0);M=!1;h=0;"undefined"!==typeof Va&&Va.o();w=null}};return R}(),jc=function(){return{instance:function(a){var b=[Sa.instance(a),Sa.instance(a)],d=[b[1],b[0]],e=d,k={Pg:function(l){e[1].v();e[0].h(l);k.Ve()},Qg:function(l){e[1].O();e[0].h(l);k.Ve()},Ve:function(){e=e===b?d:b},refresh:function(){e[0].refresh();e[1].refresh()},h:function(l){e[0].h(l)},xa:function(l){e[0].xa(l)},qh:function(l){e[1].h(l)},ji:function(){return e[0]},ni:function(){return e[1]},Qa:function(l){e[0].Qa(l);e[1].Qa(l)},
remove:function(){e[0].remove();e[1].remove();e=null},sync:function(){k.Qg(0);z.set("s0");W.l(!1,!1)}};return k}}}(),Ba=function(){function a(h){var r={ia:null,indices:null};r.ia=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,r.ia);h.bufferData(h.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),h.STATIC_DRAW);r.indices=h.createBuffer();h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,r.indices);h.bufferData(h.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),h.STATIC_DRAW);return r}var b=null,d=0,e=!1,k=[],l=-2,u=-2,
n={reset:function(){u=l=-2},B:function(){e||(b=a(c),n.Ia(),e=!0)},instance:function(h){var r=d++,w=h.indices?h.indices.length:0,B="undefined"===typeof h.mode?c.STATIC_DRAW:h.mode,x=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,x);c.bufferData(c.ARRAY_BUFFER,h.ia instanceof Float32Array?h.ia:new Float32Array(h.ia),B);l=r;var t=null,I=null,M=null;if(h.indices){t=c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,t);var f=null;65536>h.indices.length?(f=Uint16Array,I=c.UNSIGNED_SHORT,M=2):(f=Uint32Array,
I=c.UNSIGNED_INT,M=4);f=h.indices instanceof f?h.indices:new f(h.indices);c.bufferData(c.ELEMENT_ARRAY_BUFFER,f,B);u=r}var A={uf:function(K){l!==r&&(c.bindBuffer(c.ARRAY_BUFFER,x),l=r);K&&Pa.md()},rf:function(){u!==r&&(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,t),u=r)},bind:function(K){A.uf(K);A.rf()},Gh:function(){c.drawElements(c.TRIANGLES,w,I,0)},Hh:function(K,E){c.drawElements(c.TRIANGLES,K,I,E*M)},remove:function(){c.deleteBuffer(x);h.indices&&c.deleteBuffer(t);A=null}};k.push(A);return A},Ia:function(){-1!==
l&&(c.bindBuffer(c.ARRAY_BUFFER,b.ia),l=-1);-1!==u&&(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b.indices),u=-1)},l:function(h,r){h&&Ba.Ia();r&&Pa.Oa();c.drawElements(c.TRIANGLES,3,c.UNSIGNED_SHORT,0)},Eb:function(h){h=h||c;var r=a(h);h.bindBuffer(h.ARRAY_BUFFER,r.ia);h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,r.indices);Pa.ac(h);h.clear(h.COLOR_BUFFER_BIT);h.drawElements(h.TRIANGLES,3,h.UNSIGNED_SHORT,0);h.flush();h.bindBuffer(h.ARRAY_BUFFER,null);h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,null);h.deleteBuffer(r.ia);
h.deleteBuffer(r.indices);n.reset();e&&(n.Ia(),Pa.Oa())},Yd:function(){var h=c,r=b;h.deleteBuffer(r.ia);h.deleteBuffer(r.indices)},o:function(){n.Yd();k.forEach(function(h){h.remove()});c.bindBuffer(c.ARRAY_BUFFER,null);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,null);n.reset();e=!1;k.splice(0);d=0}};return n}(),Ca=function(){var a=null,b=null,d=null,e=!1,k=[],l={K:-2,Wd:1},u={Ob:function(){return e},B:function(){if(!e){a=c.createFramebuffer();var n=ja.qa();b=n&&c.DRAW_FRAMEBUFFER?c.DRAW_FRAMEBUFFER:c.FRAMEBUFFER;
d=n&&c.READ_FRAMEBUFFER?c.READ_FRAMEBUFFER:c.FRAMEBUFFER;e=!0}},gi:function(){return b},bg:function(){return d},Cc:function(){return c.FRAMEBUFFER},oi:function(){return l},$h:function(){return a},instance:function(n){void 0===n.ie&&(n.ie=!1);var h=n.D?n.D:null,r=n.width,w=void 0!==n.height?n.height:n.width,B=a,x=null,t=!1,I=!1,M=0;h&&(r=r?r:h.L(),w=w?w:h.aa());var f={Ne:function(){t||(B=c.createFramebuffer(),t=!0,M=l.Wd++)},lf:function(){f.Ne();f.v();x=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,
x);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,r,w);c.framebufferRenderbuffer(b,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,x);c.clearDepth(1)},bind:function(A,K){M!==l.K&&(c.bindFramebuffer(b,B),l.K=M);h&&h.v();K&&c.viewport(0,0,r,w);A&&c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)},ph:function(){M!==l.K&&(c.bindFramebuffer(b,B),l.K=M)},clear:function(){c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)},zh:function(){c.clear(c.COLOR_BUFFER_BIT)},Ah:function(){c.clear(c.DEPTH_BUFFER_BIT)},Yg:function(){c.viewport(0,
0,r,w)},v:function(){M!==l.K&&(c.bindFramebuffer(b,B),l.K=M)},rtt:function(A){h=A;l.K!==M&&(c.bindFramebuffer(c.FRAMEBUFFER,B),l.K=M);A.v()},P:function(){c.bindFramebuffer(b,null);l.K=-1},resize:function(A,K){r=A;w=K;x&&(c.bindRenderbuffer(c.RENDERBUFFER,x),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,r,w))},remove:function(){B===a||I||(c.bindFramebuffer(b,B),c.framebufferTexture2D(b,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0),x&&c.framebufferRenderbuffer(b,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,
null),c.bindFramebuffer(b,null),l.K=-1,c.deleteFramebuffer(B),x&&c.deleteRenderbuffer(x));I=!0}};n.ie&&f.lf();k.push(f);return f},P:function(){c.bindFramebuffer(b,null);l.K=-1},jh:function(){c.bindFramebuffer(b,null);c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);ja.Te();l.K=-1},reset:function(){l.K=-2},ja:function(){0!==l.K&&(c.bindFramebuffer(b,a),l.K=0)},clear:function(){ja.Te();c.clear(c.COLOR_BUFFER_BIT)},o:function(){u.P();k.forEach(function(n){n.remove()});null!==a&&(c.deleteFramebuffer(a),
a=null);u.reset();e=!1;k.splice(0);l.Wd=1}};return u}(),ja=function(){function a(){n="undefined"===typeof Na?JEContext:Na;h=!0}function b(g,p,G){for(var N=0;N<p.length;++N){var y=G.getExtension(p[N]+"_"+g);if(y)return y}return null}function d(){null!==f.ec&&(clearTimeout(f.ec),f.ec=null);f.La=!1}function e(g){if(0===f.Ba.length){f.ba=c.PIXEL_PACK_BUFFER;f.Ba.splice(0);f.Hb.splice(0);for(var p=0;p<f.Xa;++p)f.Ba.push(c.createBuffer()),f.Hb.push(-1);f.ma=0;f.Zc=0}c.bindBuffer(f.ba,f.Ba[f.ma]);g.byteLength!==
f.Hb[f.ma]&&(c.bufferData(f.ba,g.byteLength,c.STREAM_READ),f.Hb[f.ma]=g.byteLength);f.wi=!0}function k(){c.bindBuffer(f.ba,null)}function l(){f.Ja.forEach(function(g){c.deleteSync(g)});f.Ja.splice(0)}function u(){f.ma=(f.ma+1)%f.Xa;++f.Zc}var n=null,h=!1,r={me:!1,pd:null,qd:null,re:!1,vg:!1,rd:null,se:!1,sd:null,oe:!1,pc:null,ng:!1,qc:null,og:!1},w=null,B={na:!0,pa:!0,zc:!0,Fe:!1},x=null,t=!0,I=null,M=null,f={Ef:1,Xa:-1,ma:0,Zc:0,La:!1,Ba:[],Ja:[],Hb:[],ba:null,ec:null},A="EXT WEBGL OES MOZ_OES WEBKIT_OES KHR".split(" "),
K=["OES","MOZ_OES","WEBKIT_OES"],E="undefined"===typeof window?{}:window,D={B:function(){if(h)return!0;D.reset();h||a();var g=c;if(!w.me){w.pd=D.Td(g);E.GL_EXT_FLOAT=w.pd;w.re=w.pd?!0:!1;if(w.re||D.qa())w.qd=D.Ud(g),w.vg=w.qd?!0:!1,E.GL_EXT_FLOATLINEAR=w.qd;w.me=!0}if(!w.oe){w.rd=D.Cb(g);w.rd&&(w.se=!0,E.GL_EXT_HALFFLOAT=w.rd);if(w.se||D.qa())w.sd=D.Vd(g),E.GL_EXT_HALFFLOATLINEAR=w.sd;w.xi=w.sd?!0:!1;w.oe=!0}w.pc=D.Rd(g);w.ng=w.pc?!0:!1;E.GL_EXT_COLORBUFFERFLOAT=w.pc;w.qc=D.Sd(g);w.og=w.qc?!0:!1;
E.GL_EXT_COLORBUFFERHALFFLOAT=w.qc;Ca.B();Sa.B();if(!D.Gf())return!1;Ba.B();Sa.lg();return!0},reset:function(){w=Object.assign({},r);x=Object.assign({},B)},L:function(){h||a();return n.L()},aa:function(){h||a();return n.aa()},qa:function(){h||a();return n.qa()},Qd:function(g){D.Rd(g);D.Sd(g);D.Td(g);D.Ud(g);D.Cb(g);D.Vd(g)},Rd:b.bind(null,"color_buffer_float",A),Sd:b.bind(null,"color_buffer_half_float",A),Td:b.bind(null,"texture_float",K),Ud:b.bind(null,"texture_float_linear",K),Cb:b.bind(null,"texture_half_float",
K),Vd:b.bind(null,"texture_half_float_linear",K),Bc:function(g){var p=D.Cb(g);return p&&p.HALF_FLOAT_OES?p.HALF_FLOAT_OES:g.HALF_FLOAT||g.FLOAT},Zf:function(){return M||c.RGBA32F||c.RGBA},$f:function(){return I||c.RGBA16F||c.RGBA},Vf:function(){return x},Ed:function(){return x.na},uh:function(){return x.pa},th:function(){return x.zc},xf:function(){return x.Fe&&t},Ye:function(g){t=g;!g&&f.La&&(l(),c.bindBuffer(f.ba,null),f.La=!1)},Di:function(){return f.La},cc:function(g,p,G){function N(){g.bindTexture(g.TEXTURE_2D,
null);g.bindFramebuffer(y,null);g.deleteTexture(m);g.deleteFramebuffer(R)}var y=g.FRAMEBUFFER,Q=g.NEAREST,R=g.createFramebuffer();g.bindFramebuffer(y,R);var m=g.createTexture();g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,m);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,!1);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,Q);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,
Q);g.texImage2D(g.TEXTURE_2D,0,p,3,3,0,g.RGBA,G,null);g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,m,0);if(g.checkFramebufferStatus(g.READ_FRAMEBUFFER||g.FRAMEBUFFER)!==g.FRAMEBUFFER_COMPLETE)return N(),!1;Pa.ld(g);g.clearColor(0,0,0,0);g.viewport(0,0,3,3);g.disable(g.DEPTH_TEST);g.clear(g.COLOR_BUFFER_BIT);Ba.Eb(g);g.bindFramebuffer(y,null);Pa.ob(g);g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,m);Ba.Eb(g);p=new Uint8Array(36);g.readPixels(0,0,3,3,g.RGBA,g.UNSIGNED_BYTE,
p);N();for(G=0;36>G;++G)if(3!==G%4&&3<Math.abs(p[G]-127))return!1;return!0},sc:function(g){var p={na:!1,pa:!1};g.disable(g.BLEND);g.clearColor(0,0,0,0);g.clear(g.COLOR_BUFFER_BIT);g.RGBA32F&&D.cc(g,g.RGBA32F,g.FLOAT)&&(p.na=!0,M=g.RGBA32F);!p.na&&D.cc(g,g.RGBA,g.FLOAT)&&(p.na=!0,M=g.RGBA);var G=D.Bc(g);I=null;g.RGBA16F&&D.cc(g,g.RGBA16F,G)&&(p.pa=!0,I=g.RGBA16F);!p.pa&&D.cc(g,g.RGBA,G)&&(p.pa=!0,I=g.RGBA);return p},Hf:function(){var g=Ca.instance({width:2});g.Ne();var p=Sa.instance({width:2,isFloat:!0,
Tb:3});g.v();p.v();D.flush();c.checkFramebufferStatus(Ca.bg())!==c.FRAMEBUFFER_COMPLETE?(Sa.Rg(),x.zc=!1):x.zc=!0;g.remove();p.remove()},If:function(){var g=!1;D.qa()&&(g="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(p){return"undefined"!==typeof c[p]}));x.Fe=g},Gf:function(){var g=D.sc(c);Object.assign(x,g);if(!x.na&&!x.pa)return!1;D.Hf();D.If();return!0},He:function(g,p,G,N,y){c.readPixels(g,p,G,N,c.RGBA,c.UNSIGNED_BYTE,
y);return Promise.resolve(y,!1)},Zb:function(g,p,G,N,y,Q,R){if(!D.xf())return D.He(g,p,G,N,y);f.Xa=R||f.Ef;e(y);c.readPixels(g,p,G,N,c.RGBA,c.UNSIGNED_BYTE,0);f.Ja[f.ma]=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);D.flush();var m=!1;return new Promise(function(q,v){function H(){if(!f.La)return d(),k(),u(),v(),!1;var T=(f.ma+1)%f.Xa;switch(c.clientWaitSync(f.Ja[T],0,0)){case c.TIMEOUT_EXPIRED:case c.WAIT_FAILED:break;default:return d(),c.deleteSync(f.Ja[T]),f.Ja[T]=null,c.bindBuffer(f.ba,f.Ba[T]),
c.getBufferSubData(f.ba,0,y),k(),u(),q(y,m),!0}f.ec=setTimeout(H,0);return!1}d();f.Zc+1<f.Xa?(k(),u(),q(y,!1)):(f.La=!0,H()||!Q||m||(m=!0,Q()))})},Te:function(){c.viewport(0,0,D.L(),D.aa())},flush:function(){c.flush()},o:function(){d();l();Sa.o();Ca.o();Ba.o();f.Ba.forEach(function(g){c.deleteBuffer(g)});f.Ba.splice(0);Pa.reset();h=!1}};return D}(),W=Ba,Ka=Ca,ia=Sa,Va=function(){function a(g,p,G,N){f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,N?f.NEAREST_MIPMAP_NEAREST:f.LINEAR);var y=null;if(null!==
G)try{y=f.getError();if("FUCKING_BIG_ERROR"===y)return!1;f.texImage2D(f.TEXTURE_2D,0,g,4,4,0,f.RGBA,p,G);y=f.getError();if(y!==f.NO_ERROR)return!1}catch(Q){return!1}N&&f.generateMipmap(f.TEXTURE_2D);f.clear(f.COLOR_BUFFER_BIT);W.Eb(f);y=f.getError();if("FUCKING_BIG_ERROR"===y)return!1;f.readPixels(0,0,2,2,f.RGBA,f.UNSIGNED_BYTE,w);y=f.getError();y===f.INVALID_OPERATION&&"undefined"!==typeof f.PIXEL_PACK_BUFFER&&(f.bindBuffer(f.PIXEL_PACK_BUFFER,null),f.readPixels(0,0,2,2,f.RGBA,f.UNSIGNED_BYTE,w),
y=f.getError());if(y!==f.NO_ERROR)return!1;G=!0;for(N=0;16>N;++N)G=G&&4>Math.abs(w[N]-127);G&&(h.De=p,h.he=g);return G}function b(g,p){return A.na&&a(g,f.FLOAT,new Float32Array(B),p)?(n=u.Ad,!0):!1}function d(g,p,G){if(!A.pa)return!1;var N=Sa.Df(B),y=ja.Cb(f);if(y&&y.HALF_FLOAT_OES&&a(g,y.HALF_FLOAT_OES,N,p)||f.HALF_FLOAT&&a(g,f.HALF_FLOAT,N,p))return n=u.Sa,!0;N=new Float32Array(B);if(a(g,f.FLOAT,N,p))return n=u.Sa,!0;f.bindTexture(f.TEXTURE_2D,G);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,2,2,0,f.RGBA,
f.UNSIGNED_BYTE,null);f.bindFramebuffer(h.zb,D);Sa.Xd(f,G,2,2,N,!1,!1);f.bindFramebuffer(h.zb,null);f.bindTexture(f.TEXTURE_2D,G);return a(g,null,null,p)?(n=u.Sa,!0):!1}function e(g,p,G){r=!0;if(d(g,!0,G)||b(p,!0))return!0;r=!1;return d(g,!1,G)||b(p,!1)?!0:!1}function k(g){if(n===u.S){f=g||c;n=u.RGBA8;r=!0;ja.Qd(f);A||(A=ja.sc(f));Ka.reset();D=f.createFramebuffer();h.zb=f.DRAW_FRAMEBUFFER||f.FRAMEBUFFER;f.bindFramebuffer(h.zb,null);f.clearColor(0,0,0,0);f.viewport(0,0,2,2);z.S();K=z.ob(f);g=f.createTexture();
f.activeTexture(f.TEXTURE0);f.bindTexture(f.TEXTURE_2D,g);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.REPEAT);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.REPEAT);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST);E=g;var p=g=f.RGBA,G=f.RGBA16F,N=f.RGBA32F;N&&(g=N);G&&(p=G);if((G||N)&&e(p,g,E))return l(),!0;g=p=f.RGBA;if(e(p,g,E))return l(),!0;n=u.RGBA8;l();return!1}}function l(){f.deleteProgram(K.Fa);f.deleteTexture(E);E=K=null}for(var u={S:-1,Ad:3,Sa:2,RGBA8:0},n=u.S,h={De:null,
he:null,zb:null},r=!0,w=new Uint8Array(16),B=Array(64),x=0;4>x;++x)for(var t=0;4>t;++t){var I=0===(t+x)%2?1:0,M=4*x+t;B[4*M]=I;B[4*M+1]=I;B[4*M+2]=I;B[4*M+3]=I}var f=null,A=null,K=null,E=null,D=null;return{wf:function(g){k(g);return r},Dd:function(g,p){n===u.S&&(typeof("undefined"!==p)&&(A=p),k(g));return n!==u.RGBA8},Ai:function(g){k(g);return n===u.Ad},wg:function(g){k(g);return n===u.Sa},hi:function(g){k(g);return h.De},ag:function(g){k(g);return h.he},o:function(){f=null;r=!0;n=u.S;A=null}}}(),
gc=function(){return{instance:function(a){function b(){w&&w.remove();w=ia.instance({isFloat:!1,isPot:!1,width:d.size*d.X[0],height:d.size*d.X[1],isLinear:d.isLinear})}var d=Object.assign({mask:null,size:-1,preprocessing:"none",preprocessingSize:a.size,customInputShader:null,isLinear:!0,nBlurPass:1,varianceMin:.1,blurKernelSizePx:5,gain:1,overlap:0,isNormalized:!1,tilt:-1,X:[1,1]},a),e=null,k=!1,l=!1,u=null,n=!1;a=!1;var h=null;d.mask&&(k=!0,"undefined"!==typeof ua&&ua&&void 0!==ua.qf&&(d.mask=ua.qf+
d.mask),e=ia.instance({isFloat:!1,url:d.mask}));var r=null;d.customInputShader&&(r="s50",z.Cd({name:"_",id:r,g:d.customInputShader,fj:["uSource"],precision:"lowp"}),z.H(r,[{type:"1i",name:"_",value:0}]));switch(d.preprocessing){case "sobel":h="s39";n=!0;break;case "meanNormalization":h="s40";n=!0;break;case "grayScale":h="s36";n=!1;break;case "grayScaleTilt":h="s37";a=!0;n=!1;break;case "rgbGrayTilt":h="s38";a=!0;n=!1;break;case "copy":h=r?r:"s0";break;case "inputLightRegulation":h=r?r:"s36";u=qc.instance({ge:d.preprocessingSize,
Ce:d.size,ze:d.nBlurPass,ca:!1});l=!0;break;case "inputMix0":h="none";u=rc.instance({m:d.preprocessingSize,va:d.varianceMin,ka:d.blurKernelSizePx,gain:d.gain||1,ca:!1,isLinear:d.isLinear});l=!0;break;case "inputMix1":h="none";u=sc.instance({m:d.preprocessingSize,va:d.varianceMin,ka:d.blurKernelSizePx,gain:d.gain||1,ca:!1});l=!0;break;case "inputCut4":h="none";u=tc.instance({m:d.preprocessingSize,va:d.varianceMin,ka:d.blurKernelSizePx,gain:d.gain||1,eb:d.isNormalized||!1,fd:d.overlap||0,ca:!1});d.preprocessingSize*=
u.cg();l=!0;break;case "direct":case "none":case "abort":h="abort";break;default:h="s4"}d.preprocessingSize=Math.ceil(d.preprocessingSize);a&&z.H(h,[{name:"u30",type:"1f",value:d.tilt}]);k&&(h+="Mask");var w=null;b();var B={L:function(){return d.size},dg:function(){return d.preprocessingSize},Dc:function(){return B.L()},hg:function(){return l?u.ab():w},fc:function(x){d.X=x;b()},Y:function(x){Ka.ja();if("abort"===h)return x.h(0),x;"none"!==h&&(z.set(h),n&&z.M("u31",1/d.size),w.O(),k&&e.h(1),W.l(!1,
!1),w.h(0),x=w);l&&u.process(x)},o:function(){w.remove();k&&e.remove()}};return B}}}(),hc=function(){return{instance:function(a){function b(){if(D.Pa){k.input&&(k.input.remove(),k.Kb.remove());var p=a.size*a.sparsity;E=Math.log(p/a.size)/Math.log(2);k.input=ia.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:p*a.X[0],height:p*a.X[1],Vc:E});k.Kb=ia.instance({isFloat:!0,isPot:!0,width:a.size*a.X[0],height:a.size*a.X[1]})}}function d(){k.output&&k.output.remove();k.output=ia.instance({isFloat:!0,isPot:!u,
isLinear:!u&&n.isLinear,width:a.size*a.X[0],height:a.size*a.X[1]})}function e(p){n.buffer.forEach(function(G,N){n.results[N][0]=p[0][G];n.results[N][1]=p[1][G];n.results[N][2]=p[2][G];n.results[N][3]=p[3][G]});return n.results}a.normalize=a.normalize||!1;var k={input:null,bias:null,Kb:null,output:null,ed:null,cd:null,dd:null},l=null,u=!0,n={type:"undef",I:null,isLinear:!1,buffer:[],results:[],Lb:!1},h=-1,r=a.isReorganize?a.isReorganize:!1,w=a.kernelsCount?!0:!1,B=[a.cb?"s32":"s31",a.cb?"s34":"s33",
"s35"][a.shiftRGBAMode||0],x={isEnabled:!1},t=1/a.size;a.sg?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.Xb.Dc(),u=!1):"full"===a.connectivityUp&&(a.sparsity=a.Xb.Dc());var I={elu:"s19",elu01:"s20",relu:"s17",gelu:"s18",arctan:"s21",arctan2:"s22",sigmoid:"s16",copy:"s0"}[a.activation],M=a.sparsity*a.sparsity,f=!1,A=a.size,K="";if(a.maxPooling){switch(a.maxPooling.size){case 2:K="s41";break;case 4:K="s42"}f=!0;A/=a.maxPooling.size;k.cd=ia.instance({isFloat:!0,isPot:!1,width:A})}var E=-1,
D=null;u&&d();k.bias=ia.instance(a.bias);var g={L:function(){return a.size},Dc:function(){return A},Zd:function(){return a.classesCount},sf:function(p){l.h(p)},Ig:function(){a.remap&&a.remap.isEnabled&&(x={isEnabled:!0,Bg:ia.instance(a.remap.maskTexture),ib:a.remap.layers.map(function(p){return a.parent.fg(p)}),depth:a.remap.depth})},Sg:function(){switch(a.connectivityUp){case "direct":D=uc.instance(a.connectivity);break;case "square":D=vc.instance(a.connectivity);break;case "squareFast":D=wc.instance(a.connectivity,
a.activation);break;case "full":D=xc.instance(Object.assign({cb:a.cb},a.connectivity));break;case "conv":h=a.kernelsCount,D=yc.instance(a.connectivity),r&&(k.ed=ia.instance({width:A,isFloat:!0,isFlipY:!1,isPot:!1}))}b()},Y:function(p,G){l=p;D.Pa?(k.input.O(),w&&k.bias.h(2),D.Y(x),k.input.h(0),k.input.Tf(E),k.Kb.O(),w?z.set("s0"):(z.set(B),z.M("u4",M),k.bias.h(1)),k.input.tf(E,0),W.l(!1,!1),z.set(I),k.output.v(),k.Kb.h(0),W.l(!1,!1)):(k.output.O(),k.bias.h(1),D.Y());if(u)return G=k.output,f&&(k.cd.O(),
G.h(0),z.set(K),z.U("u6",a.size,a.size),W.l(!1,!1),G=k.cd),r&&(k.ed.v(),z.set("s24"),z.U("u19",h,A/h),G.h(0),W.l(!1,!1),G=k.ed),G.h(0),G;var N=k.output;if(a.normalize||n.Lb)p=a.normalize,z.set(n.Lb?"s9":"s8"),z.M("u11",p?t:1),k.dd.O(),N.h(0),W.l(!1,!1),N=k.dd;p=null;switch(n.type){case "cpuRGBA2Float":N.Md(!1);G?p=g.Jg(N).then(n.I):(N=g.Kg(N),n.I(N));break;case "cpuMeanFloat":N.Md(!0);if(G)p=N.Mg().then(n.I);else{N=N.Ng();for(var y=0;y<N.length;++y);n.I(N)}break;case "gpuRawAvg":case "gpuRaw":N.h(0);
case "none":null!==n.I&&n.I(N)}G&&null===p&&(p=Promise.resolve());return p},fc:function(p){a.X=p;b();d()},$g:function(p){p&&(n.type=p.Vb||"none",n.I=p.Ub||null,n.isLinear=p.bd?!0:!1);d();p="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var G=0,N=0,y=0;G<p;++G)n.buffer.push(N+(a.size-1-y)*a.size),n.results.push([-1,-1,-1,-1]),++N,N===a.size&&(N=0,++y);n.Lb="gpuRawAvg"===n.type||"cpuMeanFloat"===n.type;if(a.normalize||n.Lb)k.dd=ia.instance({isFloat:!0,isPot:!0,
width:a.size})},Jg:function(p){return p.Lg().then(e)},Kg:function(p){p=p.Ge();e(p);return n.results},o:function(){for(var p in k){var G=k[p];G&&G.remove()}D&&(D.o(),D=null)}};a.Xb&&g.Sg(a.Xb);return g}}}(),uc=function(){return{instance:function(a){var b=ia.instance(a.weights);return{Pa:!0,Gb:function(){return 1},o:function(){b.remove()},kg:function(){return b},Y:function(){z.set("s30");b.h(1);W.l(!1,!1)}}}}}(),xc=function(){return{instance:function(a){var b=a.fromLayerSize,d=ia.instance(a.weights),
e=a.cb?"s27":"s26";return{Pa:!0,Gb:function(){return b},o:function(){d.remove()},Y:function(k){if(k.isEnabled){z.set("s28");k.Bg.h(3);for(var l=Math.min(k.ib.length,k.depth),u=0;u<l;++u)k.ib[u].sf(4+u)}else z.set(e);z.M("u9",a.toLayerSize);z.M("u10",a.fromLayerSize);d.h(1);W.l(!1,!1)}}}}}(),vc=function(){return{instance:function(a){for(var b=a.fromLayerSize,d=a.toLayerSize,e=a.toSparsity,k=e*d,l=k/b,u=b/d,n=0,h=0,r=0,w=Array(e*d*e*d*4),B=Array(e*d*e*d*4),x=Array(b*b),t=0;t<x.length;++t)x[t]=0;t=Math.floor(e/
2);for(var I=.5/d,M=.5/b,f=.5/k,A=0;A<d;++A)for(var K=Math.round(A*u),E=0;E<d;++E){var D=Math.round(E*u),g=A/d,p=E/d;g+=I;p+=I;for(var G=0;G<e;++G){var N=K+G-t;0>N&&(N+=b);N>=b&&(N-=b);for(var y=0;y<e;++y){var Q=n/k,R=h/k,m=D+y-t;0>m&&(m+=b);m>=b&&(m-=b);var q=N/b,v=m/b;R=1-R-1/k;q+=M;v+=M;Q+=f;R+=f;var H=A*e+G,T=E*e+y;T=d*e-T-1;H=T*d*e+H;w[4*H]=Q;w[4*H+1]=R;w[4*H+2]=q;w[4*H+3]=v;v=x[m*b+N]++;H=v%l;q=N*l+H;m=m*l+(v-H)/l;m=b*l-1-m;m=m*b*l+q;B[4*m]=Q;B[4*m+1]=R;B[4*m+2]=g;B[4*m+3]=p;++n>=k&&(n=0,++h);
++r}}}x=null;var fa=ia.instance(a.weights);delete a.weights.data;var qa=ia.instance({width:k,isFloat:!0,array:new Float32Array(B),isPot:!0});B=null;var Qa=ia.instance({width:k,isFloat:!0,array:new Float32Array(w),isPot:!0});w=null;return{Pa:!0,Gb:function(){return l},o:function(){qa.remove();Qa.remove();fa.remove()},Y:function(){z.set("s25");fa.h(1);Qa.h(2);W.l(!1,!1)}}}}}(),yc=function(){return{instance:function(a){var b=a.kernelsCount,d=a.toSparsity,e=d*a.toLayerSize/a.fromLayerSize,k=a.inputScale||
[1,1],l=ia.instance(a.weights);return{Pa:!0,Gb:function(){return e},ti:function(){return d},kg:function(){return l},o:function(){l.remove()},Y:function(){z.set("s29");z.Vg("u29",k);z.M("u27",b);z.M("u28",d);z.M("u9",a.toLayerSize);z.M("u10",a.fromLayerSize);l.h(1);W.l(!1,!1)}}}}}(),wc=function(){return{instance:function(a,b){var d=a.fromLayerSize,e=a.toLayerSize,k=a.toSparsity,l=a.stride?a.stride:1,u=k*e/d,n=e<d,h=d/e,r=ia.instance(a.weights),w="s51"+[d.toString(),e.toString(),k.toString(),l.toString(),
b].join("_");z.Qf(w)||(a=oc.Uf(b,"gl_FragColor","gl_FragColor"),e=[{type:"1f",name:"u9",value:e},{type:"1f",name:"u33",value:l}],n&&e.push({type:"1f",name:"u10",value:d}),d=[(n?u:k).toFixed(1),a],n&&d.push(h.toFixed(1)),z.mg(n?"s47":"s46",w,d),z.H(w,e.concat([{type:"1i",name:"u7",value:0},{type:"1i",name:"u3",value:1},{type:"1i",name:"u8",value:3}])));return{Pa:!1,Gb:function(){return u},o:function(){r.remove()},Y:function(){z.set(w);r.h(3);W.l(!1,!1)}}}}}(),qc=function(){return{instance:function(a){var b=
a.ze?a.ze:3,d=a.ge?a.ge:64,e=a.Ce?a.Ce:64,k=a.ca?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var l=ia.instance(a),u=ia.instance(a),n=ia.instance(a),h=ia.instance(a),r=ia.instance({isFloat:!0,width:e,isPot:!1,isFlipY:!1}),w=1/d;return{process:function(B){z.set("s43");h.v();W.l(k,!1);z.set("s44");for(var x=0;x<b;++x)l.v(),z.U("u15",w,0),W.l(k,!1),n.v(),h.h(0),W.l(k,!1),u.v(),l.h(0),z.U("u15",0,w),W.l(k,!1),h.v(),n.h(0),W.l(k,!1),x!==b-1&&u.h(0);z.set("s45");r.v();B.h(0);u.h(1);h.h(2);W.l(k,!1);
r.h(0)},ab:function(){return r}}}}}(),rc=function(){return{instance:function(a){function b(h,r){return ia.instance({isFloat:h,width:d.m,isPot:!1,isFlipY:!1,isLinear:r})}var d=Object.assign({va:.1,ka:9,m:128,gain:1,ca:!1,isLinear:!0},a),e=b(!1,!1),k=[b(!1,d.isLinear),b(!1,d.isLinear),b(!1,d.isLinear)],l=[b(!1,d.isLinear),b(!1,d.isLinear),b(!1,d.isLinear)],u=b(!0,d.isLinear),n=[e,l[0],l[1]];a={u1:0};z.tb([{id:"s53",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 a=texture2D(u1,vv0).rgb;float b=dot(a,f);gl_FragColor=vec4(b);}",
j:a,i:["u1"],precision:"lowp"},{id:"s54",name:"_",g:"uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u34;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u34*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",Math.round((d.ka-1)/2).toFixed(2)).replace("2.2222",(1/d.m).toFixed(6)),j:a,i:["u1","u34"],precision:"lowp"},{id:"s55",name:"_",g:"uniform sampler2D u35,u36,u37,u38;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec3 a=texture2D(u35,vv0).rgb;float c=texture2D(u36,vv0).r,d=texture2D(u37,vv0).r,i=texture2D(u38,vv0).r,j=a.r*a.r;vec3 b=vec3(c,d,i),k=max(g*f,abs(vec3(j)-b*b)),l=sqrt(k);gl_FragColor=vec4(a.r,h*(a-b)/l);}".replace("1.1111",
d.va.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),j:{u35:0,u36:1,u37:2,u38:3},i:["u35","u36","u37","u38"],precision:"highp"}]);return{process:function(){z.set("s53");e.O();W.l(d.ca,!1);z.set("s54");for(var h=0;3>h;++h)z.U("u34",1,0),k[h].v(),n[h].h(0),W.l(!1,!1),z.U("u34",0,1),l[h].v(),k[h].h(0),W.l(!1,!1);z.set("s55");u.v();e.h(0);l[0].h(1);l[1].h(2);l[2].h(3);W.l(!1,!1);u.h(0)},ab:function(){return u}}}}}(),sc=function(){return{instance:function(a){function b(n){return ia.instance({isFloat:n,
width:d.m,isPot:!1,isFlipY:!1})}var d=Object.assign({va:.1,ka:9,m:128,gain:1,ca:!1},a),e=b(!1),k=b(!1),l=b(!1),u=b(!0);a={u1:0};z.tb([{id:"s56",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 a=texture2D(u1,vv0).rgb;float b=dot(a,f);gl_FragColor=vec4(a.rgb,b);}",j:a,i:["u1"],precision:"lowp"},{id:"s57",name:"_",g:"uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u34;varying vec2 vv0;void main(){vec3 b=vec3(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u34*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).rgb,c+=f;}b/=c,gl_FragColor=vec4(b,1.);}".replace("1.1111",
Math.round((d.ka-1)/2).toFixed(2)).replace("2.2222",(1/d.m).toFixed(6)),j:a,i:["u1","u34"],precision:"lowp"},{id:"s58",name:"_",g:"uniform sampler2D u0,u39;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);vec3 c=texture2D(u39,vv0).rgb;float d=a.a*a.a;vec3 b=c.rgb,i=max(g*f,abs(vec3(d)-b*b)),j=sqrt(i);gl_FragColor=vec4(a.a,h*(a.rgb-b)/j);}".replace("1.1111",d.va.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),j:{u0:0,u39:1},i:["u0",
"u39"],precision:"highp"}]);return{process:function(){z.set("s56");e.O();W.l(d.ca,!1);z.set("s57");z.U("u34",1,0);k.v();e.h(0);W.l(!1,!1);z.U("u34",0,1);l.v();k.h(0);W.l(!1,!1);z.set("s58");u.v();e.h(0);l.h(1);W.l(!1,!1);u.h(0)},ab:function(){return u}}}}}(),tc=function(){return{instance:function(a){function b(h){return ia.instance({isFloat:h,width:d.m,isPot:!1,isFlipY:!1})}var d=Object.assign({va:.1,ka:9,m:128,gain:1,fd:0,eb:!1,ca:!1},a),e=b(!1),k=null,l=null,u=null;d.eb&&(k=b(!1),l=b(!1),u=b(!0));
a={u1:0};var n=[{id:"s59",name:"_",g:"uniform sampler2D u1;const float f=1.1111;varying vec2 vv0;const vec3 e=vec3(.2126,.7152,.0722);void main(){vec2 a=vv0*.5*(f+1.);float b=.5*(1.-f),c=dot(texture2D(u1,a).rgb,e),d=dot(texture2D(u1,a+vec2(0.,b)).rgb,e),h=dot(texture2D(u1,a+vec2(b,0.)).rgb,e),i=dot(texture2D(u1,a+vec2(b,b)).rgb,e);gl_FragColor=vec4(c,d,h,i);}".replace("1.1111",d.fd.toFixed(4)),j:a,i:["u1"],precision:"lowp"}];d.eb&&n.push({id:"s60",name:"_",g:"uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u34;varying vec2 vv0;void main(){vec4 b=vec4(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u34*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j),c+=f;}gl_FragColor=b/c;}".replace("1.1111",
Math.round((d.ka-1)/2).toFixed(2)).replace("2.2222",(1/d.m).toFixed(6)),j:a,i:["u1","u34"],precision:"lowp"},{id:"s61",name:"_",g:"uniform sampler2D u0,u39;const float f=1.1111;const vec4 g=vec4(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u39,vv0),d=a*a,b=c,i=max(g*f,abs(d-b*b)),j=sqrt(i);gl_FragColor=h*(a-b)/j;}".replace("1.1111",d.va.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),j:{u0:0,u39:1},i:["u0","u39"],precision:"highp"});z.tb(n);return{process:function(){z.set("s59");
e.O();W.l(d.ca,!1);d.eb?(z.set("s60"),z.U("u34",1,0),k.v(),e.h(0),W.l(!1,!1),z.U("u34",0,1),l.v(),k.h(0),W.l(!1,!1),z.set("s61"),u.v(),e.h(0),l.h(1),W.l(!1,!1),u.h(0)):e.h(0)},cg:function(){return 2-d.fd},ab:function(){return d.eb?u:e}}}}}(),ha={de:function(){return ha.Id()?document.createElement("video"):!1},$a:function(a,b){a[b]=!0;a.setAttribute(b,"true")},Af:function(){var a=!1,b=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(b)||
/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,
4)))a=!0;return a},zf:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},xg:function(){try{return window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(a){return window.innerHeight>window.innerWidth}},wh:function(){return ha.Gd()||ha.zf()},ah:function(a,b){window.addEventListener("beforeunload",function(){b&&b.getTracks&&b.getTracks().forEach(function(d){b.removeTrack(d)});a.videoStream&&a.videoStream.stop();a.videoStream=null},!1)},Gd:function(){var a=navigator.userAgent.toLowerCase();
return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1},Wh:function(){return ha.Af()?ha.xg()?window.innerHeight/window.innerWidth*45:45:45},Id:function(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1},pause:function(a){a.pause()},Ti:function(a){a.play()},release:function(a){a.pause();a.videoStream&&a.videoStream.stop();a.videoStream=null},Hd:function(a){if(!a)return a;var b=null;if(a.video){var d=function(e){return e&&"object"===typeof e?Object.assign({},e):e};b=
{};"undefined"!==typeof a.video.width&&(b.width=d(a.video.width));"undefined"!==typeof a.video.height&&(b.height=d(a.video.height));"undefined"!==typeof a.video.facingMode&&(b.facingMode=d(a.video.facingMode))}b={audio:a.audio,video:b};"undefined"!==typeof a.deviceId&&ha.Bd(b,a.deviceId);return b},Bd:function(a,b){b&&(a.video=a.video||{},a.video.deviceId={exact:b},a.video.facingMode&&delete a.video.facingMode)},We:function(a){var b=a.video.width;a.video.width=a.video.height;a.video.height=b;return a},
Ff:function(a){function b(x){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(t,I){return Math.abs(t-x)-Math.abs(I-x)})}function d(x){var t=ha.Hd(a);x=x(t);k.push(x);e(x)}function e(x){if(x.video&&x.video.facingMode&&x.video.facingMode.exact){var t=x.video.facingMode.exact;x=ha.Hd(x);delete x.video.facingMode.exact;x.video.facingMode.ideal=t;k.push(x)}}var k=[];if(!a||!a.video)return k;e(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var l=
b(a.video.width.ideal).slice(0,3),u=b(a.video.height.ideal).slice(0,3),n={},h=0;for(n.Ha=void 0;h<l.length;n={Ha:n.Ha},++h){n.Ha=l[h];var r={},w=0;for(r.Ca=void 0;w<u.length;r={Ca:r.Ca},++w)if(r.Ca=u[w],n.Ha!==a.video.width.ideal||r.Ca!==a.video.height.ideal){var B=Math.max(n.Ha,r.Ca)/Math.min(n.Ha,r.Ca);B<4/3-.1||B>16/9+.1||d(function(x,t){return function(I){I.video.width.ideal=x.Ha;I.video.height.ideal=t.Ca;return I}}(n,r))}}}d(function(x){return ha.We(x)})}a.video.width&&a.video.height&&(a.video.width.ideal&&
a.video.height.ideal&&d(function(x){delete x.video.width.ideal;delete x.video.height.ideal;return x}),d(function(x){delete x.video.width;delete x.video.height;return x}));a.video.facingMode&&(d(function(x){delete x.video.facingMode;return x}),a.video.width&&a.video.height&&d(function(x){ha.We(x);delete x.video.facingMode;return x}));k.push({audio:a.audio,video:!0});return k},ye:function(a){a.volume=0;ha.$a(a,"muted");if(ha.Gd()){if(1===a.volume){var b=function(){a.volume=0;window.removeEventListener("mousemove",
b,!1);window.removeEventListener("touchstart",b,!1)};window.addEventListener("mousemove",b,!1);window.addEventListener("touchstart",b,!1)}setTimeout(function(){a.volume=0;ha.$a(a,"muted")},5)}},Ze:function(a,b,d){return null===a?Promise.resolve():new Promise(function(e,k){if(a.srcObject&&a.srcObject.getVideoTracks){var l=a.srcObject.getVideoTracks();1!==l.length?k("INVALID_TRACKNUMBER"):(l=l[0],b?ha.get(a,e,k,d):(l.stop(),e()))}else k("BAD_IMPLEMENTATION")})},be:function(a,b,d,e){function k(u){l||
(l=!0,d(u))}var l=!1;return navigator.mediaDevices.getUserMedia(e).then(function(u){function n(){setTimeout(function(){if(a.currentTime){var r=a.videoHeight;if(0===a.videoWidth||0===r)k("VIDEO_NULLSIZE");else{r={yf:null,Zg:null,Cg:null};try{var w=u.getVideoTracks()[0];w&&(r.Cg=w,r.yf=w.getCapabilities(),r.Zg=w.getSettings())}catch(B){}l||(ha.ah(a,u),b(a,u,r))}}else k("VIDEO_NOTSTARTED")},700)}function h(){a.removeEventListener("loadeddata",h,!1);var r=a.play();ha.ye(a);"undefined"===typeof r?n():
r.then(function(){n()}).catch(function(){k("VIDEO_PLAYPROMISEREJECTED")})}"undefined"!==typeof a.srcObject?a.srcObject=u:(a.src=window.URL.createObjectURL(u),a.videoStream=u);ha.ye(a);a.addEventListener("loadeddata",h,!1)}).catch(function(u){k(u)})},jg:function(a,b){var d=b||ha.de();return new Promise(function(e,k){ha.get(d,e,k,a)})},get:function(a,b,d,e){if(!a)return d&&d("VIDEO_NOT_PROVIDED"),!1;if(!ha.Id())return d&&d("MEDIASTREAMAPI_NOT_FOUND"),!1;ha.$a(a,"autoplay");ha.$a(a,"playsinline");e&&
e.audio?a.volume=0:ha.$a(a,"muted");ha.Cf(e).then(function(){ha.be(a,b,function(){function k(u){if(0===u.length)d("NO_VALID_MEDIASTREAM_FALLBACK_CONSTRAINTS");else{var n=u.shift();ha.be(a,b,function(){k(u)},n)}}var l=ha.Ff(e);k(l)},e)})},Cf:function(a){if(!a||!a.video||!a.video.facingMode)return Promise.resolve("NO_VIDEO_CONSTRAINTS");if(a.video.deviceId)return Promise.resolve("DEVICEID_ALREADY_SET");var b=a.video.facingMode;b=b.exact||b.ideal;if(!b)return Promise.resolve("NO_FACINGMODE");var d={user:[],
environment:["camera2 0"]}[b];return d&&0!==d.length?new Promise(function(e){ha.ce(function(k){k?(k=k.find(function(l){var u=l.label;return u?d.some(function(n){return u.includes(n)}):!1}))?(a.video.deviceId={exact:k.deviceId},e("SUCCESS")):e("NO_PREFERRED_DEVICE_FOUND"):e("NO_DEVICES_FOUND")})}):Promise.resolve("NO_PREFERRED_CAMERAS")},ce:function(a){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return a(!1,"NOTSUPPORTED"),!1;navigator.mediaDevices.enumerateDevices().then(function(b){(b=
b.filter(function(d){return d.kind&&-1!==d.kind.toLowerCase().indexOf("video")&&d.label&&d.deviceId}))&&b.length&&0<b.length?a(b,!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,"PROMISEREJECTED")})},vh:function(a,b,d){var e={};e[b]=d;b=[];b.push(e);a.applyConstraints({advanced:b}).catch(function(){})}},ya=function(){function a(f,A,K,E,D,g,p){if(!I)if(p===g.length)D();else{switch(g[p]){case "A":K();break;case "D":f();break;case "S":A().then(function(G,N){M.dc();a(f,A,K,N?null:E,D,g,++p)}).catch(function(G){console.log("An error occurred in the WebAR loop: ",
G);D()});return;case "R":E&&E()}a(f,A,K,E,D,g,++p)}}var b={n:5,Yc:1,Tc:0,Sf:[25,39],Ld:45,Ab:[2,200],k:.7,kh:200,Hg:.05},d=-1,e=null,k=-1,l=-1,u=0,n=-1,h=-1,r=0,w=null,B=0,x=b.Ab[1],t=Math.log(2),I=!0,M={gg:function(){switch(d){case -1:return-1;case 0:return h+e.Tc;case 1:return r}},bi:function(f){switch(d){case -1:return 1;case 0:return Math.pow(Math.min(Math.max(n,0),e.n-1)/(e.n-1),f||1);case 1:return(r-e.Tc)/(e.n-1)}},B:function(f){e=Object.assign({},b,f);n=h=e.Yc;d=0;w=e.Sf.slice(0);M.reset();
M.Pf().then(function(A){A>=e.Ld||(A/=e.Ld,w[0]*=A,w[1]*=A)})},dc:function(f){f=("undefined"===typeof f?Date.now():f)||0;var A=Math.min(Math.max(f-B,e.Ab[0]),e.Ab[1]);x=A;B=f;var K=-1===k?0:e.k;k=Math.min(Math.max(1E3/A,5),120)*(1-K)+k*K;f-l>e.kh&&5<++u&&(A=e.k,n=n*(1-A)+(k<w[0]?h-1:k>w[1]?h+1:h)*A,Math.abs(n-h)>1-e.Hg&&(A=Math.min(Math.max(Math.round(n),0),e.n-1),A!==h&&(n=h=A,k=.5*(w[1]-w[0]))),l=f)},gd:function(f,A,K,E,D,g){I=!1;a(f,A,K,E,D,g,0)},stop:function(){I=!0},jd:function(f){r=f;d=1},ud:function(){d=
0;M.reset()},reset:function(){x=b.Ab[1];l=k=-1;u=0},qb:function(f,A,K){K=Math.exp(-t*x/K);return(1-K)*f+K*A},Yf:function(){return x},Pf:function(){return new Promise(function(f){function A(p){p=p||Date.now();var G=Math.max(0,p-E);E=p;0!==D++&&0<G&&(K=Math.min(K,G),++g);10>=D?window.requestAnimationFrame(A):f(Math.round(1E3/K))}var K=Infinity,E=0,D=0,g=0;setTimeout(A,1)})}};return M}(),$a=function(){function a(){d(M+t.Wc);f.port.postMessage("DONE")}function b(){D.vb=0===t.ub?K(d):K(e)}function d(y){E.Ma&&
null!==I&&(y-=M,y=Math.min(Math.max(y,t.Nd[0]),t.Nd[1]),M+=y,l(),g.isEnabled&&g.fb&&E.ea&&M-g.Rc>t.yd&&(r(),g.Rc=M),I(M))}function e(y){E.Ma&&(D.timeout=setTimeout(d.bind(null,y),t.ub))}function k(){I=null;E.Ma=!1;l()}function l(){D.vb&&(window.cancelAnimationFrame(D.vb),D.vb=null);D.timeout&&(window.clearTimeout(D.timeout),D.timeout=null)}function u(y){y&&!E.ea?(E.ea=!0,A&&ya.ud(),f.port.postMessage("STOP"),ja.Ye(!0),b()):!y&&E.ea&&(E.ea=!1,A&&ya.jd(1),ja.Ye(!1),f.port.postMessage("START"))}function n(y){y.target.hidden?
G():p()}function h(y,Q,R){Q=y.createShader(Q);y.shaderSource(Q,R);y.compileShader(Q);return Q}function r(){g.fb=!1;var y=g.oa,Q=g.Ib,R=g.Jb,m=g.ba;y.uniform1f(g.ee,Math.random());g.Na?Q.beginQueryEXT(m,R):y.beginQuery(m,R);y.drawElements(y.POINTS,1,y.UNSIGNED_SHORT,0);g.Na?Q.endQueryEXT(m):y.endQuery(m);ja.flush();B().then(function(q){0===q||isNaN(q)?(g.isEnabled=!1,console.log("WARNING in benchmark_GPUClock: WebGL timer queries is not working properly. timeElapsedNs =",q)):(q=t.hf*t.xd*1E3/q,g.hc=
(g.hc+1)%t.Ra,g.Sc[g.hc]=q,++g.ve>t.Ra&&(g.Pb.set(g.Sc),g.Pb.sort(function(v,H){return v-H}),q=g.Pb[Math.floor(t.Ra/2)],g.Db=Math.max(g.Db,q),t.ic(q/g.Db)),g.fb=!0)}).catch(function(){g.fb=!0})}function w(y){var Q=g.oa,R=g.Ib,m=g.Jb;m=g.Na?R.Zh(m,R.QUERY_RESULT_AVAILABLE_EXT):Q.getQueryParameter(m,Q.QUERY_RESULT_AVAILABLE);Q=Q.getParameter(R.GPU_DISJOINT_EXT);m?y(!Q):setTimeout(w.bind(null,y),.1)}function B(){return new Promise(function(y,Q){w(function(R){if(R){R=g.oa;var m=g.Ib,q=g.Jb;R=g.Na?m.getQueryObjectEXT(q,
m.QUERY_RESULT_EXT):R.getQueryParameter(q,R.QUERY_RESULT);y(R)}else Q()})})}var x={pe:!0,Nd:[1,200],Wc:20,ub:0,xd:50,hf:240,yd:3E3,Ra:3,ic:null},t=null,I=null,M=0,f=null,A=!1,K=null,E={Da:!1,ea:!0,Lc:!1,Jc:!1,Ic:!1,Ma:!1},D={vb:null,timeout:null},g={isEnabled:!1,fb:!1,oa:null,Ib:null,Jb:null,ba:null,ee:null,Na:!0,Rc:0,ve:0,Sc:null,Pb:null,hc:0,Db:0},p=u.bind(null,!0),G=u.bind(null,!1),N={B:function(y){t=Object.assign(x,y);Object.assign(E,{ea:!0,Da:!0,Ma:!1});K=window.requestPostAnimationFrame||window.requestAnimationFrame;
if(null!==t.ic){y=document.createElement("canvas");y.setAttribute("width","1");y.setAttribute("height","1");var Q={antialias:!1};y=y.getContext("webgl2",Q)||y.getContext("webgl",Q);if(Q=y.getExtension("EXT_disjoint_timer_query")||y.getExtension("EXT_disjoint_timer_query_webgl2")){g.oa=y;g.Ib=Q;g.isEnabled=!0;g.Na=Q.beginQueryEXT?!0:!1;var R=h(y,y.VERTEX_SHADER,"attribute vec4 a0;void main(){gl_Position=a0;}"),m=h(y,y.FRAGMENT_SHADER,"precision lowp float;uniform float u40;void main(){vec4 a=u40*vec4(1.,2.,3.,4.);for(int b=0;b<666;b+=1)a=cos(a);gl_FragColor=a;}".replace("666",
t.xd.toString())),q=y.createProgram();y.attachShader(q,R);y.attachShader(q,m);y.linkProgram(q);R=y.getAttribLocation(q,"a0");g.ee=y.getUniformLocation(q,"u40");y.useProgram(q);y.enableVertexAttribArray(R);q=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,q);y.bufferData(y.ARRAY_BUFFER,new Float32Array([.5,.5,0,1]),y.STATIC_DRAW);y.vertexAttribPointer(R,4,y.FLOAT,!1,16,0);q=y.createBuffer();y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,q);y.bufferData(y.ELEMENT_ARRAY_BUFFER,new Uint16Array([0]),y.STATIC_DRAW);
y.disable(y.DEPTH_TEST);y.disable(y.DITHER);y.disable(y.STENCIL_TEST);y.viewport(0,0,1,1);q=g.Na?Q.createQueryEXT():y.createQuery();g.Jb=q;g.ba=Q.TIME_ELAPSED_EXT||y.TIME_ELAPSED;g.Rc=-t.yd;g.Sc=new Float32Array(t.Ra);g.Pb=new Float32Array(t.Ra);g.Db=0;g.hc=0;g.ve=0;g.fb=!0}}if(t.pe){y=!1;try{if("undefined"===typeof SharedWorker){var v=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        if (handler !== null){\n          clearTimeout(handler);\n          handler = null;\n        }\n        switch (e.data) {\n          case 'START':\n          case 'DONE':\n            handler = setTimeout(function(){\n              self.postMessage('TICK');\n            }, "+
t.Wc.toString()+");\n            break;\n          case 'STOP':\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),H=new Worker(v);H.addEventListener("message",a);f={Ee:H,port:H};E.Lc=!0}else{var T=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          if (handler !== null){\n            clearTimeout(handler);\n            handler = null;\n          }\n          switch (e.data) {\n            case 'START':\n            case 'DONE':\n              handler = setTimeout(function(){\n                port.postMessage('TICK');\n              }, "+
t.Wc.toString()+");\n              break;\n            case 'STOP':\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),fa=new SharedWorker(T);fa.port.start();fa.port.addEventListener("message",a);f={Ee:fa,port:fa.port};E.Jc=!0}y=!0}catch(qa){}y&&("onvisibilitychange"in document?document.addEventListener("visibilitychange",n):(window.addEventListener("blur",G),window.addEventListener("focus",p)),window.addEventListener("pagehide",
G),window.addEventListener("pageshow",p),E.Ic=!0)}A="undefined"!==typeof ya},o:function(){k();E.Ic&&("onvisibilitychange"in document?document.removeEventListener("visibilitychange",n):(window.removeEventListener("blur",G),window.removeEventListener("focus",p)),window.removeEventListener("pagehide",G),window.removeEventListener("pageshow",p),E.Ic=!1);E.Jc?(f.port.close(),E.Jc=!1):E.Lc&&(f.Ee.terminate(),E.Lc=!1);Object.assign(E,{ea:!0,Da:!1,Ma:!1});I=null},zg:function(){return E.ea},update:function(y){Object.assign(t,
y)},gd:function(y){E.Da||N.B({});l();E.Ma=!0;I=y;E.ea&&b()},stop:k};return N}(),hb=function(){function a(B,x){var t=B[0]-.5;B=B[1]-.5;var I=x[0]-.5;x=x[1]-.5;return t*t+B*B-(I*I+x*x)}var b={Ae:4,Wb:[1.5,1.5,2],Z:[.1,.1,.1],Ke:1,m:-1,F:-1,fh:2,Gg:1,hd:!0,tg:!1,Lf:.8},d=null,e=[],k=[],l=[],u=[0],n=[.5,.5,1],h=null,r=0,w=[0,0,0];return{B:function(B){d=Object.assign({},b,B);e.splice(0);k.splice(0);l.splice(0);r=0;B=d.Wb[0]*d.Z[0];var x=d.Wb[1]*d.Z[1],t=1/(1+d.Wb[2]*d.Z[2]),I=Math.min(d.m,d.F),M=d.m/d.F,
f=d.Ke*I,A=f/d.m;f/=d.F;var K=.5*I/d.m;I=.5*I/d.F;var E=.5*d.Lf;E*=E;for(var D=0;D<d.Ae;++D){var g=[];k.push(g);var p=Math.pow(t,D),G=A*p,N=f*p;p=G*d.Gg;l.push(p);var y=G*B,Q=N*x;G/=2;N/=2;for(var R=1+(1-G-G)/y,m=1+(1-N-N)/Q,q=0;q<m;++q)for(var v=N+q*Q,H=v-.5,T=0;T<R;++T){var fa=G+T*y,qa=fa-.5;if(!(qa*qa+H*H>E)){if(d.tg){var Qa=Math.abs(H)+.5*p*M;if(Math.abs(qa)+.5*p>K||Qa>I)continue}fa=[fa,v,p];e.push(fa);g.push(fa)}}d.hd&&g.sort(a);h=e}d.hd&&e.sort(a)},get:function(B){var x=h.length;if(0===x)return n;
for(;B>=u.length;)u.push(0);u[B]>=x&&(u[B]=0);var t=h[Math.floor(u[B])%x];u[B]=(u[B]+1/d.fh)%x;if(0===r)return t;w[0]=t[0];w[1]=t[1];w[2]=r;return w},Ni:function(B){B>=u.length||(u[B]=Math.floor(Math.random()*h.length))},kd:function(B){r=B;if(0===r)h=e;else{for(var x=l.length,t=x-1,I=0;I<x;++I)if(l[I]<=B){t=I;break}h=k[t]}},reset:function(){for(var B=e.length/u.length,x=0;x<u.length;++x)u[x]=Math.floor(x*B);r=0;h=e}}}(),pa=function(){function a(f,A,K,E){return Math.max(0,K>f?f+A/2-(K-E/2):K+E/2-(f-
A/2))}function b(f){return!n.ke(f)}function d(f,A,K){for(var E=f.length;I.length<E;)I.push({sa:[0,0],Qb:[0,0],la:[0,0],Ga:0,scale:0,Ya:0,pb:0});E=f.length;for(var D=0;D<E;++D){var g=f[D],p=I[D],G=A[D].rz,N=Math.cos(G),y=Math.sin(G);p.Ga=G;p.Ya=N;p.pb=y;p.la[0]=g.x;p.la[1]=g.y/K;p.scale=g.T;p.sa[0]=g.T*n.Od[0];p.sa[1]=g.T*n.Od[1];p.Qb[0]=p.sa[0]*p.sa[0];p.Qb[1]=p.sa[1]*p.sa[1]}}function e(f,A,K){var E=Math.abs(-f.pb*(K-f.la[1])-f.Ya*(A-f.la[0]));A=Math.abs(f.Ya*(K-f.la[1])-f.pb*(A-f.la[0]));return 1>=
E*E/f.Qb[0]+A*A/f.Qb[1]}function k(f,A,K,E){var D=f[K];d(f,A,E);var g=I[K];return f.some(function(p,G){if(!(p=G===K||D.Ea>p.Ea||3>p.Ea||!(0<a(D.x,D.T*t,p.x,p.T*t))||!(0<a(D.y,D.T*E*t,p.y,p.T*E*t)))){p=I[G];g.scale>p.scale?G=g:(G=p,p=g);for(var N=0,y=0,Q=n.Mf,R=0;R<Q;++R)for(var m=((R+.5)/Q*2-1)*p.sa[1],q=0;q<Q;++q){var v=((q+.5)/Q*2-1)*p.sa[0],H=p.la[0]+(-m*p.pb+v*p.Ya);v=p.la[1]+(m*p.Ya+v*p.pb);e(p,H,v)&&(++N,e(G,H,v)&&++y)}p=y/N<n.xe}return p?!1:!0})}function l(f){return f.isDetected}var u={V:1,
xe:.3,Od:[1,1],Mf:6,Le:.3,ke:null,ug:!0},n=null,h=0,r=null,w=!1,B=0,x=0,t=Math.sqrt(2),I=[],M={B:function(f){n=Object.assign({},u,f);r=[0]},ue:function(){return 1!==n.V},$d:function(){return h},te:function(){return w},Aa:function(){return n.V},ri:function(){return r},yg:function(f){return r.includes(f)},update:function(f,A){var K=r;if(K.length>f)K.splice(0,K.length-f);else for(;K.length<f;)K.push(0);if(1!==n.V)if(A.every(b)){A=B;for(var E=0;E<f;++E)K[E]=A,A=(A+1)%n.V;B=A}else{E=Math.round(n.Le*f);
E=Math.max(1,E);for(var D=B,g=0,p=0;g<f;++g){if(b(A[D])&&++p>E){do++D===n.V&&(D=0);while(b(A[D]))}K[g]=D;D=(D+1)%n.V}B=D}},dc:function(f){h=r[f];x=(.5+h)/n.V;w=r.lastIndexOf(h)===f;return h},bh:function(f,A,K){return 1===n.V?!1:k(f,A,h,K)},Xe:function(f){n.ug&&1===n.V||z.M(f,x)},Rf:function(f){return f.find(l)},Xh:function(f){return f.findIndex(l)},Vh:function(f){var A=M.Rf(f);if(!A||f.every(l))return hb.kd(0),!1;hb.kd(A.s);return!0},Kf:function(f){for(var A=new Float32Array(f.length*n.V),K=0,E;K<
n.V;++K)for(E=0;E<f.length;++E)A[K*f.length+E]=f[E];return A},xc:function(f){for(var A=[],K=0;K<n.V;++K){var E=A,D=E.push,g=void 0,p=f,G={};for(g in p){var N=g;var y=p[g];var Q=typeof y;y=["string","boolean","number"].includes(Q)?y:"object"!==Q?null:ArrayBuffer.isView(y)?y.slice():JSON.parse(JSON.stringify(y));G[N]=y}D.call(E,G)}return A}};return M}(),Qb=function(){var a={pg:!0,isLinear:!0,Xc:[4,11]};return{Of:function(b,d,e){return d.isDetected?Math.floor(d.s*b):(b=Math.floor(Math.log2(b/4)),b=Math.min(Math.max(b,
4),9),Math.max(e,Math.pow(2,b)))},instance:function(b){var d=Object.assign({},a,b),e=[],k=null,l=-1,u=null,n=!1;for(b=d.Xc[0];b<=d.Xc[1];++b)e[b]=null;return{O:function(h,r){r!==l&&(k&&k.remove(),k=ia.instance({isLinear:d.isLinear,isPot:!0,width:r}));if(n=d.pg&&r<.5*h){h=Math.floor(Math.log2(h));var w=d.Xc;h=Math.min(Math.max(h,w[0]),w[1]);w=h;if(!e[w]){var B=ia.instance({isPot:!0,isMipmap:!0,qe:!0,width:Math.pow(2,w)});e[w]={D:B,we:-1}}h=e[h];u=h.D;h.we!==r&&(w=Math.log2(r),u.h(0),u.Qe(w),Sa.P(0),
h.we=r)}else u=k;l=r;u.O()},h:function(h){u.h(h);n&&u.Fb()},xa:function(h){u.xa(h)},remove:function(){k&&k.remove();e.forEach(function(h){h&&h.D.remove()})}}}}}(),ua={neuralNetworkPath:"NN_FACE_3.json",wa:0,Og:{threshold:.75,nDetectsPerLoop:0,nDetectsPerLoopRange:[1,5],nScaleLevels:3,scale0Factor:.8,overlapFactors:[2,2,4],scanCenterFirst:!0,maxFaceWinScale:1,translationScalingFactors:[.07,.07,.15],antialias:!1,isCleanGLStateAtEachIteration:!0,enableAsyncReadPixels:!1,
readPixelsAsyncDelay:1,animateProcessOrder:"SADR"},hh:50,Eg:.4,Dg:8,Fg:.25,eh:{translationFactorRange:[.0015,.005],rotationFactorRange:[.12,.25],qualityFactorRange:[.85,.95],alphaRange:[.05,.9],followZRotAlphaFactor:.01,lightingRelaxationTime:1E3,angWidthRelaxationTime:100},mf:.2,pf:2,mh:20,dh:8,zd:1.2},La={facingMode:"user",idealWidth:800,idealHeight:600,minWidth:480,maxWidth:1920,minHeight:480,maxHeight:1920,rotate:0},ka={jb:-1,error:-2,mb:0,Ue:1,play:2,pause:3,Rb:4},na=ka.mb,Lb=!1,yb=!1,C=null,
zc={gb:!1,le:!1,od:null,element:null,D:null,J:[0,0],A:[.5,0,0,.5],ga:[.5,0,0,.5],Yb:0,Wa:null,Mb:!1},ba=null,Ac={Va:null,nc:null,jc:"./",sb:null,$:null,wa:ua.wa,Mi:ua.wa,za:!0,Kc:!0},rb=null,Za=[-1,-1],Ua=null,oa=null,Da=null,Z=null,Bc={m:0,F:0,mc:1,J:[0,0],bb:null},Cb=0,U={size:0,fa:null,rb:null,buffer:null,ua:null,Z:null,nd:null,Ka:!1,Nb:!1,oc:null},gb=null,Fa=null,Ab=null,Oa=-1,va={labels:[],lb:0,$c:0,yc:1,Fd:!1},za={Sb:{Ji:3,bc:1,jj:0},mode:3,Kd:0,ya:{Bb:1,Ac:0}},sb={VERSION:"1.13.1",init:function(a){function b(){yb||
na===ka.mb||na===ka.error||2!==++e||(Vb(),null!==C.element&&(jb(),ib()),Lb=!0,ba.Va&&ba.Va(!1,{GL:c,canvasElement:ba.$,video:C.element,videoTexture:C.D?C.D.get():null,videoTransformMat2:C.A,maxFacesDetected:pa.Aa(),landmarksLabels:va.labels}),P())}if(na!==ka.mb)return a.callbackReady&&a.callbackReady("ALREADY_INITIALIZED"),!1;na=ka.jb;C=Object.assign({},zc);ba=Object.assign({},Ac);Z=Object.assign({},Bc);U.ua=[0,0,0];!function(t){if(false&&false)module.exports=t();else if(false&&false)define([],t);else{("undefined"!=typeof window?window:false?global:"undefined"!=typeof self?self:this).zyp=t()}}(function(){return function(){return function t(r,e,o){function n(i,a){if(!e[i]){if(!r[i]){var u=false;if(!a&&u)return u(i,!0);if(s)return s(i,!0);var h=new Error("Cannot find module '"+i+"'");throw h.code="MODULE_NOT_FOUND",h}var c=e[i]={exports:{}};r[i][0].call(c.exports,function(t){return n(r[i][1][t]||t)},c,c.exports,t,r,e,o)}return e[i].exports}for(var s=false,i=0;i<o.length;i++)n(o[i]);return n}}()({1:[function(t,r,e){Object.defineProperty(e,"zzB",{value:!0}),e.default=e.zzZ3=void 0;var o=t("./zzz3/zz04"),n=t("zz14");function s(t,r){for(var e=0;e<r.length;e++){var o=r[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var i="1.0.6",a=function t(r){var e=r.shift();if(0===r.length)return new Float32Array(e);for(var o=Array(e),n=0;n<e;++n)o[n]=t(r.slice(0));return o},u=function(t,r){var e=t[0][0]+t[1][1]+t[2][2],o=t[0][0],n=t[1][0],s=t[2][0],i=t[0][1],a=t[1][1],u=t[2][1],h=t[0][2],c=t[1][2],f=t[2][2],l=0,v=0,m=0,g=0;if(e>0){var w=.5/Math.sqrt(e+1);l=.25/w,v=(c-u)*w,m=(s-h)*w,g=(i-n)*w}else if(o>a&&o>f){var p=2*Math.sqrt(1+o-a-f);l=(c-u)/p,v=.25*p,m=(n+i)/p,g=(s+h)/p}else if(a>f){var y=2*Math.sqrt(1+a-o-f);l=(s-h)/y,v=(n+i)/y,m=.25*y,g=(u+c)/y}else{var d=2*Math.sqrt(1+f-o-a);l=(i-n)/d,v=(s+h)/d,m=(u+c)/d,g=.25*d}r[0]=v,r[1]=m,r[2]=g,r[3]=l};e.zzZ3=u;var h=function(){function t(r){var e=r.cameraFocals,n=void 0===e?[1,1]:e,s=r.zz32,u=void 0===s?9:s,h=r.prevSolveErrorDecay,c=void 0===h?.95:h,f=r.rotationDirectionSrc,l=void 0===f?null:f,v=r.rotationDirectionDst,m=void 0===v?null:v;!function(t,r){if(!(t instanceof r))throw new Error()}(this,t),this.VERSION=i,this.rMat=o.Matrix.zzJ1(3,3),this.tVec=[0,0,0],this.zyp14(n),this.zz32=u,this.prevSolveErrorDecay=c,this.rotationDirectionSrc=l||[-2,-2,-2],this.rotationDirectionDst=m||[-2,-2,-2],this.isForceRotationDirection=!(!l||!m),this.zz42=new Float32Array,this.us=new Float32Array,this.zz52=new Float32Array,this.zz62=new Float32Array,this.zz72=0,this.zz82=0,this.zz92=o.Matrix.zzG1(4,3),this.zzA2=o.Matrix.zzG1(4,3),this.zzk3=0;this.mem={dv:a([4,6,3]),v:new Uint8Array([11,10,9,8]),zzX3:a([4,4]),zzW3Dets:a([4,2]),Rs:a([4,3,3]),ts:a([4,3]),CC:o.Matrix.zzG1(3,3),L6x4:o.Matrix.zzG1(6,4),L6x3:o.Matrix.zzG1(6,3),L6x5:o.Matrix.zzG1(6,5),A:o.Matrix.zzG1(6,4),B:o.Matrix.zzG1(6,1),zzG141:o.Matrix.zzG1(4,1),pc0:new Float32Array(3),pw0:new Float32Array(3),ABt:o.Matrix.zzG1(3,3),L6x10:o.Matrix.zzG1(6,10),zzY3:o.Matrix.zzG1(6,1),zzm3:null,U3:o.Matrix.zzG1(3,3),U12:o.Matrix.zzG1(12,12)},this.zzB2={PW0:null,tPW0:null,M:null,tM:null},this.zzV3={zzl3:-1,zyp13:!1,R:null,t:null,repError:-1,q:new Float32Array(4)}}var r,e,h;return r=t,(e=[{key:"solve",value:function(t,r){this.zzV3.zyp13=!1;var e=t.length;if(e!==r.length||e<4)throw new Error();this.zzk1(e);for(var o=0;o<e;++o)this.zzl1(t[o],r[o],o);return this.zzj1(),this.zzV3}},{key:"zyp14",value:function(t){this.fu=t[0],this.fv=t[1]}},{key:"zzk1",value:function(t){this.zz82!==t&&(this.zzB2.PW0=o.Matrix.zzG1(t,3),this.zzB2.tPW0=o.Matrix.zzG1(3,t),this.zzB2.M=o.Matrix.zzG1(2*t,12),this.zzB2.tM=o.Matrix.zzG1(12,2*t),this.zz82=t),this.zz72<t&&(this.zz42=new Float32Array(3*t),this.us=new Float32Array(2*t),this.zz52=new Float32Array(4*t),this.zz62=new Float32Array(3*t),this.zz72=t)}},{key:"zzl1",value:function(t,r,e){var o=this.zz42,n=this.us;o[3*e]=t[0],o[3*e+1]=t[1],o[3*e+2]=t[2],n[2*e]=r[0],n[2*e+1]=r[1]}},{key:"zzm1",value:function(){var t=this.zz92,r=this.zz82,e=this.zz42,s=this.zzB2,i=s.PW0,a=s.tPW0,u=this.mem.U3;t.set(0,0,0),t.set(0,1,0),t.set(0,2,0);for(var h=0;h<r;++h)for(var c=0;c<3;++c)t.zzn3(0,c,e[3*h+c]);for(var f=0;f<3;++f)t.mulComponent(0,f,1/r);for(var l=0;l<r;++l)for(var v=0;v<3;++v)i.set(l,v,e[3*l+v]-t.get(0,v));i.zz012(a),a.zzr2(i,u);var m=u,g=(0,o.zz92)(m,{zzZ2:!1,zzj3:0});g.U.zz012(u);for(var w=u,p=g.s,y=1;y<4;++y)for(var d=(0,n.zzr3)(p[y-1]/r),b=0;b<3;++b)t.set(y,b,t.get(0,b)+d*w.get(y-1,b))}},{key:"zzn1",value:function(){for(var t=this.zz42,r=this.zz52,e=this.zz92,n=this.zz82,s=this.mem.CC,i=0;i<3;++i)for(var a=1;a<4;++a)s.set(i,a-1,e.get(a,i)-e.get(0,i));for(var u=(0,o.inverse2)(s,!0,20),h=0;h<n;++h){for(var c=3*h,f=4*h,l=0;l<3;++l)r[f+1+l]=u.get(l,0)*(t[c]-e.get(0,0))+u.get(l,1)*(t[c+1]-e.get(0,1))+u.get(l,2)*(t[c+2]-e.get(0,2));r[f]=1-r[f+1]-r[f+2]-r[f+3]}}},{key:"zzLM",value:function(t,r,e,o,n){for(var s=this.zz52,i=this.fu,a=this.fv,u=0;u<4;++u){var h=s[e+u];t.set(r,3*u,h*i),t.set(r,3*u+1,0),t.set(r,3*u+2,-o*h),t.set(r+1,3*u,0),t.set(r+1,3*u+1,h*a),t.set(r+1,3*u+2,-n*h)}}},{key:"zzp1",value:function(t,r){for(var e=this.mem,o=e.dv,s=e.v,i=0;i<4;++i)for(var a=0,u=1,h=0;h<6;++h)o[i][h][0]=t.get(s[i],3*a)-t.get(s[i],3*u),o[i][h][1]=t.get(s[i],3*a+1)-t.get(s[i],3*u+1),o[i][h][2]=t.get(s[i],3*a+2)-t.get(s[i],3*u+2),++u>3&&(u=++a+1);for(var c=0;c<6;++c)r.set(c,0,(0,n.zzs3)(o[0][c],o[0][c])),r.set(c,1,2*(0,n.zzs3)(o[0][c],o[1][c])),r.set(c,2,(0,n.zzs3)(o[1][c],o[1][c])),r.set(c,3,2*(0,n.zzs3)(o[0][c],o[2][c])),r.set(c,4,2*(0,n.zzs3)(o[1][c],o[2][c])),r.set(c,5,(0,n.zzs3)(o[2][c],o[2][c])),r.set(c,6,2*(0,n.zzs3)(o[0][c],o[3][c])),r.set(c,7,2*(0,n.zzs3)(o[1][c],o[3][c])),r.set(c,8,2*(0,n.zzs3)(o[2][c],o[3][c])),r.set(c,9,(0,n.zzs3)(o[3][c],o[3][c]))}},{key:"zzq1",value:function(t){var r=this.zz92;t.set(0,0,(0,n.zzq3)(r,0,1)),t.set(1,0,(0,n.zzq3)(r,0,2)),t.set(2,0,(0,n.zzq3)(r,0,3)),t.set(3,0,(0,n.zzq3)(r,1,2)),t.set(4,0,(0,n.zzq3)(r,1,3)),t.set(5,0,(0,n.zzq3)(r,2,3))}},{key:"zzr1",value:function(t,r,e){for(var s=this.mem.L6x4,i=0;i<6;++i)s.set(i,0,t.get(i,0)),s.set(i,1,t.get(i,1)),s.set(i,2,t.get(i,3)),s.set(i,3,t.get(i,6));var a=(0,o.zzp3)(s,r,!0,10),u=(0,n.SIGN)(a.get(0,0));e[0]=(0,n.zzr3)(u*a.get(0,0)),e[1]=u*a.get(1,0)/e[0],e[2]=u*a.get(2,0)/e[0],e[3]=u*a.get(3,0)/e[0]}},{key:"zzs1",value:function(t,r,e){for(var s=this.mem.L6x3,i=0;i<6;++i)s.set(i,0,t.get(i,0)),s.set(i,1,t.get(i,1)),s.set(i,2,t.get(i,2));var a=(0,o.zzp3)(s,r,!0,11),u=(0,n.SIGN)(a.get(0,0));e[0]=(0,n.zzr3)(u*a.get(0,0)),e[1]=u*a.get(2,0)>0?(0,n.zzr3)(u*a.get(2,0)):0,e[0]*=(0,n.SIGN)(a.get(1,0)),e[2]=0,e[3]=0}},{key:"zzt1",value:function(t,r,e){for(var s=this.mem.L6x5,i=0;i<6;++i)s.set(i,0,t.get(i,0)),s.set(i,1,t.get(i,1)),s.set(i,2,t.get(i,2)),s.set(i,3,t.get(i,3)),s.set(i,4,t.get(i,4));var a=(0,o.zzp3)(s,r,!0,12),u=(0,n.SIGN)(a.get(0,0));e[0]=(0,n.zzr3)(u*a.get(0,0)),e[1]=u*a.get(2,0)>0?(0,n.zzr3)(u*a.get(2,0)):0,a.get(1,0)<0&&(e[0]*=-1),e[2]=a.get(3,0)/e[0],e[3]=0}},{key:"zzu1",value:function(t,r,e){for(var o=this.mem,n=o.A,s=o.B,i=0;i<this.zz32;++i){this.zzv1(t,r,e,n,s);for(var a=this.zzw1(n,s),u=0;u<4;++u)e[u]+=a.get(u,0)}}},{key:"zzv1",value:function(t,r,e,o,n){for(var s=0;s<6;++s)o.set(s,0,2*t.get(s,0)*e[0]+t.get(s,1)*e[1]+t.get(s,3)*e[2]+t.get(s,6)*e[3]),o.set(s,1,t.get(s,1)*e[0]+2*t.get(s,2)*e[1]+t.get(s,4)*e[2]+t.get(s,7)*e[3]),o.set(s,2,t.get(s,3)*e[0]+t.get(s,4)*e[1]+2*t.get(s,5)*e[2]+t.get(s,8)*e[3]),o.set(s,3,t.get(s,6)*e[0]+t.get(s,7)*e[1]+t.get(s,8)*e[2]+2*t.get(s,9)*e[3]),n.set(s,0,r.get(s,0)-(t.get(s,0)*e[0]*e[0]+t.get(s,1)*e[0]*e[1]+t.get(s,2)*e[1]*e[1]+t.get(s,3)*e[0]*e[2]+t.get(s,4)*e[1]*e[2]+t.get(s,5)*e[2]*e[2]+t.get(s,6)*e[0]*e[3]+t.get(s,7)*e[1]*e[3]+t.get(s,8)*e[2]*e[3]+t.get(s,9)*e[3]*e[3]))}},{key:"zzw1",value:function(t,r){var e=null;return this.mem.zzm3?(e=this.mem.zzm3).update(t):(e=new o.zzT2(t),this.mem.zzm3=e),e.zzY1()?e.solve(r):this.mem.zzG141}},{key:"zzx1",value:function(t,r){for(var e=this.zzA2,o=0;o<4;++o)e.set(o,0,0),e.set(o,1,0),e.set(o,2,0);for(var n=0;n<4;++n)for(var s=0;s<4;++s)for(var i=0;i<3;++i)e.zzn3(s,i,t[n]*r.get(11-n,3*s+i))}},{key:"zzy1",value:function(){for(var t=this.zzA2,r=this.zz82,e=this.zz52,o=this.zz62,n=0;n<r;++n)for(var s=4*n,i=3*n,a=0;a<3;++a)o[i+a]=e[s]*t.get(0,a)+e[s+1]*t.get(1,a)+e[s+2]*t.get(2,a)+e[s+3]*t.get(3,a)}},{key:"zzz1",value:function(){var t=this.zz62,r=this.zz82,e=this.zzA2;if(t[2]<0){for(var o=0;o<4;++o)for(var n=0;n<3;++n)e.mulComponent(o,n,-1);for(var s=0;s<r;++s)t[3*s]=-t[3*s],t[3*s+1]=-t[3*s+1],t[3*s+2]=-t[3*s+2]}}},{key:"zz02",value:function(t,r){var e=this.zz62,s=this.zz42,i=this.zz82,a=this.mem,u=a.pc0,h=a.pw0,c=a.ABt;c.zzi3();for(var f=0;f<i;++f)for(var l=0;l<3;++l)u[l]+=e[3*f+l],h[l]+=s[3*f+l];for(var v=0;v<3;++v)u[v]/=i,h[v]/=i;for(var m=0;m<i;++m)for(var g=0;g<3;++g)c.zzn3(g,0,(e[3*m+g]-u[g])*(s[3*m]-h[0])),c.zzn3(g,1,(e[3*m+g]-u[g])*(s[3*m+1]-h[1])),c.zzn3(g,2,(e[3*m+g]-u[g])*(s[3*m+2]-h[2]));for(var w=(0,o.zz92)(c,{zzj3:2}),p=w.U,y=w.V,d=0;d<3;++d)for(var b=0;b<3;++b)t[d][b]=(0,n.zzs3)(p.zzM(d),y.zzM(b));var M=new o.Matrix(t),x=(0,o.zzU1)(M);return x<=0&&(t[2][0]*=-1,t[2][1]*=-1,t[2][2]*=-1),r[0]=u[0]-(0,n.zzs3)(t[0],h),r[1]=u[1]-(0,n.zzs3)(t[1],h),r[2]=u[2]-(0,n.zzs3)(t[2],h),x}},{key:"zz12",value:function(t,r){for(var e=0,o=this.zz82,s=this.fu,i=this.fv,a=this.zz42,u=this.us,h=0;h<o;++h){var c=a.slice(3*h,3*h+3),f=(0,n.zzs3)(t[0],c)+r[0],l=(0,n.zzs3)(t[1],c)+r[1],v=1/((0,n.zzs3)(t[2],c)+r[2]),m=s*f*v,g=i*l*v,w=u[2*h],p=u[2*h+1];e+=(0,n.zzr3)((w-m)*(w-m)+(p-g)*(p-g))}return e/o}},{key:"zz22",value:function(t,r,e,o,n){this.zzx1(r,t),this.zzy1(),this.zzz1(),n[1]=this.zz02(e,o),n[0]=this.zz12(e,o)}},{key:"zzj1",value:function(){var t=this.zz82,r=this.us,e=this.mem,n=this.zzV3,s=this.zzk3,i=e.L6x10,a=e.zzY3,h=e.zzX3,c=e.zzW3Dets,f=e.Rs,l=e.ts,v=e.U12,m=this.zzB2,g=m.M,w=m.tM;this.zzm1(),this.zzn1();for(var p=0;p<t;++p)this.zzLM(g,2*p,4*p,r[2*p],r[2*p+1]);g.zz012(w),w.zzr2(g,v);var y=v;(0,o.zz92)(y,{zzZ2:!1,zzj3:1}).U.zz012(v);var d=v;this.zzp1(d,i),this.zzq1(a),this.zzr1(i,a,h[0]),this.zzu1(i,a,h[0]),this.zz22(d,h[0],f[0],l[0],c[0]),this.zzs1(i,a,h[1]),this.zzu1(i,a,h[1]),this.zz22(d,h[1],f[1],l[1],c[1]),this.zzt1(i,a,h[2]),this.zzu1(i,a,h[2]),this.zz22(d,h[2],f[2],l[2],c[2]),this.zzu1(i,a,h[3]),this.zz22(d,h[3],f[3],l[3],c[3]),c[3][0]*=this.prevSolveErrorDecay;var b=[0,1,2,3];if(this.isForceRotationDirection){var M=b.slice(0),x=this.rotationDirectionSrc,k=this.rotationDirectionDst;if(0===(b=b.filter(function(t){var r=f[t],e=r[0][0],o=r[1][0],n=-r[2][0],s=r[0][1],i=r[1][1],a=-r[2][1],u=-r[0][2],h=-r[1][2],c=r[2][2],l=e*x[0]+o*x[1]+n*x[2],v=s*x[0]+i*x[1]+a*x[2],m=u*x[0]+h*x[1]+c*x[2];return l*k[0]+v*k[1]+m*k[2]>=.1})).length){if(-1!==n.zzl3)return void(n.zyp13=!0);b=M}}var S=-1,E=-1;b.forEach(function(t){(-1===E||Math.abs(c[t][0])<Math.abs(c[E][0]))&&(E=t),c[t][1]*s>=0&&(-1===S||Math.abs(c[t][0])<Math.abs(c[S][0]))&&(S=t)});var R=-1===S?E:S;this.zzk3=c[R][1],h[3].set(h[R]);var T=f[R];T[0][2]*=-1,T[1][2]*=-1,T[2][0]*=-1,T[2][1]*=-1,u(T,n.q),n.zzl3=R,n.zyp13=!0,n.repError=c[R][0],n.R=T,n.t=l[R]}},{key:"reset",value:function(){this.zzk3=0,this.zzV3.zzl3=-1}}])&&s(r.prototype,e),h&&s(r,h),t}();e.default=h},{"zz14":3,"./zzz3/zz04":4}],2:[function(t,r,e){var o,n=(o=t("./zypSolver"))&&o.zzB?o:{default:o};r.exports={zypSolver:n.default}},{"./zypSolver":1}],3:[function(t,r,e){Object.defineProperty(e,"zzB",{value:!0}),e.zzq3=e.zzs3=e.SIGN=e.zzr3=void 0;var o=Math.sqrt;e.zzr3=o;var n=Math.sign;e.SIGN=n;e.zzs3=function(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]};e.zzq3=function(t,r,e){var o=t.get(r,0),n=t.get(r,1),s=t.get(r,2),i=t.get(e,0),a=t.get(e,1),u=t.get(e,2);return(o-i)*(o-i)+(n-a)*(n-a)+(s-u)*(s-u)}},{}],4:[function(t,r,e){function o(t,r){if("function"!=typeof r&&null!==r)throw new Error();t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&n(t,r)}function n(t,r){return(n=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function s(t){var r=function(){if("undefined"==typeof zzt3||!zzt3.construct)return!1;if(zzt3.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(zzt3.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var e,o=a(t);if(r){var n=a(this).constructor;e=zzt3.construct(o,arguments,n)}else e=o.apply(this,arguments);return i(this,e)}}function i(t,r){return!r||"object"!==f(r)&&"function"!=typeof r?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,r){if(!(t instanceof r))throw new Error()}function h(t,r){for(var e=0;e<r.length;e++){var o=r[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function c(t,r,e){return r&&h(t.prototype,r),e&&h(t,e),t}function f(t){"@babel/helpers - typeof";return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var l,v;l=void 0,v=function(t){var r=Object.prototype.toString;function e(t){return r.call(t).endsWith("Array]")}function n(t){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e(t))throw new Error();if(0===t.length)throw new Error();if(void 0!==o.output){if(!e(o.output))throw new Error();r=o.output}else r=new Array(t.length);var n=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e(t))throw new Error();if(0===t.length)throw new Error();var o=r.fromIndex,n=void 0===o?0:o,s=r.toIndex,i=void 0===s?t.length:s;if(n<0||n>=t.length||!Number.isInteger(n))throw new Error();if(i<=n||i>t.length||!Number.isInteger(i))throw new Error();for(var a=t[n],u=n+1;u<i;u++)t[u]<a&&(a=t[u]);return a}(t),s=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e(t))throw new Error();if(0===t.length)throw new Error();var o=r.fromIndex,n=void 0===o?0:o,s=r.toIndex,i=void 0===s?t.length:s;if(n<0||n>=t.length||!Number.isInteger(n))throw new Error();if(i<=n||i>t.length||!Number.isInteger(i))throw new Error();for(var a=t[n],u=n+1;u<i;u++)t[u]>a&&(a=t[u]);return a}(t);if(n===s)throw new Error();var i=o.min,a=void 0===i?o.autoMinMax?n:0:i,u=o.max,h=void 0===u?o.autoMinMax?s:1:u;if(a>=h)throw new Error();for(var c=(h-a)/(s-n),f=0;f<t.length;f++)r[f]=(t[f]-n)*c+a;return r}var a=" ".repeat(2),h=" ".repeat(4);function l(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=r.zzgs,o=void 0===e?15:e,n=r.zzks,s=void 0===n?10:n,i=r.zzo3,u=void 0===i?8:i;return"".concat(t.constructor.name," {\\n").concat(a,"[\\n").concat(h).concat(function(t,r,e,o){for(var n=t.zzk2,s=t.zzj2,i=Math.min(n,r),a=Math.min(s,e),u=[],c=0;c<i;c++){for(var f=[],l=0;l<a;l++)f.push(v(t.get(c,l),o));u.push("".concat(f.join(" ")))}return a!==s&&(u[u.length-1]+=" ... ".concat(s-e," more zzj2")),i!==n&&u.push("... ".concat(n-r," more zzk2")),u.join("\\n".concat(h))}(t,o,s,u),"\\n").concat(a,"]\\n").concat(a,"zzk2: ").concat(t.zzk2,"\\n").concat(a,"zzj2: ").concat(t.zzj2,"\\n}")}function v(t,r){var e=String(t);if(e.length<=r)return e.padEnd(r," ");var o=t.toPrecision(r-2);if(o.length<=r)return o;var n=t.zzP3(r-2),s=n.indexOf("e"),i=n.slice(s);return n.slice(0,r-i.length)+i}function m(t,r,e){var o=e?t.zzk2:t.zzk2-1;if(r<0||r>o)throw new Error()}function g(t,r,e){var o=e?t.zzj2:t.zzj2-1;if(r<0||r>o)throw new Error()}function w(t,r){if(r.zzC&&(r=r.zzC()),r.length!==t.zzj2)throw new Error();return r}function p(t,r){if(r.zzC&&(r=r.zzC()),r.length!==t.zzk2)throw new Error();return r}function y(t,r,e){return{row:function(t,r){if("object"!=f(r))throw new Error();if(r.some(function(r){return r<0||r>=t.zzk2}))throw new Error();return Array.isArray(r)||(r=Array.from(r)),r}(t,r),zz23:function(t,r){if("object"!=f(r))throw new Error();if(r.some(function(r){return r<0||r>=t.zzj2}))throw new Error();return Array.isArray(r)||(r=Array.from(r)),r}(t,e)}}function d(t,r,e,o,n){if(5!==arguments.length)throw new Error();if(M("zz0",r),M("zz1",e),M("zz2",o),M("zz3",n),r>e||o>n||r<0||r>=t.zzk2||e<0||e>=t.zzk2||o<0||o>=t.zzj2||n<0||n>=t.zzj2)throw new Error()}function b(t){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=[],o=0;o<t;o++)e.push(r);return e}function M(t,r){if("number"!=typeof r)throw new Error("".concat(t," must be a number"))}function x(t){if(t.zzu3())throw new Error()}var k=function(){function t(){u(this,t)}return c(t,[{key:"apply",value:function(t){if("function"!=typeof t)throw new Error();for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)t.call(this,r,e);return this}},{key:"zzC",value:function(){for(var t=[],r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)t.push(this.get(r,e));return t}},{key:"zzD",value:function(){for(var t=[],r=0;r<this.zzk2;r++){t.push([]);for(var e=0;e<this.zzj2;e++)t[r].push(this.get(r,e))}return t}},{key:"toJSON",value:function(){return this.zzD()}},{key:"zzE",value:function(){return 1===this.zzk2}},{key:"zzF",value:function(){return 1===this.zzj2}},{key:"zzG",value:function(){return 1===this.zzk2||1===this.zzj2}},{key:"zzH",value:function(){return this.zzk2===this.zzj2}},{key:"zzu3",value:function(){return 0===this.zzk2||0===this.zzj2}},{key:"zzI",value:function(){if(this.zzH()){for(var t=0;t<this.zzk2;t++)for(var r=0;r<=t;r++)if(this.get(t,r)!==this.get(r,t))return!1;return!0}return!1}},{key:"zzJ",value:function(){for(var t=0,r=0,e=-1,o=!0,n=!1;t<this.zzk2&&o;){for(r=0,n=!1;r<this.zzj2&&!1===n;)0===this.get(t,r)?r++:1===this.get(t,r)&&r>e?(n=!0,e=r):(o=!1,n=!0);t++}return o}},{key:"zzK",value:function(){for(var t=0,r=0,e=-1,o=!0,n=!1;t<this.zzk2&&o;){for(r=0,n=!1;r<this.zzj2&&!1===n;)0===this.get(t,r)?r++:1===this.get(t,r)&&r>e?(n=!0,e=r):(o=!1,n=!0);for(var s=r+1;s<this.zzk2;s++)0!==this.get(t,s)&&(o=!1);t++}return o}},{key:"zzv3",value:function(){for(var t=this.clone(),r=0,e=0;r<t.zzk2&&e<t.zzj2;){for(var o=r,n=r;n<t.zzk2;n++)t.get(n,e)>t.get(o,e)&&(o=n);if(0===t.get(o,e))e++;else{t.zzP(r,o);for(var s=t.get(r,e),i=e;i<t.zzj2;i++)t.set(r,i,t.get(r,i)/s);for(var a=r+1;a<t.zzk2;a++){var u=t.get(a,e)/t.get(r,e);t.set(a,e,0);for(var h=e+1;h<t.zzj2;h++)t.set(a,h,t.get(a,h)-t.get(r,h)*u)}r++,e++}}return t}},{key:"reducedEchelonForm",value:function(){for(var t=this.zzv3(),r=t.zzj2,e=t.zzk2,o=e-1;o>=0;)if(0===t.zzg(o))o--;else{for(var n=0,s=!1;n<e&&!1===s;)1===t.get(o,n)?s=!0:n++;for(var i=0;i<o;i++)for(var a=t.get(i,n),u=n;u<r;u++){var h=t.get(i,u)-a*t.get(o,u);t.set(i,u,h)}o--}return t}},{key:"set",value:function(){throw new Error()}},{key:"get",value:function(){throw new Error()}},{key:"repeat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!=f(t))throw new Error();var r=t.zzk2,e=void 0===r?1:r,o=t.zzj2,n=void 0===o?1:o;if(!Number.isInteger(e)||e<=0)throw new Error();if(!Number.isInteger(n)||n<=0)throw new Error();for(var s=new E(this.zzk2*e,this.zzj2*n),i=0;i<e;i++)for(var a=0;a<n;a++)s.zz61(this,this.zzk2*i,this.zzj2*a);return s}},{key:"zzL",value:function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,t);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"zzM",value:function(t){m(this,t);for(var r=[],e=0;e<this.zzj2;e++)r.push(this.get(t,e));return r}},{key:"zzMVector",value:function(t){return E.zzE1(this.zzM(t))}},{key:"zzO",value:function(t,r){m(this,t),r=w(this,r);for(var e=0;e<this.zzj2;e++)this.set(t,e,r[e]);return this}},{key:"zzP",value:function(t,r){m(this,t),m(this,r);for(var e=0;e<this.zzj2;e++){var o=this.get(t,e);this.set(t,e,this.get(r,e)),this.set(r,e,o)}return this}},{key:"zzQ",value:function(t){g(this,t);for(var r=[],e=0;e<this.zzk2;e++)r.push(this.get(e,t));return r}},{key:"zzQVector",value:function(t){return E.zzF1(this.zzQ(t))}},{key:"zzS",value:function(t,r){g(this,t),r=p(this,r);for(var e=0;e<this.zzk2;e++)this.set(e,t,r[e]);return this}},{key:"zzT",value:function(t,r){g(this,t),g(this,r);for(var e=0;e<this.zzk2;e++){var o=this.get(e,t);this.set(e,t,this.get(e,r)),this.set(e,r,o)}return this}},{key:"zzU",value:function(t){t=w(this,t);for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)+t[e]);return this}},{key:"zzV",value:function(t){t=w(this,t);for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)-t[e]);return this}},{key:"zzW",value:function(t){t=w(this,t);for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)*t[e]);return this}},{key:"zzX",value:function(t){t=w(this,t);for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)/t[e]);return this}},{key:"zzY",value:function(t){t=p(this,t);for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)+t[r]);return this}},{key:"zzZ",value:function(t){t=p(this,t);for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)-t[r]);return this}},{key:"zza",value:function(t){t=p(this,t);for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)*t[r]);return this}},{key:"zzb",value:function(t){t=p(this,t);for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)/t[r]);return this}},{key:"zzc",value:function(t,r){m(this,t);for(var e=0;e<this.zzj2;e++)this.set(t,e,this.get(t,e)*r);return this}},{key:"zzd",value:function(t,r){g(this,t);for(var e=0;e<this.zzk2;e++)this.set(e,t,this.get(e,t)*r);return this}},{key:"max",value:function(){if(this.zzu3())return NaN;for(var t=this.get(0,0),r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.get(r,e)>t&&(t=this.get(r,e));return t}},{key:"zze",value:function(){x(this);for(var t=this.get(0,0),r=[0,0],e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.get(e,o)>t&&(t=this.get(e,o),r[0]=e,r[1]=o);return r}},{key:"min",value:function(){if(this.zzu3())return NaN;for(var t=this.get(0,0),r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.get(r,e)<t&&(t=this.get(r,e));return t}},{key:"zzf",value:function(){x(this);for(var t=this.get(0,0),r=[0,0],e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.get(e,o)<t&&(t=this.get(e,o),r[0]=e,r[1]=o);return r}},{key:"zzg",value:function(t){if(m(this,t),this.zzu3())return NaN;for(var r=this.get(t,0),e=1;e<this.zzj2;e++)this.get(t,e)>r&&(r=this.get(t,e));return r}},{key:"zzgIndex",value:function(t){m(this,t),x(this);for(var r=this.get(t,0),e=[t,0],o=1;o<this.zzj2;o++)this.get(t,o)>r&&(r=this.get(t,o),e[1]=o);return e}},{key:"zzi",value:function(t){if(m(this,t),this.zzu3())return NaN;for(var r=this.get(t,0),e=1;e<this.zzj2;e++)this.get(t,e)<r&&(r=this.get(t,e));return r}},{key:"zziIndex",value:function(t){m(this,t),x(this);for(var r=this.get(t,0),e=[t,0],o=1;o<this.zzj2;o++)this.get(t,o)<r&&(r=this.get(t,o),e[1]=o);return e}},{key:"zzk",value:function(t){if(g(this,t),this.zzu3())return NaN;for(var r=this.get(0,t),e=1;e<this.zzk2;e++)this.get(e,t)>r&&(r=this.get(e,t));return r}},{key:"zzkIndex",value:function(t){g(this,t),x(this);for(var r=this.get(0,t),e=[0,t],o=1;o<this.zzk2;o++)this.get(o,t)>r&&(r=this.get(o,t),e[0]=o);return e}},{key:"zzm",value:function(t){if(g(this,t),this.zzu3())return NaN;for(var r=this.get(0,t),e=1;e<this.zzk2;e++)this.get(e,t)<r&&(r=this.get(e,t));return r}},{key:"zzmIndex",value:function(t){g(this,t),x(this);for(var r=this.get(0,t),e=[0,t],o=1;o<this.zzk2;o++)this.get(o,t)<r&&(r=this.get(o,t),e[0]=o);return e}},{key:"zzo",value:function(){for(var t=Math.min(this.zzk2,this.zzj2),r=[],e=0;e<t;e++)r.push(this.get(e,e));return r}},{key:"zzp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"zzw3",r=0;if("max"===t)return this.max();if("zzw3"===t){for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)r+=this.get(e,o)*this.get(e,o);return Math.sqrt(r)}throw new Error("unknown zzp type: ".concat(t))}},{key:"zzq",value:function(){for(var t=0,r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)t+=this.get(r,e),this.set(r,e,t);return this}},{key:"dot",value:function(r){t.zzM1(r)&&(r=r.zzC());var e=this.zzC();if(e.length!==r.length)throw new Error();for(var o=0,n=0;n<e.length;n++)o+=e[n]*r[n];return o}},{key:"zzr",value:function(t){t=E.zzL1(t);var r=new E(this.zzk2,t.zzj2);return this.zzr2(t,r),r}},{key:"zzr2",value:function(t,r){var e=this.zzk2,o=this.zzj2,n=t.zzj2;this.Bcolj=this.Bcolj||new Float32Array(o);for(var s=this.Bcolj,i=0;i<n;i++){for(var a=0;a<o;a++)s[a]=t.get(a,i);for(var u=0;u<e;u++){for(var h=0,c=0;c<o;c++)h+=this.get(u,c)*s[c];r.set(u,i,h)}}}},{key:"zzs",value:function(t){t=E.zzL1(t);var r=new E(2,2),e=this.get(0,0),o=t.get(0,0),n=this.get(0,1),s=t.get(0,1),i=this.get(1,0),a=t.get(1,0),u=this.get(1,1),h=t.get(1,1),c=(e+u)*(o+h),f=(i+u)*o,l=e*(s-h),v=u*(a-o),m=(e+n)*h,g=c+v-m+(n-u)*(a+h),w=l+m,p=f+v,y=c-f+l+(i-e)*(o+s);return r.set(0,0,g),r.set(0,1,w),r.set(1,0,p),r.set(1,1,y),r}},{key:"zzt",value:function(t){t=E.zzL1(t);var r=new E(3,3),e=this.get(0,0),o=this.get(0,1),n=this.get(0,2),s=this.get(1,0),i=this.get(1,1),a=this.get(1,2),u=this.get(2,0),h=this.get(2,1),c=this.get(2,2),f=t.get(0,0),l=t.get(0,1),v=t.get(0,2),m=t.get(1,0),g=t.get(1,1),w=t.get(1,2),p=t.get(2,0),y=t.get(2,1),d=t.get(2,2),b=(e-s)*(-l+g),M=(-e+s+i)*(f-l+g),x=(s+i)*(-f+l),k=e*f,S=(-e+u+h)*(f-v+w),R=(-e+u)*(v-w),T=(u+h)*(-f+v),A=(-n+h+c)*(g+p-y),D=(n-c)*(g-y),C=n*p,I=(h+c)*(-p+y),N=(-n+i+a)*(w+p-d),O=(n-a)*(w-d),F=(i+a)*(-p+d),P=k+C+o*m,V=(e+o+n-s-i-h-c)*g+M+x+k+A+C+I,j=k+S+T+(e+o+n-i-a-u-h)*w+C+N+F,q=b+i*(-f+l+m-g-w-p+d)+M+k+C+N+O,z=b+M+x+k+a*y,Q=C+N+O+F+s*v,L=k+S+R+h*(-f+v+m-g-w-p+y)+A+D+C,B=A+D+C+I+u*l,U=k+S+R+T+c*d;return r.set(0,0,P),r.set(0,1,V),r.set(0,2,j),r.set(1,0,q),r.set(1,1,z),r.set(1,2,Q),r.set(2,0,L),r.set(2,1,B),r.set(2,2,U),r}},{key:"zzrStrassen",value:function(r){r=E.zzL1(r);var e=this.clone(),o=e.zzk2,n=e.zzj2,s=r.zzk2,i=r.zzj2;function a(r,e,o){var n=r.zzk2,s=r.zzj2;if(n===e&&s===o)return r;var i=t.zzG1(e,o);return i=i.zz61(r,0,0)}n!==s&&1;var u=Math.max(o,s),h=Math.max(n,i);return function r(e,o,n,s){if(n<=512||s<=512)return e.zzr(o);n%2==1&&s%2==1?(e=a(e,n+1,s+1),o=a(o,n+1,s+1)):n%2==1?(e=a(e,n+1,s),o=a(o,n+1,s)):s%2==1&&(e=a(e,n,s+1),o=a(o,n,s+1));var i=parseInt(e.zzk2/2,10),u=parseInt(e.zzj2/2,10),h=e.zz31(0,i-1,0,u-1),c=o.zz31(0,i-1,0,u-1),f=e.zz31(0,i-1,u,e.zzj2-1),l=o.zz31(0,i-1,u,o.zzj2-1),v=e.zz31(i,e.zzk2-1,0,u-1),m=o.zz31(i,o.zzk2-1,0,u-1),g=e.zz31(i,e.zzk2-1,u,e.zzj2-1),w=o.zz31(i,o.zzk2-1,u,o.zzj2-1),p=r(t.add(h,g),t.add(c,w),i,u),y=r(t.add(v,g),c,i,u),d=r(h,t.sub(l,w),i,u),b=r(g,t.sub(m,c),i,u),M=r(t.add(h,f),w,i,u),x=r(t.sub(v,h),t.add(c,l),i,u),k=r(t.sub(f,g),t.add(m,w),i,u),S=t.add(p,b);S.sub(M),S.add(k);var E=t.add(d,M),R=t.add(y,b),T=t.sub(p,y);T.add(d),T.add(x);var A=t.zzG1(2*S.zzk2,2*S.zzj2);return(A=(A=(A=(A=A.zz61(S,0,0)).zz61(E,S.zzk2,0)).zz61(R,0,S.zzj2)).zz61(T,S.zzk2,S.zzj2)).zz31(0,n-1,0,s-1)}(e=a(e,u,h),r=a(r,u,h),u,h)}},{key:"zzv",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!=f(t))throw new Error();var r=t.min,e=void 0===r?0:r,o=t.max,s=void 0===o?1:o;if(!Number.isFinite(e))throw new Error();if(!Number.isFinite(s))throw new Error();if(e>=s)throw new Error();for(var i=new E(this.zzk2,this.zzj2),a=0;a<this.zzk2;a++){var u=this.zzM(a);u.length>0&&n(u,{min:e,max:s,output:u}),i.zzO(a,u)}return i}},{key:"zzw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!=f(t))throw new Error();var r=t.min,e=void 0===r?0:r,o=t.max,s=void 0===o?1:o;if(!Number.isFinite(e))throw new Error();if(!Number.isFinite(s))throw new Error();if(e>=s)throw new Error();for(var i=new E(this.zzk2,this.zzj2),a=0;a<this.zzj2;a++){var u=this.zzQ(a);u.length&&n(u,{min:e,max:s,output:u}),i.zzS(a,u)}return i}},{key:"zzx",value:function(){for(var t=Math.ceil(this.zzj2/2),r=0;r<this.zzk2;r++)for(var e=0;e<t;e++){var o=this.get(r,e),n=this.get(r,this.zzj2-1-e);this.set(r,e,n),this.set(r,this.zzj2-1-e,o)}return this}},{key:"zzy",value:function(){for(var t=Math.ceil(this.zzk2/2),r=0;r<this.zzj2;r++)for(var e=0;e<t;e++){var o=this.get(e,r),n=this.get(this.zzk2-1-e,r);this.set(e,r,n),this.set(this.zzk2-1-e,r,o)}return this}},{key:"zzz",value:function(t){t=E.zzL1(t);for(var r=this.zzk2,e=this.zzj2,o=t.zzk2,n=t.zzj2,s=new E(r*o,e*n),i=0;i<r;i++)for(var a=0;a<e;a++)for(var u=0;u<o;u++)for(var h=0;h<n;h++)s.set(o*i+u,n*a+h,this.get(i,a)*t.get(u,h));return s}},{key:"kroneckerSum",value:function(t){if(t=E.zzL1(t),!this.zzH()||!t.zzH())throw new Error();var r=this.zzk2,e=t.zzk2,o=this.zzz(E.zzJ1(e,e)),n=E.zzJ1(r,r).zzz(t);return o.add(n)}},{key:"zz01",value:function(){var t=new E(this.zzj2,this.zzk2);return this.zz012(t),t}},{key:"zz012",value:function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)t.set(e,r,this.get(r,e))}},{key:"zz11",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,r=0;r<this.zzk2;r++)this.zzO(r,this.zzM(r).sort(t));return this}},{key:"zz21",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,r=0;r<this.zzj2;r++)this.zzS(r,this.zzQ(r).sort(t));return this}},{key:"zz31",value:function(t,r,e,o){d(this,t,r,e,o);for(var n=new E(r-t+1,o-e+1),s=t;s<=r;s++)for(var i=e;i<=o;i++)n.set(s-t,i-e,this.get(s,i));return n}},{key:"zz31Row",value:function(t,r,e){if(void 0===r&&(r=0),void 0===e&&(e=this.zzj2-1),r>e||r<0||r>=this.zzj2||e<0||e>=this.zzj2)throw new Error();for(var o=new E(t.length,e-r+1),n=0;n<t.length;n++)for(var s=r;s<=e;s++){if(t[n]<0||t[n]>=this.zzk2)throw new Error("Row index out of range: ".concat(t[n]));o.set(n,s-r,this.get(t[n],s))}return o}},{key:"zz31Column",value:function(t,r,e){if(void 0===r&&(r=0),void 0===e&&(e=this.zzk2-1),r>e||r<0||r>=this.zzk2||e<0||e>=this.zzk2)throw new Error();for(var o=new E(e-r+1,t.length),n=0;n<t.length;n++)for(var s=r;s<=e;s++){if(t[n]<0||t[n]>=this.zzj2)throw new Error("Column index out of range: ".concat(t[n]));o.set(s-r,n,this.get(s,t[n]))}return o}},{key:"zz61",value:function(t,r,e){if((t=E.zzL1(t)).zzu3())return this;d(this,r,r+t.zzk2-1,e,e+t.zzj2-1);for(var o=0;o<t.zzk2;o++)for(var n=0;n<t.zzj2;n++)this.set(r+o,e+n,t.get(o,n));return this}},{key:"zz71",value:function(t,r){for(var e=y(this,t,r),o=new E(t.length,r.length),n=0;n<e.row.length;n++)for(var s=e.row[n],i=0;i<e.zz23.length;i++){var a=e.zz23[i];o.set(n,i,this.get(s,a))}return o}},{key:"trace",value:function(){for(var t=Math.min(this.zzk2,this.zzj2),r=0,e=0;e<t;e++)r+=this.get(e,e);return r}},{key:"copy",value:function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,t.get(r,e))}},{key:"reset",value:function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,0)}},{key:"clone",value:function(){var t=new E(this.zzk2,this.zzj2);return t.copy(this),t}},{key:"sum",value:function(t){switch(t){case"row":return function(t){for(var r=b(t.zzk2),e=0;e<t.zzk2;++e)for(var o=0;o<t.zzj2;++o)r[e]+=t.get(e,o);return r}(this);case"zz23":return function(t){for(var r=b(t.zzj2),e=0;e<t.zzk2;++e)for(var o=0;o<t.zzj2;++o)r[o]+=t.get(e,o);return r}(this);case void 0:return function(t){for(var r=0,e=0;e<t.zzk2;e++)for(var o=0;o<t.zzj2;o++)r+=t.get(e,o);return r}(this);default:throw new Error("inzyp13 option: ".concat(t))}}},{key:"zz81",value:function(t){switch(t){case"row":return function(t){for(var r=b(t.zzk2,1),e=0;e<t.zzk2;++e)for(var o=0;o<t.zzj2;++o)r[e]*=t.get(e,o);return r}(this);case"zz23":return function(t){for(var r=b(t.zzj2,1),e=0;e<t.zzk2;++e)for(var o=0;o<t.zzj2;++o)r[o]*=t.get(e,o);return r}(this);case void 0:return function(t){for(var r=1,e=0;e<t.zzk2;e++)for(var o=0;o<t.zzj2;o++)r*=t.get(e,o);return r}(this);default:throw new Error("inzyp13 option: ".concat(t))}}},{key:"zz91",value:function(t){var r=this.sum(t);switch(t){case"row":for(var e=0;e<this.zzk2;e++)r[e]/=this.zzj2;return r;case"zz23":for(var o=0;o<this.zzj2;o++)r[o]/=this.zzk2;return r;case void 0:return r/this.zzC1;default:throw new Error("inzyp13 option: ".concat(t))}}},{key:"zzA1",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"==f(t)&&(r=t,t=void 0),"object"!=f(r))throw new Error();var e=r,o=e.unbiased,n=void 0===o||o,s=e.zz91,i=void 0===s?this.zz91(t):s;if("boolean"!=typeof n)throw new Error();switch(t){case"row":if(!Array.isArray(i))throw new Error();return function(t,r,e){for(var o=t.zzk2,n=t.zzj2,s=[],i=0;i<o;i++){for(var a=0,u=0,h=0,c=0;c<n;c++)a+=h=t.get(i,c)-e[i],u+=h*h;r?s.push((u-a*a/n)/(n-1)):s.push((u-a*a/n)/n)}return s}(this,n,i);case"zz23":if(!Array.isArray(i))throw new Error();return function(t,r,e){for(var o=t.zzk2,n=t.zzj2,s=[],i=0;i<n;i++){for(var a=0,u=0,h=0,c=0;c<o;c++)a+=h=t.get(c,i)-e[i],u+=h*h;r?s.push((u-a*a/o)/(o-1)):s.push((u-a*a/o)/o)}return s}(this,n,i);case void 0:if("number"!=typeof i)throw new Error();return function(t,r,e){for(var o=t.zzk2,n=t.zzj2,s=o*n,i=0,a=0,u=0,h=0;h<o;h++)for(var c=0;c<n;c++)i+=u=t.get(h,c)-e,a+=u*u;return r?(a-i*i/s)/(s-1):(a-i*i/s)/s}(this,n,i);default:throw new Error("inzyp13 option: ".concat(t))}}},{key:"zzB1",value:function(t,r){"object"==f(t)&&(r=t,t=void 0);var e=this.zzA1(t,r);if(void 0===t)return Math.sqrt(e);for(var o=0;o<e.length;o++)e[o]=Math.sqrt(e[o]);return e}},{key:"center",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"==f(t)&&(r=t,t=void 0),"object"!=f(r))throw new Error();var e=r.center,o=void 0===e?this.zz91(t):e;switch(t){case"row":if(!Array.isArray(o))throw new Error();return function(t,r){for(var e=0;e<t.zzk2;e++)for(var o=0;o<t.zzj2;o++)t.set(e,o,t.get(e,o)-r[e])}(this,o),this;case"zz23":if(!Array.isArray(o))throw new Error();return function(t,r){for(var e=0;e<t.zzk2;e++)for(var o=0;o<t.zzj2;o++)t.set(e,o,t.get(e,o)-r[o])}(this,o),this;case void 0:if("number"!=typeof o)throw new Error();return function(t,r){for(var e=0;e<t.zzk2;e++)for(var o=0;o<t.zzj2;o++)t.set(e,o,t.get(e,o)-r)}(this,o),this;default:throw new Error("inzyp13 option: ".concat(t))}}},{key:"scale",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"==f(t)&&(r=t,t=void 0),"object"!=f(r))throw new Error();var e=r.scale;switch(t){case"row":if(void 0===e)e=function(t){for(var r=[],e=0;e<t.zzk2;e++){for(var o=0,n=0;n<t.zzj2;n++)o+=Math.pow(t.get(e,n),2)/(t.zzj2-1);r.push(Math.sqrt(o))}return r}(this);else if(!Array.isArray(e))throw new Error();return function(t,r){for(var e=0;e<t.zzk2;e++)for(var o=0;o<t.zzj2;o++)t.set(e,o,t.get(e,o)/r[e])}(this,e),this;case"zz23":if(void 0===e)e=function(t){for(var r=[],e=0;e<t.zzj2;e++){for(var o=0,n=0;n<t.zzk2;n++)o+=Math.pow(t.get(n,e),2)/(t.zzk2-1);r.push(Math.sqrt(o))}return r}(this);else if(!Array.isArray(e))throw new Error();return function(t,r){for(var e=0;e<t.zzk2;e++)for(var o=0;o<t.zzj2;o++)t.set(e,o,t.get(e,o)/r[o])}(this,e),this;case void 0:if(void 0===e)e=function(t){for(var r=t.zzC1-1,e=0,o=0;o<t.zzj2;o++)for(var n=0;n<t.zzk2;n++)e+=Math.pow(t.get(n,o),2)/r;return Math.sqrt(e)}(this);else if("number"!=typeof e)throw new Error();return function(t,r){for(var e=0;e<t.zzk2;e++)for(var o=0;o<t.zzj2;o++)t.set(e,o,t.get(e,o)/r)}(this,e),this;default:throw new Error("inzyp13 option: ".concat(t))}}},{key:"toString",value:function(t){return l(this,t)}},{key:"zzC1",get:function(){return this.zzk2*this.zzj2}}],[{key:"zzD1",value:function(t,r,e){if(t*r!==e.length)throw new Error();for(var o=new E(t,r),n=0;n<t;n++)for(var s=0;s<r;s++)o.set(n,s,e[n*r+s]);return o}},{key:"zzE1",value:function(t){for(var r=new E(1,t.length),e=0;e<t.length;e++)r.set(0,e,t[e]);return r}},{key:"zzF1",value:function(t){for(var r=new E(t.length,1),e=0;e<t.length;e++)r.set(e,0,t[e]);return r}},{key:"zzG1",value:function(t,r){return new E(t,r)}},{key:"zzH1",value:function(t,r){return new E(t,r).zzL(1)}},{key:"rand",value:function(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!=f(e))throw new Error();for(var o=e.random,n=void 0===o?Math.random:o,s=new E(t,r),i=0;i<t;i++)for(var a=0;a<r;a++)s.set(i,a,n());return s}},{key:"zzI1",value:function(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!=f(e))throw new Error();var o=e.min,n=void 0===o?0:o,s=e.max,i=void 0===s?1e3:s,a=e.random,u=void 0===a?Math.random:a;if(!Number.isInteger(n))throw new Error();if(!Number.isInteger(i))throw new Error();if(n>=i)throw new Error();for(var h=i-n,c=new E(t,r),l=0;l<t;l++)for(var v=0;v<r;v++){var m=n+Math.round(u()*h);c.set(l,v,m)}return c}},{key:"zzJ1",value:function(t,r,e){void 0===r&&(r=t),void 0===e&&(e=1);for(var o=Math.min(t,r),n=this.zzG1(t,r),s=0;s<o;s++)n.set(s,s,e);return n}},{key:"zzo",value:function(t,r,e){var o=t.length;void 0===r&&(r=o),void 0===e&&(e=r);for(var n=Math.min(o,r,e),s=this.zzG1(r,e),i=0;i<n;i++)s.set(i,i,t[i]);return s}},{key:"min",value:function(t,r){t=this.zzL1(t),r=this.zzL1(r);for(var e=t.zzk2,o=t.zzj2,n=new E(e,o),s=0;s<e;s++)for(var i=0;i<o;i++)n.set(s,i,Math.min(t.get(s,i),r.get(s,i)));return n}},{key:"max",value:function(t,r){t=this.zzL1(t),r=this.zzL1(r);for(var e=t.zzk2,o=t.zzj2,n=new this(e,o),s=0;s<e;s++)for(var i=0;i<o;i++)n.set(s,i,Math.max(t.get(s,i),r.get(s,i)));return n}},{key:"zzL1",value:function(r){return t.zzM1(r)?r:new E(r)}},{key:"zzM1",value:function(t){return null!=t&&"Matrix"===t.klass}}]),t}();function S(t,r){return t-r}k.prototype.klass="Matrix","undefined"!=typeof Symbol&&(k.prototype[Symbol.for("zze3")]=function(){return l(this)}),k.random=k.rand,k.randomInt=k.zzI1,k.zzoonal=k.zzo,k.prototype.zzoonal=k.prototype.zzo,k.zzo2=k.zzJ1,k.prototype.negate=k.prototype.neg,k.prototype.zzI3=k.prototype.zzz;var E=function(t){o(e,k);var r=s(e);function e(t,o){var n;if(u(this,e),n=r.call(this),e.zzM1(t))return i(n,t.clone());if(Number.isInteger(t)&&t>=0)n.dataFlatten=new Float32Array(o*t);else{if(!Array.isArray(t))throw new Error();var s=t;if("number"!=typeof(o=(t=s.length)?s[0].length:0))n.dataFlatten=new Float32Array(s);else{n.dataFlatten=new Float32Array(o*t);for(var a=0;a<t;a++)for(var h=0;h<o;h++)n.dataFlatten[a*o+h]=s[a][h]}}return n.zzk2=t,n.zzj2=o,i(n)}return c(e,[{key:"set",value:function(t,r,e){return this.dataFlatten[t*this.zzj2+r]=e,this}},{key:"get",value:function(t,r){return this.dataFlatten[t*this.zzj2+r]}},{key:"zzn3",value:function(t,r,e){this.dataFlatten[t*this.zzj2+r]+=e}},{key:"mulComponent",value:function(t,r,e){this.dataFlatten[t*this.zzj2+r]*=e}}]),e}();!function(t,r){t.prototype.add=function(t){return"number"==typeof t?this.addS(t):this.addM(t)},t.prototype.addS=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)+t);return this},t.prototype.addM=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,this.get(e,o)+t.get(e,o));return this},t.add=function(t,e){return new r(t).add(e)},t.prototype.sub=function(t){return"number"==typeof t?this.subS(t):this.subM(t)},t.prototype.subS=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)-t);return this},t.prototype.subM=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,this.get(e,o)-t.get(e,o));return this},t.sub=function(t,e){return new r(t).sub(e)},t.prototype.subtract=t.prototype.sub,t.prototype.subtractS=t.prototype.subS,t.prototype.subtractM=t.prototype.subM,t.subtract=t.sub,t.prototype.zzi3=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,0)},t.prototype.mul=function(t){return"number"==typeof t?this.mulS(t):this.mulM(t)},t.prototype.mulS=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)*t);return this},t.prototype.mulM=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,this.get(e,o)*t.get(e,o));return this},t.mul=function(t,e){return new r(t).mul(e)},t.prototype.multiply=t.prototype.mul,t.prototype.multiplyS=t.prototype.mulS,t.prototype.multiplyM=t.prototype.mulM,t.multiply=t.mul,t.prototype.div=function(t){return"number"==typeof t?this.divS(t):this.divM(t)},t.prototype.divS=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)/t);return this},t.prototype.divM=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,this.get(e,o)/t.get(e,o));return this},t.div=function(t,e){return new r(t).div(e)},t.prototype.divide=t.prototype.div,t.prototype.divideS=t.prototype.divS,t.prototype.divideM=t.prototype.divM,t.divide=t.div,t.prototype.mod=function(t){return"number"==typeof t?this.modS(t):this.modM(t)},t.prototype.modS=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)%t);return this},t.prototype.modM=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,this.get(e,o)%t.get(e,o));return this},t.mod=function(t,e){return new r(t).mod(e)},t.prototype.zzO3=t.prototype.mod,t.prototype.zzO3S=t.prototype.modS,t.prototype.zzO3M=t.prototype.modM,t.zzO3=t.mod,t.prototype.and=function(t){return"number"==typeof t?this.andS(t):this.andM(t)},t.prototype.andS=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)&t);return this},t.prototype.andM=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,this.get(e,o)&t.get(e,o));return this},t.and=function(t,e){return new r(t).and(e)},t.prototype.or=function(t){return"number"==typeof t?this.orS(t):this.orM(t)},t.prototype.orS=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)|t);return this},t.prototype.orM=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,this.get(e,o)|t.get(e,o));return this},t.or=function(t,e){return new r(t).or(e)},t.prototype.xor=function(t){return"number"==typeof t?this.xorS(t):this.xorM(t)},t.prototype.xorS=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)^t);return this},t.prototype.xorM=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,this.get(e,o)^t.get(e,o));return this},t.xor=function(t,e){return new r(t).xor(e)},t.prototype.zzQ3=function(t){return"number"==typeof t?this.zzQ3S(t):this.zzQ3M(t)},t.prototype.zzQ3S=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)<<t);return this},t.prototype.zzQ3M=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,this.get(e,o)<<t.get(e,o));return this},t.zzQ3=function(t,e){return new r(t).zzQ3(e)},t.prototype.zzJ3=function(t){return"number"==typeof t?this.zzJ3S(t):this.zzJ3M(t)},t.prototype.zzJ3S=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)>>t);return this},t.prototype.zzJ3M=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,this.get(e,o)>>t.get(e,o));return this},t.zzJ3=function(t,e){return new r(t).zzJ3(e)},t.prototype.zzL3=function(t){return"number"==typeof t?this.zzL3S(t):this.zzL3M(t)},t.prototype.zzL3S=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)>>>t);return this},t.prototype.zzL3M=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,this.get(e,o)>>>t.get(e,o));return this},t.zzL3=function(t,e){return new r(t).zzL3(e)},t.prototype.zzK3=t.prototype.zzL3,t.prototype.zzK3S=t.prototype.zzL3S,t.prototype.zzK3M=t.prototype.zzL3M,t.zzK3=t.zzL3,t.prototype.not=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,~this.get(t,r));return this},t.not=function(t){return new r(t).not()},t.prototype.abs=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.abs(this.get(t,r)));return this},t.abs=function(t){return new r(t).abs()},t.prototype.acos=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.acos(this.get(t,r)));return this},t.acos=function(t){return new r(t).acos()},t.prototype.zzM3=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.zzM3(this.get(t,r)));return this},t.zzM3=function(t){return new r(t).zzM3()},t.prototype.asin=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.asin(this.get(t,r)));return this},t.asin=function(t){return new r(t).asin()},t.prototype.zzN3=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.zzN3(this.get(t,r)));return this},t.zzN3=function(t){return new r(t).zzN3()},t.prototype.atan=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.atan(this.get(t,r)));return this},t.atan=function(t){return new r(t).atan()},t.prototype.atanh=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.atanh(this.get(t,r)));return this},t.atanh=function(t){return new r(t).atanh()},t.prototype.cbrt=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.cbrt(this.get(t,r)));return this},t.cbrt=function(t){return new r(t).cbrt()},t.prototype.ceil=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.ceil(this.get(t,r)));return this},t.ceil=function(t){return new r(t).ceil()},t.prototype.clz32=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.clz32(this.get(t,r)));return this},t.clz32=function(t){return new r(t).clz32()},t.prototype.cos=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.cos(this.get(t,r)));return this},t.cos=function(t){return new r(t).cos()},t.prototype.cosh=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.cosh(this.get(t,r)));return this},t.cosh=function(t){return new r(t).cosh()},t.prototype.exp=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.exp(this.get(t,r)));return this},t.exp=function(t){return new r(t).exp()},t.prototype.expm1=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.expm1(this.get(t,r)));return this},t.expm1=function(t){return new r(t).expm1()},t.prototype.floor=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.floor(this.get(t,r)));return this},t.floor=function(t){return new r(t).floor()},t.prototype.fround=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.fround(this.get(t,r)));return this},t.fround=function(t){return new r(t).fround()},t.prototype.log=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.log(this.get(t,r)));return this},t.log=function(t){return new r(t).log()},t.prototype.log1p=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.log1p(this.get(t,r)));return this},t.log1p=function(t){return new r(t).log1p()},t.prototype.log10=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.log10(this.get(t,r)));return this},t.log10=function(t){return new r(t).log10()},t.prototype.log2=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.log2(this.get(t,r)));return this},t.log2=function(t){return new r(t).log2()},t.prototype.round=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.round(this.get(t,r)));return this},t.round=function(t){return new r(t).round()},t.prototype.sign=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.sign(this.get(t,r)));return this},t.sign=function(t){return new r(t).sign()},t.prototype.sin=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.sin(this.get(t,r)));return this},t.sin=function(t){return new r(t).sin()},t.prototype.sinh=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.sinh(this.get(t,r)));return this},t.sinh=function(t){return new r(t).sinh()},t.prototype.sqrt=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.sqrt(this.get(t,r)));return this},t.sqrt=function(t){return new r(t).sqrt()},t.prototype.tan=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.tan(this.get(t,r)));return this},t.tan=function(t){return new r(t).tan()},t.prototype.tanh=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.tanh(this.get(t,r)));return this},t.tanh=function(t){return new r(t).tanh()},t.prototype.trunc=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.trunc(this.get(t,r)));return this},t.trunc=function(t){return new r(t).trunc()},t.pow=function(t,e){return new r(t).pow(e)},t.prototype.pow=function(t){return"number"==typeof t?this.powS(t):this.powM(t)},t.prototype.powS=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,Math.pow(this.get(r,e),t));return this},t.prototype.powM=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,Math.pow(this.get(e,o),t.get(e,o)));return this}}(k,E);var R=function(t){o(e,k);var r=s(e);function e(t){var o;u(this,e),(o=r.call(this)).zzk2=t.length,o.zzj2=t[0].length,o.dataFlatten=new Float32Array(o.zzk2*o.zzj2);for(var n=0;n<o.zzk2;n++)for(var s=0;s<o.zzj2;s++)o.dataFlatten[n*o.zzj2+s]=t[n][s];return o}return c(e,[{key:"set",value:function(t,r,e){return this.dataFlatten[t*this.zzj2+r]=e,this}},{key:"get",value:function(t,r){return this.dataFlatten[t*this.zzj2+r]}}]),e}();function T(t,r){var e=0;return Math.abs(t)>Math.abs(r)?(e=r/t,Math.abs(t)*Math.sqrt(1+e*e)):0!==r?(e=t/r,Math.abs(r)*Math.sqrt(1+e*e)):0}var A=function(){function t(r){u(this,t);var e=(r=R.zzL1(r)).zzk2,o=r.zzj2;this.QR=r.clone(),this.X=r.clone(),this.Rzzo=new Float32Array(o),this.m=e,this.n=o,this.update(r)}return c(t,[{key:"update",value:function(t){var r,e,o,n,s=this.QR,i=this.m,a=this.n,u=this.Rzzo;for(s.copy(t),o=0;o<a;o++){var h=0;for(r=o;r<i;r++)h=T(h,s.get(r,o));if(0!==h){for(s.get(o,o)<0&&(h=-h),r=o;r<i;r++)s.set(r,o,s.get(r,o)/h);for(s.set(o,o,s.get(o,o)+1),e=o+1;e<a;e++){for(n=0,r=o;r<i;r++)n+=s.get(r,o)*s.get(r,e);for(n=-n/s.get(o,o),r=o;r<i;r++)s.set(r,e,s.get(r,e)+n*s.get(r,o))}}u[o]=-h}}},{key:"solve",value:function(t){var r=this.QR,e=r.zzk2,o=t.zzj2,n=this.X;n.copy(t);var s,i,a,u,h=r.zzj2;for(a=0;a<h;a++)for(i=0;i<o;i++){for(u=0,s=a;s<e;s++)u+=r.get(s,a)*n.get(s,i);for(u=-u/r.get(a,a),s=a;s<e;s++)n.set(s,i,n.get(s,i)+u*r.get(s,a))}for(a=h-1;a>=0;a--){for(i=0;i<o;i++)n.set(a,i,n.get(a,i)/this.Rzzo[a]);for(s=0;s<a;s++)for(i=0;i<o;i++)n.set(s,i,n.get(s,i)-n.get(a,i)*r.get(s,a))}return n.zz31(0,h-1,0,o-1)}},{key:"zzY1",value:function(){for(var t=this.QR.zzj2,r=0;r<t;r++)if(0===this.Rzzo[r])return!1;return!0}},{key:"zzW1",get:function(){var t,r,e=this.QR,o=e.zzj2,n=new E(o,o);for(t=0;t<o;t++)for(r=0;r<o;r++)t<r?n.set(t,r,e.get(t,r)):t===r?n.set(t,r,this.Rzzo[t]):n.set(t,r,0);return n}},{key:"zzZ1",get:function(){var t,r,e,o,n=this.QR,s=n.zzk2,i=n.zzj2,a=new E(s,i);for(e=i-1;e>=0;e--){for(t=0;t<s;t++)a.set(t,e,0);for(a.set(e,e,1),r=e;r<i;r++)if(0!==n.get(e,e)){for(o=0,t=e;t<s;t++)o+=n.get(t,e)*a.get(t,r);for(o=-o/n.get(e,e),t=e;t<s;t++)a.set(t,r,a.get(t,r)+o*n.get(t,e))}}return a}}]),t}(),D=function(){function t(r,e){u(this,t);var o=r.zzk2,n=r.zzj2,s=Boolean(e.zzx3),i=Boolean(e.zzZ2),a=r.clone(),h=Math.min(o+1,n),c=Math.min(o,n),f=new Float32Array(h),l=new E(o,c),v=new E(n,n),m=new Float32Array(n),g=new Float32Array(o),w=new Float32Array(h),p=E.zzG1(h,h),y=E.zzG1(v.zzk2,l.zzk2),d=new E(v.zzk2,h),b=new E(v.zzk2,l.zzk2);this.m=o,this.n=n,this.ni=h,this.nu=c,this.s=f,this.si=w,this.work=g,this.e=m,this.U=l,this.V=v,this.wantu=s,this.wantv=i,this.a=a,this.Ls=p,this.VLU=y,this.X=d,this.Y=b,this.compute()}return c(t,[{key:"zz24",value:function(t){this.a.copy(t),this.U.reset(),this.V.reset(),this.compute()}},{key:"compute",value:function(){for(var t=this.m,r=this.n,e=this.ni,o=this.nu,n=this.s,s=this.si,i=this.work,a=this.e,u=this.U,h=this.V,c=this.wantu,f=this.wantv,l=this.a,v=0;v<e;v++)s[v]=v;for(var m=Math.min(t-1,r),g=Math.max(0,Math.min(r-2,t)),w=Math.max(m,g),p=0;p<w;p++){if(p<m){n[p]=0;for(var y=p;y<t;y++)n[p]=T(n[p],l.get(y,p));if(0!==n[p]){l.get(p,p)<0&&(n[p]=-n[p]);for(var d=p;d<t;d++)l.set(d,p,l.get(d,p)/n[p]);l.set(p,p,l.get(p,p)+1)}n[p]=-n[p]}for(var b=p+1;b<r;b++){if(p<m&&0!==n[p]){for(var M=0,x=p;x<t;x++)M+=l.get(x,p)*l.get(x,b);M=-M/l.get(p,p);for(var k=p;k<t;k++)l.set(k,b,l.get(k,b)+M*l.get(k,p))}a[b]=l.get(p,b)}if(c&&p<m)for(var S=p;S<t;S++)u.set(S,p,l.get(S,p));if(p<g){a[p]=0;for(var E=p+1;E<r;E++)a[p]=T(a[p],a[E]);if(0!==a[p]){a[p+1]<0&&(a[p]=0-a[p]);for(var R=p+1;R<r;R++)a[R]/=a[p];a[p+1]+=1}if(a[p]=-a[p],p+1<t&&0!==a[p]){for(var A=p+1;A<t;A++)i[A]=0;for(var D=p+1;D<t;D++)for(var C=p+1;C<r;C++)i[D]+=a[C]*l.get(D,C);for(var I=p+1;I<r;I++)for(var N=-a[I]/a[p+1],O=p+1;O<t;O++)l.set(O,I,l.get(O,I)+N*i[O])}if(f)for(var F=p+1;F<r;F++)h.set(F,p,a[F])}}var P=Math.min(r,t+1);if(m<r&&(n[m]=l.get(m,m)),t<P&&(n[P-1]=0),g+1<P&&(a[g]=l.get(g,P-1)),a[P-1]=0,c){for(var V=m;V<o;V++){for(var j=0;j<t;j++)u.set(j,V,0);u.set(V,V,1)}for(var q=m-1;q>=0;q--)if(0!==n[q]){for(var z=q+1;z<o;z++){for(var Q=0,L=q;L<t;L++)Q+=u.get(L,q)*u.get(L,z);Q=-Q/u.get(q,q);for(var B=q;B<t;B++)u.set(B,z,u.get(B,z)+Q*u.get(B,q))}for(var U=q;U<t;U++)u.set(U,q,-u.get(U,q));u.set(q,q,1+u.get(q,q));for(var _=0;_<q-1;_++)u.set(_,q,0)}else{for(var G=0;G<t;G++)u.set(G,q,0);u.set(q,q,1)}}if(f)for(var W=r-1;W>=0;W--){if(W<g&&0!==a[W])for(var X=W+1;X<r;X++){for(var Y=0,J=W+1;J<r;J++)Y+=h.get(J,W)*h.get(J,X);Y=-Y/h.get(W+1,W);for(var K=W+1;K<r;K++)h.set(K,X,h.get(K,X)+Y*h.get(K,W))}for(var H=0;H<r;H++)h.set(H,W,0);h.set(W,W,1)}for(var Z=P-1,$=Number.EPSILON;P>0;){var tt=void 0,rt=void 0;for(tt=P-2;tt>=-1&&-1!==tt;tt--){var et=Number.MIN_VALUE+$*Math.abs(n[tt]+Math.abs(n[tt+1]));if(Math.abs(a[tt])<=et||Number.isNaN(a[tt])){a[tt]=0;break}}if(tt===P-2)rt=4;else{var ot=void 0;for(ot=P-1;ot>=tt&&ot!==tt;ot--){var nt=(ot!==P?Math.abs(a[ot]):0)+(ot!==tt+1?Math.abs(a[ot-1]):0);if(Math.abs(n[ot])<=$*nt){n[ot]=0;break}}ot===tt?rt=3:ot===P-1?rt=1:(rt=2,tt=ot)}switch(tt++,rt){case 1:var st=a[P-2];a[P-2]=0;for(var it=P-2;it>=tt;it--){var at=T(n[it],st),ut=n[it]/at,ht=st/at;if(n[it]=at,it!==tt&&(st=-ht*a[it-1],a[it-1]=ut*a[it-1]),f)for(var ct=0;ct<r;ct++)at=ut*h.get(ct,it)+ht*h.get(ct,P-1),h.set(ct,P-1,-ht*h.get(ct,it)+ut*h.get(ct,P-1)),h.set(ct,it,at)}break;case 2:var ft=a[tt-1];a[tt-1]=0;for(var lt=tt;lt<P;lt++){var vt=T(n[lt],ft),mt=n[lt]/vt,gt=ft/vt;if(n[lt]=vt,ft=-gt*a[lt],a[lt]=mt*a[lt],c)for(var wt=0;wt<t;wt++)vt=mt*u.get(wt,lt)+gt*u.get(wt,tt-1),u.set(wt,tt-1,-gt*u.get(wt,lt)+mt*u.get(wt,tt-1)),u.set(wt,lt,vt)}break;case 3:var pt=Math.max(Math.abs(n[P-1]),Math.abs(n[P-2]),Math.abs(a[P-2]),Math.abs(n[tt]),Math.abs(a[tt])),yt=n[P-1]/pt,dt=n[P-2]/pt,bt=a[P-2]/pt,Mt=n[tt]/pt,xt=a[tt]/pt,kt=((dt+yt)*(dt-yt)+bt*bt)/2,St=yt*bt*(yt*bt),Et=0;0===kt&&0===St||(Et=St/(kt+(Et=kt<0?0-Math.sqrt(kt*kt+St):Math.sqrt(kt*kt+St))));for(var Rt=(Mt+yt)*(Mt-yt)+Et,Tt=Mt*xt,At=tt;At<P-1;At++){var Dt=T(Rt,Tt);0===Dt&&(Dt=Number.MIN_VALUE);var Ct=Rt/Dt,It=Tt/Dt;if(At!==tt&&(a[At-1]=Dt),Rt=Ct*n[At]+It*a[At],a[At]=Ct*a[At]-It*n[At],Tt=It*n[At+1],n[At+1]=Ct*n[At+1],f)for(var Nt=0;Nt<r;Nt++)Dt=Ct*h.get(Nt,At)+It*h.get(Nt,At+1),h.set(Nt,At+1,-It*h.get(Nt,At)+Ct*h.get(Nt,At+1)),h.set(Nt,At,Dt);if(0===(Dt=T(Rt,Tt))&&(Dt=Number.MIN_VALUE),Ct=Rt/Dt,It=Tt/Dt,n[At]=Dt,Rt=Ct*a[At]+It*n[At+1],n[At+1]=-It*a[At]+Ct*n[At+1],Tt=It*a[At+1],a[At+1]=Ct*a[At+1],c&&At<t-1)for(var Ot=0;Ot<t;Ot++)Dt=Ct*u.get(Ot,At)+It*u.get(Ot,At+1),u.set(Ot,At+1,-It*u.get(Ot,At)+Ct*u.get(Ot,At+1)),u.set(Ot,At,Dt)}a[P-2]=Rt;break;case 4:if(n[tt]<=0&&(n[tt]=n[tt]<0?-n[tt]:0,f))for(var Ft=0;Ft<=Z;Ft++)h.set(Ft,tt,-h.get(Ft,tt));for(;tt<Z&&!(n[tt]>=n[tt+1]);){var Pt=n[tt];if(n[tt]=n[tt+1],n[tt+1]=Pt,f&&tt<r-1)for(var Vt=0;Vt<r;Vt++)Pt=h.get(Vt,tt+1),h.set(Vt,tt+1,h.get(Vt,tt)),h.set(Vt,tt,Pt);if(c&&tt<t-1)for(var jt=0;jt<t;jt++)Pt=u.get(jt,tt+1),u.set(jt,tt+1,u.get(jt,tt)),u.set(jt,tt,Pt);tt++}P--}}}},{key:"solve",value:function(t){for(var r=t,e=this.zzf1,o=this.s.length,n=this.Ls,s=this.VLU,i=0;i<o;i++)Math.abs(this.s[i])<=e?n.set(i,i,0):n.set(i,i,1/this.s[i]);for(var a=this.U,u=this.zzh1,h=u.zzr(n),c=u.zzk2,f=a.zzk2,l=0;l<c;l++)for(var v=0;v<f;v++){for(var m=0,g=0;g<o;g++)m+=h.get(l,g)*a.get(v,g);s.set(l,v,m)}return s.zzr(r)}},{key:"zza1",value:function(t){return this.solve(E.zzo(t))}},{key:"inverse",value:function(){for(var t=this.V,r=this.zzf1,e=t.zzk2,o=t.zzj2,n=this.X,s=this.Y,i=0;i<e;i++)for(var a=0;a<o;a++)Math.abs(this.s[a])>r&&n.set(i,a,t.get(i,a)/this.s[a]);for(var u=this.U,h=u.zzk2,c=u.zzj2,f=0;f<e;f++)for(var l=0;l<h;l++){for(var v=0,m=0;m<c;m++)v+=n.get(f,m)*u.get(l,m);s.set(f,l,v)}return s}},{key:"zzb1",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"zzp2",get:function(){return this.s[0]}},{key:"zzd1",get:function(){for(var t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,r=0,e=this.s,o=0,n=e.length;o<n;o++)e[o]>t&&r++;return r}},{key:"zzoonal",get:function(){return Array.from(this.s)}},{key:"zzf1",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"zzg1",get:function(){return this.U}},{key:"zzh1",get:function(){return this.V}},{key:"zzoonalMatrix",get:function(){return E.zzo(this.s)}}]),t}(),C=[],I=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{zzj3:-1},e=r.zzj3;if(-1!==e&&C[e]){var o=C[e];return o.zz24(t),o}var n=new D(t,Object.assign({zzx3:!0,zzZ2:!0},r));return-1!==e&&(C[e]=n),n};function N(t,r){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0;return e?I(t,{zzj3:o}).solve(r):new A(t).solve(r)}var O=function(t){o(e,k);var r=s(e);function e(t,o,n){var s;return u(this,e),(s=r.call(this)).matrix=t,s.zzk2=o,s.zzj2=n,s}return e}(),F=function(t){o(e,O);var r=s(e);function e(t,o,n){var s;u(this,e);var i=y(t,o,n);return(s=r.call(this,t,i.row.length,i.zz23.length)).zzy3=i.row,s.zzl2=i.zz23,s}return c(e,[{key:"set",value:function(t,r,e){return this.matrix.set(this.zzy3[t],this.zzl2[r],e),this}},{key:"get",value:function(t,r){return this.matrix.get(this.zzy3[t],this.zzl2[r])}}]),e}();t.Matrix=E,t.QR=A,t.zzT2=A,t.zz92=I,t.default=E,t.zzU1=function t(r){if(0===r.zzj2)return 1;var e,o,n,s,i,a;if(2===r.zzj2)return e=r.get(0,0),o=r.get(0,1),n=r.get(1,0),e*r.get(1,1)-o*n;if(3===r.zzj2)return s=new F(r,[1,2],[1,2]),i=new F(r,[1,2],[0,2]),a=new F(r,[1,2],[0,1]),e=r.get(0,0),o=r.get(0,1),n=r.get(0,2),e*t(s)-o*t(i)+n*t(a);throw new Error()},t.inverse2=function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=arguments.length>2?arguments[2]:void 0;return r?I(t,{zzj3:e}).inverse():N(t,E.zzJ1(t.zzk2))},t.zzp3=N,Object.defineProperty(t,"zzB",{value:!0})},"object"==(void 0===e?"undefined":f(e))&&void 0!==r?v(e):v((l=falseThis?globalThis:l||self).mlMatrix={})},{}]},{},[2])(2)});;Gb=window.zyp;a.callbackReady&&(ba.Va=a.callbackReady);a.callbackTrack&&
(ba.nc=a.callbackTrack);"undefined"!==typeof a.animateDelay&&(ba.wa=a.animateDelay);"undefined"!==typeof a.NNCPath&&(ba.jc=a.NNCPath);"undefined"!==typeof a.NN&&(ba.sb=a.NN);"undefined"!==typeof a.followZRot&&(ba.za=a.followZRot?!0:!1);"undefined"!==typeof a.isTrackingEnabled&&(ba.Kc=a.isTrackingEnabled?!0:!1);oa=Object.create(ua.Og);a.scanSettings&&Object.assign(oa,a.scanSettings);U.Z=oa.translationScalingFactors.slice(0);Da=Object.create(ua.eh);a.stabilizationSettings&&Object.assign(Da,a.stabilizationSettings);
var d=1;"undefined"!==typeof a.maxFacesDetected&&(d=Math.max(1,a.maxFacesDetected));if(d>ua.Dg)return ab("MAXFACES_TOOHIGH"),!1;pa.B({V:d,xe:ua.Eg,Le:ua.Fg,ke:function(k){return k.isDetected}});if(a.canvas)ba.$=a.canvas;else{if(!a.canvasId)return ab("NO_CANVASID"),!1;ba.$=document.getElementById(a.canvasId);if(!ba.$)return ab("INVALID_CANVASID"),!1}Z.m=ba.$.width;Z.F=ba.$.height;if(!Z.m||!Z.F)return ab("INVALID_CANVASDIMENSIONS"),!1;Z.mc=Z.m/Z.F;$a.B({pe:a.isKeepRunningOnWinFocusLost||!1,ic:a.GPUBenchmarkerCallback||
null,ub:ba.wa});ya.B({Yc:0,n:oa.nDetectsPerLoopRange[1]-oa.nDetectsPerLoopRange[0]+1,Tc:oa.nDetectsPerLoopRange[0]});0!==oa.nDetectsPerLoop?ya.jd(oa.nDetectsPerLoop):ya.ud();var e=0;a.videoSettings&&a.videoSettings.videoElement?ub(a.videoSettings.videoElement,b):null===a.videoSettings?b():(a.videoSettings&&Object.assign(La,a.videoSettings),Wb(a.onWebcamAsk,a.onWebcamGet,function(k){ub(k,b)}));Z.bb=Qb.instance({});Sb(function(k){if(!mc())return!1;z.tb([{id:"s67",name:"_",ha:"attribute vec2 a0;uniform mat2 u48;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5,.5)+u48*a0*vec2(1.,-1.);}",
wb:["a0"],Ta:[2],g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u48"],precision:"lowp"},{id:"s64",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",ha:"attribute vec2 a0;uniform sampler2D u49;uniform mat2 u48;uniform vec2 u50;uniform float u51,u41,u52,u53;varying vec2 vv0;void main(){vec2 f=a0;vec4 a=texture2D(u49,vec2(u41,u51));vec2 g=a.gb,b=a.a*u50;b.x*=u53;float c=cos(u52),d=sin(u52);vec2 h=mat2(c,d,-d,c)*f,i=g+.5*h*b;vv0=.5+2.*u48*(i-.5),gl_Position=vec4(a0,0.,1.);}",
wb:["a0"],Ta:[2],i:"u1 u49 u50 u51 u41 u52 u53 u48".split(" "),precision:"lowp"},{id:"s63",name:"_",g:"uniform sampler2D u54,u49;uniform vec3 u55,u56;uniform float u57,u58,u51,u41,u59,u60,u52,u61;const vec4 e=vec4(.25);void main(){float b=(u60-.5)/u60;vec4 f=texture2D(u54,vec2(3.5/u60,b));bool g=dot(f,e)>u58;vec4 a=texture2D(u49,vec2(u41,u51));a.r<-.5?a.r+=1.:g?a.r=2.:a.r>u57?a.r=0.:a.r>1.9?a.r+=1.:0.,a.r=mix(-2.,a.r,u59);if(a.r<.9)a=vec4(1.,u55);else{a.r*=step(1.9,a.r);float h=dot(e,texture2D(u54,vec2(.5/u60,b))),i=dot(e,texture2D(u54,vec2(1.5/u60,b))),j=dot(e,texture2D(u54,vec2(2.5/u60,b))),c=cos(u52),d=sin(u52);vec2 k=mat2(c,d*u61,-d/u61,c)*vec2(h,i);a.gba+=vec3(k,j)*u56*a.a;}gl_FragColor=a;}",
ha:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",i:"u54 u49 u55 u57 u56 u59 u58 u51 u41 u60 u52 u61".split(" ")},{id:"s68",name:"_",ha:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u54;uniform float u60,u59;const vec4 e=vec4(.25);void main(){float a=(u60-.5)/u60,b=dot(e,texture2D(u54,vec2(5.5/u60,a))),c=dot(e,texture2D(u54,vec2(6.5/u60,a))),d=dot(e,texture2D(u54,vec2(7.5/u60,a))),f=dot(e,texture2D(u54,vec2(3.5/u60,a)));vec3 g=vec3(b,c,d);gl_FragColor=vec4(g,f*u59);}",
i:["u54","u60","u59"]},{id:"s69",name:"_",ha:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u54;uniform float u60,u62;const vec4 e=vec4(.25),h=vec4(.5);vec2 f(float a){float b=floor(a/u60),c=a-b*u60;return vec2(c,u60-.5-b)/u60;}vec2 g(float a){vec2 b=f(a*2.),c=f(a*2.+1.);float d=dot(e,texture2D(u54,b)),i=dot(e,texture2D(u54,c));return vec2(d,i);}void main(){float a=floor(2.*gl_FragCoord.x-4.+.5);vec2 b=g(a-1.),c=g(a);gl_FragColor=h+.5*vec4(b,c)/u62;}",i:["u54","u60",
"u62"]},{id:"s65",name:"_",ha:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u54;uniform vec2 u42,u43,u44,u45,u46;const vec4 e=vec4(.25);const float f=3.141593,g=1e-7;void main(){float b=dot(e,texture2D(u54,u42)),c=dot(e,texture2D(u54,u43))/2.,a=dot(e,texture2D(u54,u44)),d=dot(e,texture2D(u54,u45));a+=(step(0.,a)-.5)*g;float h=.5+.5*atan(d,a)/f,i=dot(e,texture2D(u54,u46));gl_FragColor=vec4(b,c,h,i);}",i:"u54 u42 u43 u44 u45 u46".split(" ")},{id:"s66",name:"_",ha:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",
g:"uniform sampler2D u54;uniform vec2 u47;const vec4 e=vec4(.25);void main(){float a=dot(e,texture2D(u54,u47));gl_FragColor=vec4(a,0.,0.,1.);}",i:["u54","u47"]},{id:"s62",name:"_",g:"uniform sampler2D u49,u63;uniform vec2 u64;uniform float u65,u41;varying vec2 vv0;void main(){float f=step(.5,mod(gl_FragCoord.y+1.5,2.)),a=step(u41,vv0.x);vec2 d=vv0+u64;vec4 b=mix(texture2D(u63,d),texture2D(u49,d),vec4(1.,a,a,a));b.a*=mix(u65,1.,a);vec4 g=floor(255.*b),h=255.*fract(255.*b),c=mix(g,h,f)/255.;c.x=mix(step(b.x,1.5),c.x,a),gl_FragColor=c;}",
i:["u49","u63","u65","u64","u41"]}]);Ub(k);b()});return!0},update:function(a){if(!Lb)return Promise.reject("NOT_READY");a.scanSettings&&sb.set_scanSettings(a.scanSettings);a.stabilizationSettings&&sb.set_stabilizationSettings(a.stabilizationSettings);var b=Promise.resolve();if(a.NNCPath||a.NN){V();na=ka.jb;Ua&&Ua.o();Ua=null;for(b=0;b<pa.Aa();++b)Fa[b].detected=0,Fa.isDetected=!1,Fa[b].detectedRaw=0,gb[b].Za=0;a.NNCPath?ba.jc=a.NNCPath:a.NN&&(ba.sb=a.NN);b=new Promise(function(d){Sb(function(e){Ub(e);
P();d()})})}return b},destroy:function(){if(yb)return Promise.reject("ALREADY_DESTROYING");rb=null;Lb=!1;yb=!0;$a.o();return new Promise(function(a){sb.toggle_pause(!0,!0).finally(function(){Ua&&Ua.o();Na.o();Ua=Ab=Fa=gb=null;Z.bb=null;U.fa=null;U.rb=null;C.D=null;na=ka.mb;yb=!1;a()}).catch(function(){})})},toggle_videoStream:function(a){return C.Mb||!C.element?Promise.resolve():ha.Ze(C.element,a,C.Wa)},toggle_pause:function(a,b){if(na===ka.jb||na===ka.Rb)return na=a?ka.Rb:ka.jb,Promise.resolve();
if(-1===[ka.play,ka.pause].indexOf(na))return Promise.reject("NOT_READY");b=b?sb.toggle_videoStream(!a):Promise.resolve();a?V():b.then(function(){P()});return b},toggle_tracking:function(a){-1!==[ka.play,ka.pause].indexOf(na)&&(ba.Kc=a)},reset_GLState:function(){Na.Je()},update_videoSettings:function(a){if(na===ka.jb||na===ka.Rb||na===ka.mb)return Promise.reject("NOT_READY");V();return null===a&&null===C.element?Promise.resolve(null):new Promise(function(b,d){ha.Ze(C.element,!1,C.Wa).then(function(){null===
a?b(null):(Object.assign(La,a),Wb(null,null,function(e){ub(e,function(){C.D.Ug(e);jb();ib();P();b(C.element)})}))}).catch(d)})},set_animateDelay:function(a){ba.wa=a;$a.update({ub:ba.wa})},resize:function(){if(!(C&&C.element&&ba&&ba.$))return!1;var a=ba.$.width,b=ba.$.height;if(!Fb()&&a===Z.m&&b===Z.F)return!1;Z.m=a;Z.F=b;Z.mc=Z.m/Z.F;z.S();Eb();Db();jb();ib();return!0},set_inputTexture:function(a,b,d,e){C.J[0]=b;C.J[1]=d;C.le=e||!1;C.D=ia.instance({width:b,height:d,Ec:a});C.gb=!0;jb();Na.Hc();ib()},
reset_inputTexture:function(){C.gb=!1;C.D=C.od;Fb();jb();ib()},render_video:function(){Ka.P();z.S();z.set("s67");z.Se("u48",C.ga);c.viewport(0,0,Z.m,Z.F);C.D.h(0);W.l(!0,!0);z.Se("u48",C.A)},get_videoDevices:function(a){return ha.ce(a)},get_videoUVScaleMat2:function(){return C.A},is_winFocus:function(){return $a.zg()},set_scanSettings:function(a){Object.assign(oa,a);0!==oa.nDetectsPerLoop?ya.jd(oa.nDetectsPerLoop):ya.ud();Eb();Db()},set_stabilizationSettings:function(a){Object.assign(Da,a)},update_videoElement:function(a,
b){ub(a,function(){Vb();jb();ib();b&&b(C.D.get());na===ka.Ue&&P()})},bind_croppedTextureToSampler:function(a){Z.bb.xa(a)},capture_image:function(a){return Na.Wf(a)},get_LMLabels:function(){return va.labels},get_widthPx:function(){return Z?Z.m:-1},get_heightPx:function(){return Z?Z.F:-1},force_animate:function(){Na.Hc();Ia();ra();db();Ja()},reset:function(){Fa.forEach(function(a){Object.assign(a,{detected:0,detectedRaw:0,isDetected:!1,x:0,y:0,s:1,rx:0,ry:0,rz:0,lAmb:0,lDir:0,lTheta:0,lPhi:0,angWidth:0})});
U.fa.Qa(U.nd);U.rb.Qa(U.nd);hb.reset()},is_outputLighting:function(){return U.Ka},compute_pose:function(a,b,d,e){null===rb&&(Za[0]=d,Za[1]=e,rb=new Gb.zypSolver({cameraFocals:Za,zyp15:ua.dh}));if(Za[0]!==d||Za[1]!==e)Za[0]=d,Za[1]=e,rb.zyp14(Za);a=rb.solve(a,b,!1);return{ok:a.zyp13,repError:a.repError,rotation:a.R,translation:a.t}}};return sb}();
export default WEBARROCKSFACE;
